function loadJS(e,o,t){var i=!!window.ActiveXObject,n=i&&!window.XMLHttpRequest,a=document.createElement("script"),r=n?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,o&&o())}:a.onload=function(){o&&o()},a.src=e,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}var isDebug=!1;$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var e=$(window),o={top:e.scrollTop(),left:e.scrollLeft()};o.right=o.left+e.width(),o.bottom=o.top+e.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(o.right<t.left||o.left>t.right||o.bottom<t.top||o.top>t.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var e=window,o=(e.document,navigator.userAgent.toLowerCase()),t=e.navigator.appVersion.match(/android/gi);e.navigator.appVersion.match(/iphone/gi);"micromessenger"==o.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos()},updateImageWidth:function(){function e(){var e=$(this),o=t.outerWidth(),i=this.naturalWidth;i>=o?e.addClass("full-img"):e.removeClass("full-img")}function o(){i.each(e)}var t=$(".post-content"),i=$(".single-post-inner img").on("load",e);o()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Open Sans","iconfont","fontawesome"],urls:[General.absUrl+"/assets/css/font.min.css","https://ob6mci30g.qnssl.com/fontss/iconfont.css",General.absUrl+"/assets/css/font-awesome.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Open Sans","iconfont","fontawesome"]}})})},scrollToPos:function(e){var o="我要飞到最高",t=(e||$(window).height(),$('<a href="#" id="to-top" title="'+o+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(e){var o,t,i={twitter:"iconfont-twitter icon-iconfonttwitter",qzone:"iconfont-qzone icon-qzone",weibo:"iconfont-weibo icon-iconfontweibo",facebook:"iconfont-facebook icon-iconfontfacebook",github:"iconfont-github icon-github",douban:"iconfont-douban icon-iconfontdouban",google:"iconfont-google icon-iconfontgoogle",luolei:"iconfont-luolei icon-luolei",dribble:"iconfont-dribble icon-dribbblecircled",v2ex:"iconfont-v2ex icon-iconfontv2ex",zhihu:"iconfont-zhihu icon-iconfontzhihu",wikipedia:"iconfont-wikipedia icon-iconfontwikipedia",jianshu:"iconfont-jianshu icon-jianshu",youku:"iconfont-youku icon-iconfontyouku",youtube:"iconfont-youtube icon-youtube",juejin:"iconfont-juejin icon-juejin",weixin:"iconfont-weixin icon-iconfontwechat",segmentfault:"iconfont-sf icon-iconsf-copy"};for(var n in i)if("function"!=typeof i[n]){var a=n;e.indexOf(a)>=0&&(o=a,t=i[a])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(e){var o=$(this).attr("href"),t=document.createElement("a");t.href=o,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var i=$(this).find("i").css("color"),n=$(this).css("color");$(this).hover(function(){$(this).css("color",i),$(this).addClass("animated pulse")},function(){$(this).css("color",n),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var e={alipay:"/assets/images/qr-alipay-255.png",wechat:"/assets/images/qr-wechat-255.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",e.wechat),$("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",e.wechat),$(this).find("img.alipay-img").attr("src",e.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(e,o){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},i=new Image;i.onload=function(){i.width>0&&i.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},i.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},i.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(ImageSmartLoader.isWebPSupported===!0){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var e=$(window),o=document.getElementById("scroll-hint");null!==o&&($(".header-scroll-hint").on("click",function(e){var o=$(this).closest(".cover");$("html, body").animate({scrollTop:o.position().top+o.height()},400),e.preventDefault()}),window.addEventListener("load",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")}),window.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>0?o.classList.remove("visible"):o.classList.add("visible")})),$("#toc").initTOC({selector:"h1, h2, h3, h4, h5, h6",scope:"article",overwrite:!1,prefix:"toc"});var t=$(".post").width()/2+20;if($("#toc").css({"margin-left":t+"px"}),$(".sidebar-toggle").on("click",function(e){$("body").hasClass("sidebar-opened")?($("body").removeClass("sidebar-opened"),$("body").css("overflow","scroll")):($("body").addClass("sidebar-opened"),$("body").css("overflow","hidden")),e.preventDefault()}),$(".search-toggle").on("click",function(e){$("body").hasClass("search-opened")?($("body").removeClass("search-opened"),$("body").css("overflow","scroll"),searchField.clear()):($("body").addClass("search-opened"),$("body").css("overflow","hidden"),setTimeout(function(){$("#search-field").focus()},300)),e.preventDefault()}),$(".overlay").on("click",function(e){$("body").removeClass("sidebar-opened search-opened"),$("body").css("overflow","scroll"),searchField.clear(),e.preventDefault()}),"undefined"!=typeof disqus_shortname){var i=!1;$(".comments-title").on("click",function(){var e=$(this);i?($("#disqus_thread").slideToggle(),e.hasClass("toggled-on")?e.removeClass("toggled-on"):e.addClass("toggled-on")):($.ajax({type:"GET",url:"//"+disqus_shortname+".disqus.com/embed.js",dataType:"script",cache:!0}),e.addClass("toggled-on"),i=!0)})}$.fn.lazyload=function(o){function t(){var e=0;n.each(function(){var o=$(this);if(!a.skip_invisible||o.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else o.trigger("appear"),e=0})}var i,n=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return o&&(void 0!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),void 0!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),$.extend(a,o)),i=void 0===a.container||a.container===window?e:$(a.container),0===a.event.indexOf("scroll")&&i.bind(a.event,function(){return t()}),this.each(function(){var e=this,o=$(e);e.loaded=!1,void 0!==o.attr("src")&&o.attr("src")!==!1||o.is("img")&&(o.attr("src",a.placeholder),o.addClass("loading")),o.one("appear",function(){if(!this.loaded){if(a.appear){var t=n.length;a.appear.call(e,t,a)}var i=o.attr("data-"+a.data_attribute);void 0===i&&(i=o.attr("src")),void 0===i&&(i=o.style.backgroundImage),void 0!==i&&i.indexOf("ob6mci30g.qnssl.com")>-1&&(a.advanced_load===!0&&(i+="?imageView2"),a.is_scale===!0&&(i+="/0/w/"+a.scale_width),a.webP_load===!0&&a.is_scale===!1&&(i+="/0/format/webp"),a.webP_load===!0&&a.is_scale===!0&&(i+="/format/webp")),$("<img />").bind("load",function(){o.hide(),o.is("img")?o.attr("src",i):o.css("background-image","url('"+i+"')"),o[a.effect](a.effect_speed),e.loaded=!0;var t=$.grep(n,function(e){return!e.loaded});if(n=$(t),a.load){var r=n.length;a.load.call(e,r,a)}o.removeClass("loading")}).attr("src",i)}}),0!==a.event.indexOf("scroll")&&o.bind(a.event,function(){e.loaded||o.trigger("appear")})}),e.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(o,t){var i;return i=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:e.height())+e.scrollTop():$(t.container).offset().top+$(t.container).height(),i<=$(o).offset().top-t.threshold},$.rightoffold=function(o,t){var i;return i=void 0===t.container||t.container===window?e.width()+e.scrollLeft():$(t.container).offset().left+$(t.container).width(),i<=$(o).offset().left-t.threshold},$.abovethetop=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollTop():$(t.container).offset().top,i>=$(o).offset().top+t.threshold+$(o).height()},$.leftofbegin=function(o,t){var i;return i=void 0===t.container||t.container===window?e.scrollLeft():$(t.container).offset().left,i>=$(o).offset().left+t.threshold+$(o).width()},$.inviewport=function(e,o){return!($.rightoffold(e,o)||$.leftofbegin(e,o)||$.belowthefold(e,o)||$.abovethetop(e,o))},$.extend($.expr[":"],{"below-the-fold":function(e){return $.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return $.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!$.rightoffold(e,{threshold:0})},"in-viewport":function(e){return $.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!$.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return $.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!$.rightoffold(e,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&General.addIcons()});
!function(e){!function(){var e=function(t){var r=new e.Builder;return r.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),r.searchPipeline.add(e.stemmer),t.call(r,r),r.build()};e.version="2.1.5",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn}}(this),e.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},e.FieldRef=function(e,t,r){this.docRef=e,this.fieldName=t,this._stringValue=r},e.FieldRef.joiner="/",e.FieldRef.fromString=function(t){var r=t.indexOf(e.FieldRef.joiner);if(r===-1)throw"malformed field ref string";var i=t.slice(0,r),n=t.slice(r+1);return new e.FieldRef(n,i,t)},e.FieldRef.prototype.toString=function(){return void 0===this._stringValue&&(this._stringValue=this.fieldName+e.FieldRef.joiner+this.docRef),this._stringValue},e.idf=function(e,t){var r=0;for(var i in e)"_index"!=i&&(r+=Object.keys(e[i]).length);var n=(t-r+.5)/(r+.5);return Math.log(1+Math.abs(n))},e.Token=function(e,t){this.str=e||"",this.metadata=t||{}},e.Token.prototype.toString=function(){return this.str},e.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},e.Token.prototype.clone=function(t){return t=t||function(e){return e},new e.Token(t(this.str,this.metadata),this.metadata)},e.tokenizer=function(t){if(null===t||void 0===t)return[];if(Array.isArray(t))return t.map(function(t){return new e.Token(e.utils.asString(t).toLowerCase())});for(var r=t.toString().trim().toLowerCase(),i=r.length,n=[],s=0,o=0;s<=i;s++){var a=r.charAt(s),u=s-o;(a.match(e.tokenizer.separator)||s==i)&&(u>0&&n.push(new e.Token(r.slice(o,s),{position:[o,u],index:n.length})),o=s+1)}return n},e.tokenizer.separator=/[\s\-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions=Object.create(null),e.Pipeline.registerFunction=function(t,r){r in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+r),t.label=r,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var r=t.label&&t.label in this.registeredFunctions;r||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var r=new e.Pipeline;return t.forEach(function(t){var i=e.Pipeline.registeredFunctions[t];if(!i)throw new Error("Cannot load unregistered function: "+t);r.add(i)}),r},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");i+=1,this._stack.splice(i,0,r)},e.Pipeline.prototype.before=function(t,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(t);if(i==-1)throw new Error("Cannot find existingFn");this._stack.splice(i,0,r)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);t!=-1&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=this._stack.length,r=function(t,r,i){var s=n(r,i,e);return void 0===s||""===s?t:t.concat(s)},i=0;i<t;i++){var n=this._stack[i];e=e.reduce(r,[])}return e},e.Pipeline.prototype.runString=function(t){var r=new e.Token(t);return this.run([r]).map(function(e){return e.toString()})},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(e){this._magnitude=0,this.elements=e||[]},e.Vector.prototype.positionForIndex=function(e){if(0===this.elements.length)return 0;for(var t=0,r=this.elements.length/2,i=r-t,n=Math.floor(i/2),s=this.elements[2*n];i>1&&(s<e&&(t=n),s>e&&(r=n),s!=e);)i=r-t,n=t+Math.floor(i/2),s=this.elements[2*n];return s==e?2*n:s>e?2*n:s<e?2*(n+1):void 0},e.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},e.Vector.prototype.upsert=function(e,t,r){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=r(this.elements[i+1],t):this.elements.splice(i,0,e,t)},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,r=1;r<t;r+=2){var i=this.elements[r];e+=i*i}return this._magnitude=Math.sqrt(e),this._magnitude},e.Vector.prototype.dot=function(e){for(var t=0,r=this.elements,i=e.elements,n=r.length,s=i.length,o=0,a=0,u=0,l=0;u<n&&l<s;)o=r[u],a=i[l],o<a?u+=2:o>a?l+=2:o==a&&(t+=r[u+1]*i[l+1],u+=2,l+=2);return t},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,r=0;t<this.elements.length;t+=2,r++)e[r]=this.elements[t];return e},e.Vector.prototype.toJSON=function(){return this.elements},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",i="[aeiouy]",n=r+"[^aeiouy]*",s=i+"[aeiou]*",o="^("+n+")?"+s+n,a="^("+n+")?"+s+n+"("+s+")?$",u="^("+n+")?"+s+n+s+n,l="^("+n+")?"+i,h=new RegExp(o),d=new RegExp(u),c=new RegExp(a),f=new RegExp(l),p=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/,v=/.$/,x=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),b=new RegExp("^"+n+i+"[^aeiouwxy]$"),k=/^(.+?[^aeiou])y$/,S=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,Q=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,L=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,_=/^(.+?)(s|t)(ion)$/,T=/^(.+?)e$/,P=/ll$/,I=new RegExp("^"+n+i+"[^aeiouwxy]$"),O=function(r){var i,n,s,o,a,u,l;if(r.length<3)return r;s=r.substr(0,1),"y"==s&&(r=s.toUpperCase()+r.substr(1)),o=p,a=g,o.test(r)?r=r.replace(o,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2"));var O;return o=m,a=y,o.test(r)?(O=o.exec(r),o=h,o.test(O[1])&&(o=v,r=r.replace(o,""))):a.test(r)&&(O=a.exec(r),i=O[1],a=f,a.test(i)&&(r=i,a=x,u=w,l=b,a.test(r)?r+="e":u.test(r)?(o=v,r=r.replace(o,"")):l.test(r)&&(r+="e"))),o=k,o.test(r)&&(O=o.exec(r),i=O[1],r=i+"i"),o=S,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+e[n])),o=Q,o.test(r)&&(O=o.exec(r),i=O[1],n=O[2],o=h,o.test(i)&&(r=i+t[n])),o=L,a=_,o.test(r)?(O=o.exec(r),i=O[1],o=d,o.test(i)&&(r=i)):a.test(r)&&(O=a.exec(r),i=O[1]+O[2],a=d,a.test(i)&&(r=i)),o=T,o.test(r)&&(O=o.exec(r),i=O[1],o=d,a=c,u=I,(o.test(i)||a.test(i)&&!u.test(i))&&(r=i)),o=P,a=d,o.test(r)&&a.test(r)&&(o=v,r=r.replace(o,"")),"y"==s&&(r=s.toLowerCase()+r.substr(1)),r};return function(e){return e.update(O)}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenSet=function(){this["final"]=!1,this.edges={},this.id=e.TokenSet._nextId,e.TokenSet._nextId+=1},e.TokenSet._nextId=1,e.TokenSet.fromArray=function(t){for(var r=new e.TokenSet.Builder,i=0,n=t.length;i<n;i++)r.insert(t[i]);return r.finish(),r.root},e.TokenSet.fromClause=function(t){return"editDistance"in t?e.TokenSet.fromFuzzyString(t.term,t.editDistance):e.TokenSet.fromString(t.term)},e.TokenSet.fromFuzzyString=function(t,r){for(var i=new e.TokenSet,n=[{node:i,editsRemaining:r,str:t}];n.length;){var s,o=n.pop();if(o.str.length>0){s=o.str.charAt(0);var a;s in o.node.edges?a=o.node.edges[s]:(a=new e.TokenSet,o.node.edges[s]=a),1==o.str.length?a["final"]=!0:n.push({node:a,editsRemaining:o.editsRemaining,str:o.str.slice(1)})}if(o.editsRemaining>0&&o.str.length>1){s=o.str.charAt(1);var u;s in o.node.edges?u=o.node.edges[s]:(u=new e.TokenSet,o.node.edges[s]=u),o.str.length<=2?u["final"]=!0:n.push({node:u,editsRemaining:o.editsRemaining-1,str:o.str.slice(2)})}o.editsRemaining>0&&1==o.str.length&&(o.node["final"]=!0);var l;o.editsRemaining>0&&o.str.length>=1&&("*"in o.node.edges?l=o.node.edges["*"]:(l=new e.TokenSet,o.node.edges["*"]=l),1==o.str.length?l["final"]=!0:n.push({node:l,editsRemaining:o.editsRemaining-1,str:o.str.slice(1)}));var h;if(o.editsRemaining>0&&("*"in o.node.edges?h=o.node.edges["*"]:(h=new e.TokenSet,o.node.edges["*"]=h),0===o.str.length?h["final"]=!0:n.push({node:h,editsRemaining:o.editsRemaining-1,str:o.str})),o.editsRemaining>0&&o.str.length>1){var d,c=o.str.charAt(0),f=o.str.charAt(1);f in o.node.edges?d=o.node.edges[f]:(d=new e.TokenSet,o.node.edges[f]=d),1==o.str.length?d["final"]=!0:n.push({node:d,editsRemaining:o.editsRemaining-1,str:c+o.str.slice(2)})}}return i},e.TokenSet.fromString=function(t){for(var r=new e.TokenSet,i=r,n=!1,s=0,o=t.length;s<o;s++){var a=t[s],u=s==o-1;if("*"==a)n=!0,r.edges[a]=r,r["final"]=u;else{var l=new e.TokenSet;l["final"]=u,r.edges[a]=l,r=l,n&&(r.edges["*"]=i)}}return i},e.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var r=t.pop(),i=Object.keys(r.node.edges),n=i.length;r.node["final"]&&e.push(r.prefix);for(var s=0;s<n;s++){var o=i[s];t.push({prefix:r.prefix.concat(o),node:r.node.edges[o]})}}return e},e.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this["final"]?"1":"0",t=Object.keys(this.edges).sort(),r=t.length,i=0;i<r;i++){var n=t[i],s=this.edges[n];e=e+n+s.id}return e},e.TokenSet.prototype.intersect=function(t){for(var r,i=new e.TokenSet,n=[{qNode:t,output:i,node:this}];n.length;){r=n.pop();for(var s=Object.keys(r.qNode.edges),o=s.length,a=Object.keys(r.node.edges),u=a.length,l=0;l<o;l++)for(var h=s[l],d=0;d<u;d++){var c=a[d];if(c==h||"*"==h){var f,p=r.node.edges[c],g=r.qNode.edges[h],m=p["final"]&&g["final"];c in r.output.edges?(f=r.output.edges[c],f["final"]=f["final"]||m):(f=new e.TokenSet,f["final"]=m,r.output.edges[c]=f),n.push({qNode:g,output:f,node:p})}}}return i},e.TokenSet.Builder=function(){this.previousWord="",this.root=new e.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},e.TokenSet.Builder.prototype.insert=function(t){var r,i=0;if(t<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<t.length&&n<this.previousWord.length&&t[n]==this.previousWord[n];n++)i++;this.minimize(i),r=0===this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child;for(var s=i;s<t.length;s++){var o=new e.TokenSet,a=t[s];r.edges[a]=o,this.uncheckedNodes.push({parent:r,"char":a,child:o}),r=o}r["final"]=!0,this.previousWord=t},e.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},e.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;t>=e;t--){var r=this.uncheckedNodes[t],i=r.child.toString();i in this.minimizedNodes?r.parent.edges[r["char"]]=this.minimizedNodes[i]:(r.child._str=i,this.minimizedNodes[i]=r.child),this.uncheckedNodes.pop()}},e.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline},e.Index.prototype.search=function(t){return this.query(function(r){var i=new e.QueryParser(t,r);i.parse()})},e.Index.prototype.query=function(t){var r=new e.Query(this.fields),i=Object.create(null),n=Object.create(null),s=Object.create(null);t.call(r,r);for(var o=0;o<r.clauses.length;o++){var a=r.clauses[o],u=null;u=a.usePipeline?this.pipeline.runString(a.term):[a.term];for(var l=0;l<u.length;l++){var h=u[l];a=JSON.parse(JSON.stringify(a)),a.term=h;for(var d,c=e.TokenSet.fromClause(a),f=this.tokenSet.intersect(c).toArray(),p=0;p<f.length;p++){var g=f[p],m=this.invertedIndex[g];if(m){d=m._index;for(var y=0;y<a.fields.length;y++){var v=a.fields[y],x=m[v],w=Object.keys(x),b=g+"/"+v;if(void 0===n[v]&&(n[v]=new e.Vector),n[v].upsert(d,1*a.boost,function(e,t){return e+t}),!s[b]){for(var k=0;k<w.length;k++){var S,Q=w[k],L=new e.FieldRef(Q,v),_=x[Q];void 0===(S=i[L])?i[L]=new e.MatchData(g,v,_):S.add(g,v,_)}s[b]=!0}}}}}}var T=Object.keys(i),P=[],I=Object.create(null);for(o=0;o<T.length;o++){var O,E=e.FieldRef.fromString(T[o]),F=E.docRef,D=this.fieldVectors[E],j=n[E.fieldName].similarity(D);if(void 0!==(O=I[F]))O.score+=j,O.matchData.combine(i[E]);else{var R={ref:F,score:j,matchData:i[E]};I[F]=R,P.push(R)}}return P.sort(function(e,t){return t.score-e.score})},e.Index.prototype.toJSON=function(){var t=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),r=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:e.version,fields:this.fields,fieldVectors:r,invertedIndex:t,pipeline:this.pipeline.toJSON()}},e.Index.load=function(t){var r={},i={},n=t.fieldVectors,s={},o=t.invertedIndex,a=new e.TokenSet.Builder,u=e.Pipeline.load(t.pipeline);t.version!=e.version&&e.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+e.version+"' does not match serialized index '"+t.version+"'");for(var l,h=0;h<n.length;h++)l=n[h],ref=l[0],elements=l[1],i[ref]=new e.Vector(elements);for(h=0;h<o.length;h++)l=o[h],term=l[0],posting=l[1],a.insert(term),s[term]=posting;return a.finish(),r.fields=t.fields,r.fieldVectors=i,r.invertedIndex=s,r.tokenSet=a.root,r.pipeline=u,new e.Index(r)},e.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=e.tokenizer,this.pipeline=new e.Pipeline,this.searchPipeline=new e.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]},e.Builder.prototype.ref=function(e){this._ref=e},e.Builder.prototype.field=function(e){this._fields.push(e)},e.Builder.prototype.b=function(e){e<0?this._b=0:e>1?this._b=1:this._b=e},e.Builder.prototype.k1=function(e){this._k1=e},e.Builder.prototype.add=function(t){var r=t[this._ref];this.documentCount+=1;for(var i=0;i<this._fields.length;i++){var n=this._fields[i],s=t[n],o=this.tokenizer(s),a=this.pipeline.run(o),u=new e.FieldRef(r,n),l=Object.create(null);this.fieldTermFrequencies[u]=l,this.fieldLengths[u]=0,this.fieldLengths[u]+=a.length;for(var h=0;h<a.length;h++){var d=a[h];if(void 0===l[d]&&(l[d]=0),l[d]+=1,void 0===this.invertedIndex[d]){var c=Object.create(null);c._index=this.termIndex,this.termIndex+=1;for(var f=0;f<this._fields.length;f++)c[this._fields[f]]=Object.create(null);this.invertedIndex[d]=c}void 0===this.invertedIndex[d][n][r]&&(this.invertedIndex[d][n][r]=Object.create(null));for(var p=0;p<this.metadataWhitelist.length;p++){var g=this.metadataWhitelist[p],m=d.metadata[g];void 0===this.invertedIndex[d][n][r][g]&&(this.invertedIndex[d][n][r][g]=[]),this.invertedIndex[d][n][r][g].push(m)}}}},e.Builder.prototype.calculateAverageFieldLengths=function(){for(var t,r=Object.keys(this.fieldLengths),i=r.length,n={},s={},o=0;o<i;o++){var a=e.FieldRef.fromString(r[o]);t=a.fieldName,(s[t]||(s[t]=0))&&(s[t]+=1),(n[t]||(n[t]=0))&&(n[t]+=this.fieldLengths[a])}for(o=0;o<this._fields.length;o++)t=this._fields[o],n[t]=n[t]/s[t];this.averageFieldLength=n},e.Builder.prototype.createFieldVectors=function(){for(var t={},r=Object.keys(this.fieldTermFrequencies),i=r.length,n=Object.create(null),s=0;s<i;s++){for(var o=e.FieldRef.fromString(r[s]),a=o.fieldName,u=this.fieldLengths[o],l=new e.Vector,h=this.fieldTermFrequencies[o],d=Object.keys(h),c=d.length,f=0;f<c;f++){var p,g,m,y=d[f],v=h[y],x=this.invertedIndex[y]._index;void 0===n[y]?(p=e.idf(this.invertedIndex[y],this.documentCount),n[y]=p):p=n[y],g=p*((this._k1+1)*v)/(this._k1*(1-this._b+this._b*(u/this.averageFieldLength[a]))+v),m=Math.round(1e3*g)/1e3,l.insert(x,m)}t[o]=l}this.fieldVectors=t},e.Builder.prototype.createTokenSet=function(){this.tokenSet=e.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},e.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new e.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},e.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.MatchData=function(e,t,r){for(var i=Object.create(null),n=Object.keys(r),s=0;s<n.length;s++){var o=n[s];i[o]=r[o].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i},e.MatchData.prototype.combine=function(e){for(var t=Object.keys(e.metadata),r=0;r<t.length;r++){var i=t[r],n=Object.keys(e.metadata[i]);void 0===this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var s=0;s<n.length;s++){var o=n[s],a=Object.keys(e.metadata[i][o]);void 0===this.metadata[i][o]&&(this.metadata[i][o]=Object.create(null));for(var u=0;u<a.length;u++){var l=a[u];void 0===this.metadata[i][o][l]?this.metadata[i][o][l]=e.metadata[i][o][l]:this.metadata[i][o][l]=this.metadata[i][o][l].concat(e.metadata[i][o][l])}}}},e.MatchData.prototype.add=function(e,t,r){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=r);if(!(t in this.metadata[e]))return void(this.metadata[e][t]=r);for(var i=Object.keys(r),n=0;n<i.length;n++){var s=i[n];s in this.metadata[e][t]?this.metadata[e][t][s]=this.metadata[e][t][s].concat(r[s]):this.metadata[e][t][s]=r[s]}},e.Query=function(e){this.clauses=[],this.allFields=e},e.Query.wildcard="*",e.Query.wildcard.NONE=0,e.Query.wildcard.LEADING=1,e.Query.wildcard.TRAILING=2,e.Query.prototype.clause=function(t){return"fields"in t||(t.fields=this.allFields),"boost"in t||(t.boost=1),"usePipeline"in t||(t.usePipeline=!0),"wildcard"in t||(t.wildcard=e.Query.wildcard.NONE),t.wildcard&e.Query.wildcard.LEADING&&t.term.charAt(0)!=e.Query.wildcard&&(t.term="*"+t.term),t.wildcard&e.Query.wildcard.TRAILING&&t.term.slice(-1)!=e.Query.wildcard&&(t.term=""+t.term+"*"),this.clauses.push(t),this},e.Query.prototype.term=function(e,t){var r=t||{};return r.term=e,this.clause(r),this},e.QueryParseError=function(e,t,r){this.name="QueryParseError",this.message=e,this.start=t,this.end=r},e.QueryParseError.prototype=new Error,e.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]},e.QueryLexer.prototype.run=function(){for(var t=e.QueryLexer.lexText;t;)t=t(this)},e.QueryLexer.prototype.sliceString=function(){for(var e=[],t=this.start,r=this.pos,i=0;i<this.escapeCharPositions.length;i++)r=this.escapeCharPositions[i],e.push(this.str.slice(t,r)),t=r+1;return e.push(this.str.slice(t,this.pos)),this.escapeCharPositions.length=0,e.join("")},e.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},e.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},e.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return e.QueryLexer.EOS;var t=this.str.charAt(this.pos);return this.pos+=1,t},e.QueryLexer.prototype.width=function(){return this.pos-this.start},e.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},e.QueryLexer.prototype.backup=function(){this.pos-=1},e.QueryLexer.prototype.acceptDigitRun=function(){var t,r;do t=this.next(),r=t.charCodeAt(0);while(r>47&&r<58);t!=e.QueryLexer.EOS&&this.backup()},e.QueryLexer.prototype.more=function(){return this.pos<this.length},e.QueryLexer.EOS="EOS",e.QueryLexer.FIELD="FIELD",e.QueryLexer.TERM="TERM",e.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",e.QueryLexer.BOOST="BOOST",e.QueryLexer.lexField=function(t){return t.backup(),t.emit(e.QueryLexer.FIELD),t.ignore(),e.QueryLexer.lexText},e.QueryLexer.lexTerm=function(t){if(t.width()>1&&(t.backup(),t.emit(e.QueryLexer.TERM)),t.ignore(),t.more())return e.QueryLexer.lexText},e.QueryLexer.lexEditDistance=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.EDIT_DISTANCE),e.QueryLexer.lexText},e.QueryLexer.lexBoost=function(t){return t.ignore(),t.acceptDigitRun(),t.emit(e.QueryLexer.BOOST),e.QueryLexer.lexText},e.QueryLexer.lexEOS=function(t){t.width()>0&&t.emit(e.QueryLexer.TERM)},e.QueryLexer.termSeparator=e.tokenizer.separator,e.QueryLexer.lexText=function(t){for(;;){var r=t.next();if(r==e.QueryLexer.EOS)return e.QueryLexer.lexEOS;if(92!=r.charCodeAt(0)){if(":"==r)return e.QueryLexer.lexField;if("~"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexEditDistance;if("^"==r)return t.backup(),t.width()>0&&t.emit(e.QueryLexer.TERM),e.QueryLexer.lexBoost;if(r.match(e.QueryLexer.termSeparator))return e.QueryLexer.lexTerm}else t.escapeCharacter()}},e.QueryParser=function(t,r){this.lexer=new e.QueryLexer(t),this.query=r,this.currentClause={},this.lexemeIdx=0},e.QueryParser.prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var t=e.QueryParser.parseFieldOrTerm;t;)t=t(this);return this.query},e.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},e.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},e.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},e.QueryParser.parseFieldOrTerm=function(t){var r=t.peekLexeme();if(void 0!==r)switch(r.type){case e.QueryLexer.FIELD:return e.QueryParser.parseField;case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:var i="expected either a field or a term, found "+r.type;throw r.str.length>=1&&(i+=" with value '"+r.str+"'"),new e.QueryParseError(i,r.start,r.end)}},e.QueryParser.parseField=function(t){var r=t.consumeLexeme();if(void 0!==r){var i;if(t.query.allFields.indexOf(r.str)==-1){var n=t.query.allFields.map(function(e){return"'"+e+"'"}).join(", ");throw i="unrecognised field '"+r.str+"', possible fields: "+n,new e.QueryParseError(i,r.start,r.end)}t.currentClause.fields=[r.str];var s=t.peekLexeme();if(void 0===s)throw i="expecting term, found nothing",new e.QueryParseError(i,r.start,r.end);switch(s.type){case e.QueryLexer.TERM:return e.QueryParser.parseTerm;default:throw i="expecting term, found '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseTerm=function(t){var r=t.consumeLexeme();if(void 0!==r){t.currentClause.term=r.str.toLowerCase(),r.str.indexOf("*")!=-1&&(t.currentClause.usePipeline=!1);var i=t.peekLexeme();if(void 0===i)return void t.nextClause();switch(i.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:var n="Unexpected lexeme type '"+i.type+"'";throw new e.QueryParseError(n,i.start,i.end)}}},e.QueryParser.parseEditDistance=function(t){var r=t.consumeLexeme();if(void 0!==r){var i,n=parseInt(r.str,10);if(isNaN(n))throw i="edit distance must be numeric",new e.QueryParseError(i,r.start,r.end);t.currentClause.editDistance=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(i,s.start,s.end)}}},e.QueryParser.parseBoost=function(t){var r,i=t.consumeLexeme();if(void 0!==i){var n=parseInt(i.str,10);if(isNaN(n))throw r="boost must be numeric",new e.QueryParseError(r,i.start,i.end);t.currentClause.boost=n;var s=t.peekLexeme();if(void 0===s)return void t.nextClause();switch(s.type){case e.QueryLexer.TERM:return t.nextClause(),e.QueryParser.parseTerm;case e.QueryLexer.FIELD:return t.nextClause(),e.QueryParser.parseField;case e.QueryLexer.EDIT_DISTANCE:return e.QueryParser.parseEditDistance;case e.QueryLexer.BOOST:return e.QueryParser.parseBoost;default:throw r="Unexpected lexeme type '"+s.type+"'",new e.QueryParseError(r,s.start,s.end)}}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e,t){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module&&module.exports?module.exports=t(e):e.Levenshtein=t(e)}(this,function(e){function t(e,t){var r,i;for(r=-1,i=e.length;++r<i;)t(e[r],r,e)}function r(e,r){var i;return i=Array(e.length),t(e,function(e,t,n){i.push(r(e,t,n))}),i}function i(e,r,i){return t(e,function(e,t,n){i=r(e,t,n)}),i}function n(e,t){return e.charAt(t)}function s(e,t){return e[t]}function o(e,r){var i,o,a,u;if("string"==typeof e&&"string"==typeof r)u=n;else{if("object"!=typeof e||"object"!=typeof r)throw"Levensthtein: input must be two strings or two arrays";u=s}return a=this._matrix=[],e==r?(this.distance=0,this.distance):""===e?(this.distance=r.length,this.distance):""===r?(this.distance=e.length,this.distance):(i=[0],t(e,function(e,t){t++,i[t]=t}),a[0]=i,t(r,function(n,s){o=[++s],t(e,function(t,n){n++,u(e,n-1)==u(r,s-1)?o[n]=i[n-1]:o[n]=Math.min(i[n]+1,o[n-1]+1,i[n-1]+1)}),i=o,a[a.length]=i}),this.distance=o[o.length-1],this.distance)}return o.prototype.toString=o.prototype.inspect=function(e){var t,n,s,o,a;for(t=this.getMatrix(),n=i(t,function(e,t){return Math.max(e,i(t,Math.max,0))},0),s=Array((n+"").length).join(" "),o=[];o.length<(t[0]&&t[0].length||0);)o[o.length]=Array(s.length+1).join("-");return o=o.join("-+")+"-",a=r(t,function(e){var t;return t=r(e,function(e){return(s+e).slice(-s.length)}),t.join(" |")+" "}),a.join("\n"+o+"\n")},o.prototype.getSteps=function(){var e,t,r,i,n,s,o,a;for(e=[],t=this.getMatrix(),r=t.length-1,i=t[0].length-1;0!==r||0!==i;)n=i>0?t[r][i-1]:Number.MAX_VALUE,s=r>0?t[r-1][i]:Number.MAX_VALUE,o=i>0&&r>0?t[r-1][i-1]:Number.MAX_VALUE,a=Math.min(n,s,o),a===o?(o<t[r][i]&&e.push(["substitute",i,r]),r--,i--):a===s?(e.push(["insert",i,r]),r--):(e.push(["delete",i,r]),i--);return e},o.prototype.getMatrix=function(){return this._matrix.slice()},o.prototype.valueOf=function(){return this.distance},o}),e.fn.ghostHunter=function(t){var r=e.extend({},e.fn.ghostHunter.defaults,t);if(r.results)return a.init(this,r),a},e.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!0,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{prettyPubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,includepages:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1};var t=function(e){var t=new Date(e),r=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getDate()+" "+r[t.getMonth()]+" "+t.getFullYear()},r=function(e){return e.replace(/^\//,"").replace(/\//g,"-")},i=null,n=function(){e(".gh-search-item").each(function(){var e=this.getAttribute("id"),t=e.replace(/^new-/,"");this.setAttribute("id",t)})},s=function(e,t,r){for(var i=0,s=r.length;i<s;i++){var o=r[i];if("delete"==o[0])e.eq(o[1]-1).remove();else{var a=t[o[2]-1].ref,u=this.blogData[a],l=this.format(this.result_template,u);if("substitute"===o[0])e.eq(o[1]-1).replaceWith(l);else if("insert"===o[0]){var h;h=0===o[1]?null:o[1]-1,e.eq(h).after(l)}}}n()},o=function(){this.blogData={},this.latestPost=0;var i={limit:"all",include:"tags",formats:["plaintext"]};this.includepages&&(i.filter="(page:true,page:false)");var n=this;e.get(ghost.url.api("posts",i)).done(function(e){var i=e.posts;n.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),this.field("plaintext"),this.field("pubDate"),this.field("tag"),i.forEach(function(e){var r=new Date(e.updated_at).getTime(),i=new Date(n.latestPost).getTime();r>i&&(n.latestPost=e.updated_at);var s=e.tags.map(function(e){return e.name});null===e.meta_description&&(e.meta_description="");var o=s.join(", ");o.length<1&&(o="undefined");var a={id:String(e.id),title:String(e.title),description:String(e.custom_excerpt),plaintext:String(e.plaintext),pubDate:String(e.published_at),tag:o};this.add(a);var u=n.subpath+e.url;n.blogData[e.id]={title:e.title,description:e.meta_description,pubDate:t(a.pubDate),link:u,tags:s},n.item_preprocessor&&Object.assign(n.blogData[e.id],n.item_preprocessor(e))},this)});try{var s=r(n.subpath);localStorage.setItem("ghost_"+s+"_lunrIndex",JSON.stringify(n.index)),localStorage.setItem("ghost_"+s+"_blogData",JSON.stringify(n.blogData)),localStorage.setItem("ghost_"+s+"_latestPost",n.latestPost)}catch(o){}n.indexing_end&&n.indexing_end(),n.isInit=!0})},a={isInit:!1,init:function(e,t){var r=this;Object.assign(this,t);var i=function(){};t.onPageLoad?(i=function(){r.loadAPI()},window.setTimeout(i,1)):e.focus(function(){r.loadAPI()}),e.closest("form").submit(function(t){t.preventDefault(),r.find(e.val())}),t.onKeyUp&&(e.keydown(function(e){if(13===e.which)return!1}),e.keyup(function(t){r.find(e.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var t=r(this.subpath);this.index=localStorage.getItem("ghost_"+t+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+t+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+t+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(i){}}if(this.isInit){var n={limit:"all",filter:"updated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",fields:"id"},s=this;e.get(ghost.url.api("posts",n)).done(function(e){e.posts.length>0?o.call(s):(s.indexing_end&&s.indexing_end(),s.isInit=!0)})}else o.call(this)},find:function(t){clearTimeout(i),t||(t=""),t=t.toLowerCase(),i=setTimeout(function(){for(var r=[],i=t.split(/\s+/),o=0,a=i.length;o<a;o++){var u=i[o];u&&r.push(this.index.query(function(e){e.term(u,{usePipeline:!0,boost:100}),e.term(u,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(u,{usePipeline:!1,editDistance:1,boost:1})}))}var l;if(r.length>1)for(l=r[0],r=r.slice(1),o=l.length-1;o>-1;o--){var h=l[o].ref;for(j=0,jlen=r.length;j<jlen;j++){for(var d={},c=0,f=r[j].length;c<f;c++)d[r[j][c].ref]=!0;if(!d[h]){l=l.slice(0,o).concat(l.slice(o+1));break}}}else l=1===r.length?r[0]:[];var p=e(this.results),g=[];for(0===l.length?(p.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&p.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(p.length>0?p.children().eq(0).replaceWith(this.format(this.info_template,{amount:l.length
})):p.append(this.format(this.info_template,{amount:l.length}))),this.before&&this.before(),o=0;o<l.length;o++){var m=l[o].ref,y=this.blogData[m];y&&(y.ref=m,g.push(y))}var v=e(".gh-search-item"),x=v.map(function(){return this.id.slice(3)}).get();if(0===x.length){for(o=0,a=g.length;o<a;o++)p.append(this.format(this.result_template,g[o]));n()}else{var w=[];for(o=0,a=l.length;o<a;o++)w.push(l[o].ref);var b=new Levenshtein(x,w),k=b.getSteps();s.call(this,v,l,k)}this.onComplete&&this.onComplete(g)}.bind(this),100)},clear:function(){e(this.results).empty()},format:function(e,t){return e.replace(/{{([^{}]*)}}/g,function(e,r){var i=t[r];return"string"==typeof i||"number"==typeof i?i:e})}}}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var n=function(e){if("string"!=typeof e)return 0;var n=e.match(/\d/g);return n?Math.min.apply(null,n):1},t=function(n,t){for(;t--;)n=e("<ol/>").appendTo(n),t&&(n=e("<li/>").appendTo(n));return n},r=function(e,n){for(;n--;)e=e.parent();return e},o=function(e,n){return function(t,r,o){var i=t.text(),a=n+"-"+o;r.text(i);var c=t[0],f=r[0],u=e?a:c.id||a;u=encodeURIComponent(u),c.id=u,f.href="#"+u}},i=function(i){var a=i.selector,c=i.scope,f=e("<ol/>"),u=f,p=null,s=n(a),l=o(i.overwrite,i.prefix);return e(c).find(a).each(function(o,i){var a=n(i.tagName),c=a-s;c>0&&(u=t(p,c)),c<0&&(u=r(u,2*-c)),u.length||(u=f);var h=e("<li/>"),d=e("<a/>");l(e(i),d,o),h.append(d).appendTo(u),p=h,s=a}),f};e.fn.initTOC=function(n){var t={selector:"h1, h2, h3, h4, h5, h6",scope:"body",overwrite:!1,prefix:"toc"};n=e.extend(t,n);var r=n.selector;if("string"!=typeof r)throw new TypeError("selector must be a string");if(!r.match(/^(?:h[1-6],?\s*)+$/g))throw new TypeError("selector must contains only h1-6");e(this).append(i(n));var o=location.hash;return o&&setTimeout(function(){var e=document.getElementById(o.slice(1));e&&e.scrollIntoView()},0),e(this)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJqcXVlcnkuZ2hvc3RodW50ZXIuanMiLCJqcXVlcnkudG9jLmpzIl0sIm5hbWVzIjpbImxvYWRKUyIsInVybCIsImNhbGxiYWNrIiwiZWwiLCJpc0lFIiwid2luZG93IiwiQWN0aXZlWE9iamVjdCIsImlzSUU2IiwiWE1MSHR0cFJlcXVlc3QiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0eXBlIiwiYXN5bmMiLCJyZWFkeVN0YXRlIiwib25yZWFkeXN0YXRlY2hhbmdlIiwib25sb2FkIiwic3JjIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJpc0RlYnVnIiwiJCIsImZuIiwiZXh0ZW5kIiwiaXNPblNjcmVlblZpc2libGUiLCJoYXNDbGFzcyIsIndpbiIsInZpZXdwb3J0IiwidG9wIiwic2Nyb2xsVG9wIiwibGVmdCIsInNjcm9sbExlZnQiLCJyaWdodCIsIndpZHRoIiwiYm90dG9tIiwiaGVpZ2h0IiwiYm91bmRzIiwidGhpcyIsIm9mZnNldCIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsIkdlbmVyYWwiLCJpc01vYmlsZSIsImlzV2VjaGF0Iiwidmlld1dpZHRoIiwiYWJzVXJsIiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3QiLCJpbml0IiwiVUEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImlzQW5kcm9pZCIsImFwcFZlcnNpb24iLCJtYXRjaCIsImFkZENsYXNzIiwidXBkYXRlSW1hZ2VXaWR0aCIsInJld2FyZExvYWRlciIsIndlYkZvbnRMb2FkZXIiLCJzY3JvbGxUb1BvcyIsIiR0aGlzIiwiY29udGVudFdpZHRoIiwiJHBvc3RDb250ZW50IiwiaW1hZ2VXaWR0aCIsIm5hdHVyYWxXaWR0aCIsInJlbW92ZUNsYXNzIiwiY2FzcGVyRnVsbEltZyIsIiRpbWciLCJlYWNoIiwib24iLCJXZWJGb250Q29uZmlnIiwibG9hZGluZyIsImN1c3RvbSIsImZhbWlsaWVzIiwidXJscyIsIldlYkZvbnQiLCJsb2FkIiwicG9zaXRpb24iLCJTVFJfVE9fVE9QIiwiYnV0dG9uIiwiYXBwZW5kVG8iLCJzY3JvbGwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwiaGFzaCIsInVybEljb25saXplIiwiZG9tYWluIiwiX291dHB1dCIsImljb25NYXAiLCJ0d2l0dGVyIiwicXpvbmUiLCJ3ZWlibyIsImZhY2Vib29rIiwiZ2l0aHViIiwiZG91YmFuIiwiZ29vZ2xlIiwibHVvbGVpIiwiZHJpYmJsZSIsInYyZXgiLCJ6aGlodSIsIndpa2lwZWRpYSIsImppYW5zaHUiLCJ5b3VrdSIsInlvdXR1YmUiLCJqdWVqaW4iLCJ3ZWl4aW4iLCJzZWdtZW50ZmF1bHQiLCJuYW1lIiwiTWFwS2V5IiwiaW5kZXhPZiIsImFkZEljb25zIiwiaSIsIl9zcmMiLCJhdHRyIiwidG1wIiwiaHJlZiIsIl9zZWxmRG9tYWluIiwiaG9zdG5hbWUiLCJwcmVwZW5kIiwiX3NlbGZDb2xvciIsImZpbmQiLCJjc3MiLCJfb3JpZ2luYWxDb2xvciIsImhvdmVyIiwibG9hZFFSIiwiYWxpcGF5Iiwid2VjaGF0IiwiaHRtbCIsIkltYWdlU21hcnRMb2FkZXIiLCJpc1dlYlBTdXBwb3J0ZWQiLCJpc0ltYWdlQ29tcHJlc3NlZCIsIndlYlBDaGVjayIsImlzQ29tcHJlc3NlZENoZWNrIiwiZmVhdHVyZSIsIlRlc3RJbWFnZXMiLCJkZW1vIiwiaW1nIiwiSW1hZ2UiLCJ3ZWJQTG9hZGVyIiwib25lcnJvciIsImltZ0xvYWRlciIsImxhenlsb2FkIiwiYWR2YW5jZWRfbG9hZCIsImRhdGFfYXR0cmlidXRlIiwid2ViUF9sb2FkIiwiaXNfc2NhbGUiLCJzY2FsZV93aWR0aCIsInJlYWR5IiwiJHdpbmRvdyIsInNjcm9sbEhpbnQiLCIkY292ZXIiLCJjbG9zZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhZ2VZT2Zmc2V0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwiaW5pdFRPQyIsInNlbGVjdG9yIiwic2NvcGUiLCJvdmVyd3JpdGUiLCJwcmVmaXgiLCJtYXJfbGVmdCIsIm1hcmdpbi1sZWZ0Iiwic2VhcmNoRmllbGQiLCJjbGVhciIsInNldFRpbWVvdXQiLCJmb2N1cyIsImRpc3F1c19zaG9ydG5hbWUiLCJkaXNxdXNfbG9hZGVkIiwiX3RoaXMiLCJzbGlkZVRvZ2dsZSIsImFqYXgiLCJkYXRhVHlwZSIsImNhY2hlIiwib3B0aW9ucyIsInVwZGF0ZSIsImNvdW50ZXIiLCJlbGVtZW50cyIsInNldHRpbmdzIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiJGNvbnRhaW5lciIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiYXBwZWFyIiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJvbmUiLCJlbGVtZW50c19sZWZ0IiwibGVuZ3RoIiwiY2FsbCIsInVwZGF0ZWRVcmwiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImhpZGUiLCJ0ZW1wIiwiZ3JlcCIsImVsZW1lbnQiLCJ0ZXN0Iiwib3JpZ2luYWxFdmVudCIsInBlcnNpc3RlZCIsImZvbGQiLCJpbm5lckhlaWdodCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhIiwiYWJvdmUtdGhlLXRvcCIsInJpZ2h0LW9mLXNjcmVlbiIsImxlZnQtb2Ytc2NyZWVuIiwiaW4tdmlld3BvcnQiLCJhYm92ZS10aGUtZm9sZCIsInJpZ2h0LW9mLWZvbGQiLCJsZWZ0LW9mLWZvbGQiLCJsdW5yIiwiY29uZmlnIiwiYnVpbGRlciIsIkJ1aWxkZXIiLCJwaXBlbGluZSIsInRyaW1tZXIiLCJzdG9wV29yZEZpbHRlciIsInN0ZW1tZXIiLCJzZWFyY2hQaXBlbGluZSIsImJ1aWxkIiwidmVyc2lvbiIsInV0aWxzIiwid2FybiIsImdsb2JhbCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiYXNTdHJpbmciLCJvYmoiLCJ0b1N0cmluZyIsIkZpZWxkUmVmIiwiZG9jUmVmIiwiZmllbGROYW1lIiwic3RyaW5nVmFsdWUiLCJfc3RyaW5nVmFsdWUiLCJqb2luZXIiLCJmcm9tU3RyaW5nIiwicyIsIm4iLCJmaWVsZFJlZiIsInNsaWNlIiwicHJvdG90eXBlIiwiaWRmIiwicG9zdGluZyIsImRvY3VtZW50Q291bnQiLCJkb2N1bWVudHNXaXRoVGVybSIsIk9iamVjdCIsImtleXMiLCJ4IiwiTWF0aCIsImxvZyIsImFicyIsIlRva2VuIiwic3RyIiwibWV0YWRhdGEiLCJjbG9uZSIsInRva2VuaXplciIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsInQiLCJ0cmltIiwibGVuIiwidG9rZW5zIiwic2xpY2VFbmQiLCJzbGljZVN0YXJ0IiwiY2hhciIsImNoYXJBdCIsInNsaWNlTGVuZ3RoIiwic2VwYXJhdG9yIiwicHVzaCIsImluZGV4IiwiUGlwZWxpbmUiLCJfc3RhY2siLCJyZWdpc3RlcmVkRnVuY3Rpb25zIiwiY3JlYXRlIiwicmVnaXN0ZXJGdW5jdGlvbiIsImxhYmVsIiwid2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkIiwiaXNSZWdpc3RlcmVkIiwic2VyaWFsaXNlZCIsImZvckVhY2giLCJmbk5hbWUiLCJFcnJvciIsImZucyIsImFyZ3VtZW50cyIsImFmdGVyIiwiZXhpc3RpbmdGbiIsIm5ld0ZuIiwicG9zIiwic3BsaWNlIiwiYmVmb3JlIiwicnVuIiwic3RhY2tMZW5ndGgiLCJyIiwibWVtbyIsInRva2VuIiwiaiIsInJlc3VsdCIsImNvbmNhdCIsInJlZHVjZSIsInJ1blN0cmluZyIsInJlc2V0IiwidG9KU09OIiwiVmVjdG9yIiwiX21hZ25pdHVkZSIsInBvc2l0aW9uRm9ySW5kZXgiLCJzdGFydCIsImVuZCIsInBpdm90UG9pbnQiLCJmbG9vciIsInBpdm90SW5kZXgiLCJpbnNlcnQiLCJpbnNlcnRJZHgiLCJ2YWwiLCJ1cHNlcnQiLCJtYWduaXR1ZGUiLCJzdW1PZlNxdWFyZXMiLCJlbGVtZW50c0xlbmd0aCIsInNxcnQiLCJkb3QiLCJvdGhlclZlY3RvciIsImRvdFByb2R1Y3QiLCJiIiwiYUxlbiIsImJMZW4iLCJhVmFsIiwiYlZhbCIsInNpbWlsYXJpdHkiLCJ0b0FycmF5Iiwib3V0cHV0Iiwic3RlcDJsaXN0IiwiYXRpb25hbCIsInRpb25hbCIsImVuY2kiLCJhbmNpIiwiaXplciIsImJsaSIsImFsbGkiLCJlbnRsaSIsImVsaSIsIm91c2xpIiwiaXphdGlvbiIsImF0aW9uIiwiYXRvciIsImFsaXNtIiwiaXZlbmVzcyIsImZ1bG5lc3MiLCJvdXNuZXNzIiwiYWxpdGkiLCJpdml0aSIsImJpbGl0aSIsImxvZ2kiLCJzdGVwM2xpc3QiLCJpY2F0ZSIsImF0aXZlIiwiYWxpemUiLCJpY2l0aSIsImljYWwiLCJmdWwiLCJuZXNzIiwiYyIsInYiLCJDIiwiViIsIm1ncjAiLCJtZXExIiwibWdyMSIsInNfdiIsInJlX21ncjAiLCJSZWdFeHAiLCJyZV9tZ3IxIiwicmVfbWVxMSIsInJlX3NfdiIsInJlXzFhIiwicmUyXzFhIiwicmVfMWIiLCJyZTJfMWIiLCJyZV8xYl8yIiwicmUyXzFiXzIiLCJyZTNfMWJfMiIsInJlNF8xYl8yIiwicmVfMWMiLCJyZV8yIiwicmVfMyIsInJlXzQiLCJyZTJfNCIsInJlXzUiLCJyZV81XzEiLCJyZTNfNSIsInBvcnRlclN0ZW1tZXIiLCJ3Iiwic3RlbSIsInN1ZmZpeCIsImZpcnN0Y2giLCJyZSIsInJlMiIsInJlMyIsInJlNCIsInN1YnN0ciIsInRvVXBwZXJDYXNlIiwicmVwbGFjZSIsImZwIiwiZXhlYyIsImdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIiLCJzdG9wV29yZHMiLCJ3b3JkcyIsInN0b3BXb3JkIiwiVG9rZW5TZXQiLCJlZGdlcyIsImlkIiwiX25leHRJZCIsImZyb21BcnJheSIsImFyciIsImZpbmlzaCIsInJvb3QiLCJmcm9tQ2xhdXNlIiwiY2xhdXNlIiwiZnJvbUZ1enp5U3RyaW5nIiwidGVybSIsImVkaXREaXN0YW5jZSIsInN0YWNrIiwibm9kZSIsImVkaXRzUmVtYWluaW5nIiwiZnJhbWUiLCJwb3AiLCJub0VkaXROb2RlIiwiZGVsZXRpb25Ob2RlIiwic3Vic3RpdHV0aW9uTm9kZSIsImluc2VydGlvbk5vZGUiLCJ0cmFuc3Bvc2VOb2RlIiwiY2hhckEiLCJjaGFyQiIsIndpbGRjYXJkRm91bmQiLCJmaW5hbCIsIm5leHQiLCJlZGdlIiwiX3N0ciIsImxhYmVscyIsInNvcnQiLCJpbnRlcnNlY3QiLCJxTm9kZSIsInFFZGdlcyIsInFMZW4iLCJuRWRnZXMiLCJuTGVuIiwicSIsInFFZGdlIiwibkVkZ2UiLCJwcmV2aW91c1dvcmQiLCJ1bmNoZWNrZWROb2RlcyIsIm1pbmltaXplZE5vZGVzIiwid29yZCIsImNvbW1vblByZWZpeCIsIm1pbmltaXplIiwiY2hpbGQiLCJuZXh0Tm9kZSIsInBhcmVudCIsImRvd25UbyIsImNoaWxkS2V5IiwiSW5kZXgiLCJhdHRycyIsImludmVydGVkSW5kZXgiLCJmaWVsZFZlY3RvcnMiLCJ0b2tlblNldCIsImZpZWxkcyIsInNlYXJjaCIsInF1ZXJ5U3RyaW5nIiwicXVlcnkiLCJwYXJzZXIiLCJRdWVyeVBhcnNlciIsInBhcnNlIiwiUXVlcnkiLCJtYXRjaGluZ0ZpZWxkcyIsInF1ZXJ5VmVjdG9ycyIsInRlcm1GaWVsZENhY2hlIiwiY2xhdXNlcyIsInRlcm1zIiwidXNlUGlwZWxpbmUiLCJtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRlcm1JbmRleCIsInRlcm1Ub2tlblNldCIsImV4cGFuZGVkVGVybXMiLCJleHBhbmRlZFRlcm0iLCJfaW5kZXgiLCJrIiwiZmllbGQiLCJmaWVsZFBvc3RpbmciLCJtYXRjaGluZ0RvY3VtZW50UmVmcyIsInRlcm1GaWVsZCIsImJvb3N0IiwibCIsImZpZWxkTWF0Y2giLCJtYXRjaGluZ0RvY3VtZW50UmVmIiwibWF0Y2hpbmdGaWVsZFJlZiIsIk1hdGNoRGF0YSIsIm1hdGNoaW5nRmllbGRSZWZzIiwicmVzdWx0cyIsIm1hdGNoZXMiLCJkb2NNYXRjaCIsImZpZWxkVmVjdG9yIiwic2NvcmUiLCJtYXRjaERhdGEiLCJjb21iaW5lIiwicmVmIiwic2VyaWFsaXplZEluZGV4Iiwic2VyaWFsaXplZFZlY3RvcnMiLCJzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleCIsInRva2VuU2V0QnVpbGRlciIsInR1cGxlIiwiX3JlZiIsIl9maWVsZHMiLCJmaWVsZFRlcm1GcmVxdWVuY2llcyIsImZpZWxkTGVuZ3RocyIsIl9iIiwiX2sxIiwibWV0YWRhdGFXaGl0ZWxpc3QiLCJudW1iZXIiLCJrMSIsImRvYyIsImZpZWxkVGVybXMiLCJtZXRhZGF0YUtleSIsImNhbGN1bGF0ZUF2ZXJhZ2VGaWVsZExlbmd0aHMiLCJmaWVsZFJlZnMiLCJudW1iZXJPZkZpZWxkcyIsImFjY3VtdWxhdG9yIiwiZG9jdW1lbnRzV2l0aEZpZWxkIiwiYXZlcmFnZUZpZWxkTGVuZ3RoIiwiY3JlYXRlRmllbGRWZWN0b3JzIiwiZmllbGRSZWZzTGVuZ3RoIiwidGVybUlkZkNhY2hlIiwiZmllbGRMZW5ndGgiLCJ0ZXJtRnJlcXVlbmNpZXMiLCJ0ZXJtc0xlbmd0aCIsInNjb3JlV2l0aFByZWNpc2lvbiIsInRmIiwicm91bmQiLCJjcmVhdGVUb2tlblNldCIsInVzZSIsImFyZ3MiLCJ1bnNoaWZ0IiwiYXBwbHkiLCJjbG9uZWRNZXRhZGF0YSIsIm1ldGFkYXRhS2V5cyIsImtleSIsIm90aGVyTWF0Y2hEYXRhIiwiYWxsRmllbGRzIiwid2lsZGNhcmQiLCJOT05FIiwiTEVBRElORyIsIlRSQUlMSU5HIiwiUXVlcnlQYXJzZUVycm9yIiwiUXVlcnlMZXhlciIsImxleGVtZXMiLCJlc2NhcGVDaGFyUG9zaXRpb25zIiwic3RhdGUiLCJsZXhUZXh0Iiwic2xpY2VTdHJpbmciLCJzdWJTbGljZXMiLCJqb2luIiwiZW1pdCIsImVzY2FwZUNoYXJhY3RlciIsIkVPUyIsImlnbm9yZSIsImJhY2t1cCIsImFjY2VwdERpZ2l0UnVuIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwibW9yZSIsIkZJRUxEIiwiVEVSTSIsIkVESVRfRElTVEFOQ0UiLCJCT09TVCIsImxleEZpZWxkIiwibGV4ZXIiLCJsZXhUZXJtIiwibGV4RWRpdERpc3RhbmNlIiwibGV4Qm9vc3QiLCJsZXhFT1MiLCJ0ZXJtU2VwYXJhdG9yIiwiY3VycmVudENsYXVzZSIsImxleGVtZUlkeCIsInBhcnNlRmllbGRPclRlcm0iLCJwZWVrTGV4ZW1lIiwiY29uc3VtZUxleGVtZSIsImxleGVtZSIsIm5leHRDbGF1c2UiLCJjb21wbGV0ZWRDbGF1c2UiLCJwYXJzZUZpZWxkIiwicGFyc2VUZXJtIiwiZXJyb3JNZXNzYWdlIiwicG9zc2libGVGaWVsZHMiLCJmIiwibmV4dExleGVtZSIsInBhcnNlRWRpdERpc3RhbmNlIiwicGFyc2VCb29zdCIsInBhcnNlSW50IiwiaXNOYU4iLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIkxldmVuc2h0ZWluIiwiYXJyYXkiLCJnZXRDaGFyIiwiaWR4IiwiZ2V0QXJyYXlNZW1iZXIiLCJzdHJfbSIsInN0cl9uIiwicHJldmlvdXMiLCJjdXJyZW50IiwibWF0cml4IiwiZ2V0RWxlbSIsIl9tYXRyaXgiLCJkaXN0YW5jZSIsIm5fdmFsIiwibl9pZHgiLCJtX3ZhbCIsIm1faWR4IiwibWluIiwiaW5zcGVjdCIsIm5vX3ByaW50IiwibWF4IiwiYnVmZiIsInNlcCIsInJvd3MiLCJnZXRNYXRyaXgiLCJvIiwicm93IiwiY2VsbHMiLCJjZWxsIiwiZ2V0U3RlcHMiLCJzdGVwcyIsInkiLCJ1IiwiZCIsIk51bWJlciIsIk1BWF9WQUxVRSIsInZhbHVlT2YiLCJnaG9zdEh1bnRlciIsIm9wdHMiLCJkZWZhdWx0cyIsInBsdWdpbk1ldGhvZHMiLCJyZXN1bHRzRGF0YSIsIm9uUGFnZUxvYWQiLCJvbktleVVwIiwicmVzdWx0X3RlbXBsYXRlIiwiaW5mb190ZW1wbGF0ZSIsImRpc3BsYXlTZWFyY2hJbmZvIiwiemVyb1Jlc3VsdHNJbmZvIiwib25Db21wbGV0ZSIsImluY2x1ZGVwYWdlcyIsImZpbHRlcmZpZWxkcyIsInN1YnBhdGgiLCJpdGVtX3ByZXByb2Nlc3NvciIsImluZGV4aW5nX3N0YXJ0IiwiaW5kZXhpbmdfZW5kIiwicHJldHR5RGF0ZSIsImRhdGUiLCJEYXRlIiwibW9udGhOYW1lcyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0U3VicGF0aEtleSIsImxhc3RUaW1lb3V0SUQiLCJzZXR0bGVJRHMiLCJvbGRBdHRyIiwiZ2V0QXR0cmlidXRlIiwibmV3QXR0ciIsInNldEF0dHJpYnV0ZSIsInVwZGF0ZVNlYXJjaExpc3QiLCJsaXN0SXRlbXMiLCJhcGlEYXRhIiwiaWxlbiIsInN0ZXAiLCJlcSIsImx1bnJyZWYiLCJwb3N0RGF0YSIsImJsb2dEYXRhIiwiZm9ybWF0IiwicmVwbGFjZVdpdGgiLCJncmFiQW5kSW5kZXgiLCJsYXRlc3RQb3N0IiwicGFyYW1zIiwibGltaXQiLCJpbmNsdWRlIiwiZm9ybWF0cyIsImZpbHRlciIsIm1lIiwiZ2V0IiwiZ2hvc3QiLCJhcGkiLCJkb25lIiwiZGF0YSIsImlkeFNyYyIsInBvc3RzIiwiYXJyYXlJdGVtIiwiaXRlbURhdGUiLCJ1cGRhdGVkX2F0IiwiZ2V0VGltZSIsInJlY29yZGVkRGF0ZSIsInRhZ19hcnIiLCJ0YWdzIiwibWV0YV9kZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwicGFyc2VkRGF0YSIsIlN0cmluZyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjdXN0b21fZXhjZXJwdCIsInBsYWludGV4dCIsInB1YkRhdGUiLCJwdWJsaXNoZWRfYXQiLCJ0YWciLCJsb2NhbFVybCIsImxpbmsiLCJhc3NpZ24iLCJzdWJwYXRoS2V5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImlzSW5pdCIsInRhcmdldCIsInRoYXQiLCJtaWFtIiwibG9hZEFQSSIsInN1Ym1pdCIsImtleWRvd24iLCJ3aGljaCIsImtleXVwIiwiZ2V0SXRlbSIsInZhbHVlIiwiY2xlYXJUaW1lb3V0IiwidGhpbmdzRm91bmQiLCJ2YWx1ZVNwbGl0Iiwic3BsaXQiLCJzZWFyY2hSZXN1bHQiLCJqbGVuIiwib3RoZXJSZWZzIiwia2xlbiIsImVtcHR5IiwiYXBwZW5kIiwiYW1vdW50IiwiY2hpbGRyZW4iLCJjdXJyZW50UmVmcyIsIm5ld1JlZnMiLCJsZXZlbnNodGVpbiIsImpRdWVyeSIsImdldExldmVsIiwiaGVhZGVyIiwiZGVjcyIsImNyZWF0ZUxpc3QiLCIkd3JhcHBlciIsImNvdW50IiwianVtcEJhY2siLCIkY3VycmVudFdyYXBwZXIiLCJzZXRBdHRycyIsIiRzcmMiLCIkdGFyZ2V0IiwiY29udGVudCIsInRleHQiLCJwcmUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJidWlsZFRPQyIsIiRyZXQiLCIkbGFzdExpIiwicHJldkRlcHRoIiwiX3NldEF0dHJzIiwiZWxlbSIsImN1cnJlbnREZXB0aCIsInRhZ05hbWUiLCIkbGkiLCIkYSIsImRlZmF1bHRPcHRzIiwiVHlwZUVycm9yIiwiY3VycmVudEhhc2giLCJhbmNob3IiLCJzY3JvbGxJbnRvVmlldyJdLCJtYXBwaW5ncyI6IkFBeUJBLFFBQVNBLFFBQU9DLEVBQUtDLEVBQVVDLEdBQzNCLEdBQUlDLEtBQVNDLE9BQU9DLGNBQ2hCQyxFQUFRSCxJQUFTQyxPQUFPRyxlQUN4QkMsRUFBU0MsU0FBU0MsY0FBYyxVQUNoQ0MsRUFBT0wsRUFBUUcsU0FBU0csZ0JBQWtCSCxTQUFTSSxxQkFBcUIsUUFBUSxFQUNwRkwsR0FBT00sS0FBTyxrQkFDZE4sRUFBT08sT0FBUSxFQUNYUCxFQUFPUSxXQUNQUixFQUFPUyxtQkFBcUIsV0FDQyxVQUFyQlQsRUFBT1EsWUFBK0Ms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Y2VzQ29udGVudCI6WyJ2YXIgaXNEZWJ1ZyA9IGZhbHNlO1xuXG4kLmZuLmV4dGVuZCh7XG5cbiAgICBpc09uU2NyZWVuVmlzaWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2luID0gJCh3aW5kb3cpO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSB7XG4gICAgICAgICAgICB0b3A6IHdpbi5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgIGxlZnQ6IHdpbi5zY3JvbGxMZWZ0KClcbiAgICAgICAgfTtcbiAgICAgICAgdmlld3BvcnQucmlnaHQgPSB2aWV3cG9ydC5sZWZ0ICsgd2luLndpZHRoKCk7XG4gICAgICAgIHZpZXdwb3J0LmJvdHRvbSA9IHZpZXdwb3J0LnRvcCArIHdpbi5oZWlnaHQoKTtcblxuICAgICAgICB2YXIgYm91bmRzID0gdGhpcy5vZmZzZXQoKTtcbiAgICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyB0aGlzLm91dGVyV2lkdGgoKTtcbiAgICAgICAgYm91bmRzLmJvdHRvbSA9IGJvdW5kcy50b3AgKyB0aGlzLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgcmV0dXJuICghKHZpZXdwb3J0LnJpZ2h0IDwgYm91bmRzLmxlZnQgfHwgdmlld3BvcnQubGVmdCA+IGJvdW5kcy5yaWdodCB8fCB2aWV3cG9ydC5ib3R0b20gPCBib3VuZHMudG9wIHx8IHZpZXdwb3J0LnRvcCA+IGJvdW5kcy5ib3R0b20pKTtcbiAgICB9LFxuXG59KTtcblxuZnVuY3Rpb24gbG9hZEpTKHVybCwgY2FsbGJhY2ssIGVsKSB7XG4gICAgdmFyIGlzSUUgPSAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0LFxuICAgICAgICBpc0lFNiA9IGlzSUUgJiYgIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCxcbiAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxcbiAgICAgICAgaGVhZCA9IGlzSUU2ID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuICAgIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSkge1xuICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJsb2FkZWRcIiB8fCBzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBpZiAoZWwpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBZYXN1a28g6YWN572u5paH5Lu2XG4gKiDlpJror7Tor4TorrrosIPnlKjnrYlcbiAqL1xuXG52YXIgR2VuZXJhbCA9IHtcbiAgICBpc01vYmlsZTogZmFsc2UsXG4gICAgaXNXZWNoYXQ6IGZhbHNlLFxuICAgIHZpZXdXaWR0aDogJCh3aW5kb3cpLndpZHRoKCksXG4gICAgYWJzVXJsOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd2luID0gd2luZG93O1xuICAgICAgICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICAgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBpc0FuZHJvaWQgPSB3aW4ubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL2FuZHJvaWQvZ2kpO1xuICAgICAgICB2YXIgaXNJUGhvbmUgPSB3aW4ubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL2lwaG9uZS9naSk7XG4gICAgICAgIGlmIChVQS5tYXRjaCgvTWljcm9NZXNzZW5nZXIvaSkgPT0gXCJtaWNyb21lc3NlbmdlclwiKSB7XG4gICAgICAgICAgICBHZW5lcmFsLmlzV2VjaGF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnd2VjaGF0LXdlYnZpZXcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFpc0FuZHJvaWQpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgR2VuZXJhbC51cGRhdGVJbWFnZVdpZHRoKCk7XG4gICAgICAgICAgICBHZW5lcmFsLnJld2FyZExvYWRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgR2VuZXJhbC53ZWJGb250TG9hZGVyKCk7XG4gICAgICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcbiAgICB9LFxuICAgIHVwZGF0ZUltYWdlV2lkdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHBvc3RDb250ZW50ID0gJChcIi5wb3N0LWNvbnRlbnRcIik7XG4gICAgICAgIC8vICRwb3N0Q29udGVudC5maXRWaWRzKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW1hZ2VXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgY29udGVudFdpZHRoID0gJHBvc3RDb250ZW50Lm91dGVyV2lkdGgoKSwgLy8gV2lkdGggb2YgdGhlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICBpbWFnZVdpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGg7IC8vIE9yaWdpbmFsIGltYWdlIHJlc29sdXRpb25cblxuICAgICAgICAgICAgaWYgKGltYWdlV2lkdGggPj0gY29udGVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdmdWxsLWltZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNpbmdsZS1wb3N0LWlubmVyIGltZ1wiKS5vbignbG9hZCcsIHVwZGF0ZUltYWdlV2lkdGgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNhc3BlckZ1bGxJbWcoKSB7XG4gICAgICAgICAgICAkaW1nLmVhY2godXBkYXRlSW1hZ2VXaWR0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYXNwZXJGdWxsSW1nKCk7XG4gICAgfSxcblxuICAgIC8vIEdlbmVyYWwuYWJzVXJsICsgJy9hc3NldHMvY3NzL2ZvbnQubWluLmNzcycgLy8g6L+Z5Liq5pivIEV4byDlrZfkvZPvvIzogIPomZHkuI3liqDovb3lroMs5o+Q6auY5pe26Ze0XG4gICAgd2ViRm9udExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIFdlYkZvbnRDb25maWcgPSB7XG4gICAgICAgICAgICBsb2FkaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBmb250Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICAgICAgICBmYW1pbGllczogWydPcGVuIFNhbnMnLCAnaWNvbmZvbnQnLCAnZm9udGF3ZXNvbWUnXSxcbiAgICAgICAgICAgICAgICB1cmxzOiBbR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC5taW4uY3NzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vb2I2bWNpMzBnLnFuc3NsLmNvbS9mb250c3MvaWNvbmZvbnQuY3NzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC1hd2Vzb21lLm1pbi5jc3MnXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkSlMoR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9qcy93ZWJmb250LmpzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L295a2X5L2TSlMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICAgICAgICAgICAgY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ09wZW4gU2FucycsICdpY29uZm9udCcsICdmb250YXdlc29tZSddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvL+W5s+a7kea7muWKqOWIsOmhtumDqFxuICAgIHNjcm9sbFRvUG9zOiBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICB2YXIgU1RSX1RPX1RPUCA9ICfmiJHopoHpo57liLDmnIDpq5gnLFxuICAgICAgICAgICAgY292ZXJIZWlnaHQgPSBwb3NpdGlvbiB8fCAkKHdpbmRvdykuaGVpZ2h0KCk7IC8v6I635b6X5Zu+54mH6auY5bqmXG4gICAgICAgIHZhciBidXR0b24gPSAkKCc8YSBocmVmPVwiI1wiIGlkPVwidG8tdG9wXCIgdGl0bGU9XCInICsgU1RSX1RPX1RPUCArICdcIj4gPGRpdiBjbGFzcz1cInRvLXRvcC13cmFwXCI+PC9kaXY+PC9hPicpLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gJCh3aW5kb3cpLmhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZmFkZU91dCg1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXG4gICAgICAgICAgICB9LCA2NjYsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oiR6LezJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLyrnu5nmlofnq6DkuK3nmoR1cmzmt7vliqBpY29uZm9udOaWueS+v+ivhuWIqyovXG4gICAgdXJsSWNvbmxpemU6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZG9tYWluLFxuICAgICAgICAgICAgX291dHB1dDtcbiAgICAgICAgdmFyIGljb25Gb250VGFnID0gJ2ljb25mb250JztcbiAgICAgICAgdmFyIGljb25NYXAgPSB7IC8q57Si5byVIOWPr+WcqOi/memHjOa3u+WKoOWMuemFjeinhOWImSovXG4gICAgICAgICAgICAndHdpdHRlcic6ICdpY29uZm9udC10d2l0dGVyIGljb24taWNvbmZvbnR0d2l0dGVyJyxcbiAgICAgICAgICAgICdxem9uZSc6ICdpY29uZm9udC1xem9uZSBpY29uLXF6b25lJyxcbiAgICAgICAgICAgICd3ZWlibyc6ICdpY29uZm9udC13ZWlibyBpY29uLWljb25mb250d2VpYm8nLFxuICAgICAgICAgICAgJ2ZhY2Vib29rJzogJ2ljb25mb250LWZhY2Vib29rIGljb24taWNvbmZvbnRmYWNlYm9vaycsXG4gICAgICAgICAgICAnZ2l0aHViJzogJ2ljb25mb250LWdpdGh1YiBpY29uLWdpdGh1YicsXG4gICAgICAgICAgICAnZG91YmFuJzogJ2ljb25mb250LWRvdWJhbiBpY29uLWljb25mb250ZG91YmFuJyxcbiAgICAgICAgICAgICdnb29nbGUnOiAnaWNvbmZvbnQtZ29vZ2xlIGljb24taWNvbmZvbnRnb29nbGUnLFxuICAgICAgICAgICAgJ2x1b2xlaSc6ICdpY29uZm9udC1sdW9sZWkgaWNvbi1sdW9sZWknLFxuICAgICAgICAgICAgJ2RyaWJibGUnOiAnaWNvbmZvbnQtZHJpYmJsZSBpY29uLWRyaWJiYmxlY2lyY2xlZCcsXG4gICAgICAgICAgICAndjJleCc6ICdpY29uZm9udC12MmV4IGljb24taWNvbmZvbnR2MmV4JyxcbiAgICAgICAgICAgICd6aGlodSc6ICdpY29uZm9udC16aGlodSBpY29uLWljb25mb250emhpaHUnLFxuICAgICAgICAgICAgJ3dpa2lwZWRpYSc6ICdpY29uZm9udC13aWtpcGVkaWEgaWNvbi1pY29uZm9udHdpa2lwZWRpYScsXG4gICAgICAgICAgICAnamlhbnNodSc6ICdpY29uZm9udC1qaWFuc2h1IGljb24tamlhbnNodScsXG4gICAgICAgICAgICAneW91a3UnOiAnaWNvbmZvbnQteW91a3UgaWNvbi1pY29uZm9udHlvdWt1JyxcbiAgICAgICAgICAgICd5b3V0dWJlJzogJ2ljb25mb250LXlvdXR1YmUgaWNvbi15b3V0dWJlJyxcbiAgICAgICAgICAgICdqdWVqaW4nOidpY29uZm9udC1qdWVqaW4gaWNvbi1qdWVqaW4nLFxuICAgICAgICAgICAgJ3dlaXhpbic6J2ljb25mb250LXdlaXhpbiBpY29uLWljb25mb250d2VjaGF0JyxcbiAgICAgICAgICAgICdzZWdtZW50ZmF1bHQnOidpY29uZm9udC1zZiBpY29uLWljb25zZi1jb3B5J1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gaWNvbk1hcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uTWFwW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1hcEtleSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKE1hcEtleSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4gPSBNYXBLZXk7XG4gICAgICAgICAgICAgICAgICAgIF9vdXRwdXQgPSBpY29uTWFwW01hcEtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vdXRwdXQ7XG4gICAgfSxcbiAgICBhZGRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8q57uZ5Y2a5a6i5paH56ug5Zyw5Z2AdXJs5re75YqgaWNv6K+G5YirKi9cbiAgICAgICAgJCgnLnNpbmdsZS1wb3N0LWlubmVyICBhOm5vdCg6aGFzKGltZykpJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICB2YXIgX3NyYyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHRtcC5ocmVmID0gX3NyYztcbiAgICAgICAgICAgIF9zZWxmRG9tYWluID0gdG1wLmhvc3RuYW1lO1xuICAgICAgICAgICAgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKHRoaXMpLnByZXBlbmQoJzxpIGNsYXNzPVwiaWNvbmZvbnQgJyArIEdlbmVyYWwudXJsSWNvbmxpemUoX3NlbGZEb21haW4pICsgJ1wiPjwvaT4nKTtcbiAgICAgICAgICAgIHZhciBfc2VsZkNvbG9yID0gJCh0aGlzKS5maW5kKCdpJykuY3NzKCdjb2xvcicpLFxuICAgICAgICAgICAgICAgIF9vcmlnaW5hbENvbG9yID0gJCh0aGlzKS5jc3MoJ2NvbG9yJyk7XG5cbiAgICAgICAgICAgIC8q6byg5qCH5oKs5rWu5pe2Ki9cbiAgICAgICAgICAgICQodGhpcykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX3NlbGZDb2xvcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9vcmlnaW5hbENvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvL+aJk+i1j1xuICAgIHJld2FyZExvYWRlcjogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIGxvYWRRUiA9IHtcbiAgICAgICAgICAgIGFsaXBheTogJy9hc3NldHMvaW1hZ2VzL3FyLWFsaXBheS0yNTUucG5nJyxcbiAgICAgICAgICAgIHdlY2hhdDogJy9hc3NldHMvaW1hZ2VzL3FyLXdlY2hhdC0yNTUucG5nJ1xuICAgICAgICB9O1xuICAgICAgICB2YXIgbG9hZFFSVXJsO1xuICAgICAgICBpZiAoISFHZW5lcmFsLmlzV2VjaGF0KSB7XG4gICAgICAgICAgICAkKCcud2VjaGF0LWNvZGUgYicpLmh0bWwoJ+mVv+aMieS4iuaWueS6jOe7tOeggeaJk+i1j+S9nOiAhScpO1xuICAgICAgICAgICAgLy8gJCgnLnFyLWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aCrOa1ricpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgODAwKTtcblxuICAgICAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgICBpc1dlYlBTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIGlzSW1hZ2VDb21wcmVzc2VkOiBmYWxzZSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgICB9LFxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcblxuICAgIH0sXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgVGVzdEltYWdlcyA9IHtcbiAgICAgICAgICAgIGRlbW86IFwiVWtsR1Jrb0FBQUJYUlVKUVZsQTRXQW9BQUFBUUFBQUFBQUFBQUFBQVFVeFFTQXNBQUFBQkJ4QVJFWWlJL2djQUFBQldVRGdnR0FBQUFEQUJBSjBCS2dFQUFRQUJBQndscEFBRGNBRCsvZ2JRQUE9PVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnDlk6YnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAoaW1nLndpZHRoID4gMCkgJiYgKGltZy5oZWlnaHQgPiAwKTtcbiAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhbGVydCgn5pSv5oyBJylcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4jeaUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxcIiArIFRlc3RJbWFnZXMuZGVtbztcblxuICAgIH0sXG4gICAgaW1nTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L296buY6K6k5Zu+54mHJyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHdlYlBMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDovb13ZWJQJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxlcnQoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQpO1xuICAgICAgICBpZiAoSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChpc0RlYnVnKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflrr3luqbmmK8nICsgR2VuZXJhbC52aWV3V2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDE1MDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmma7pgJrmlK/mjIEnKVxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxufTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAvLyBTY3JvbGwgdG8gY29udGVudFxuXHRcdC8vICQoJy5zY3JvbGwtZG93bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHQvLyBcdHZhciAkY292ZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jb3ZlcicpO1xuXHRcdC8vIFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdC8vIFx0XHRzY3JvbGxUb3A6ICRjb3Zlci5wb3NpdGlvbigpLnRvcCArICRjb3Zlci5oZWlnaHQoKVxuXHRcdC8vIFx0fSwgODAwICk7XG5cdFx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gfSk7XG5cbiAgICAvLyBhZGp1c3RDb3ZlcigpO1xuICAgIC8vIHZhciBsYXp5UmVzaXplID0gZGVib3VuY2UoYWRqdXN0Q292ZXIsIDIwMCwgZmFsc2UpO1xuICAgIC8vICQod2luZG93KS5yZXNpemUobGF6eVJlc2l6ZSk7XG5cbiAgICAvLyBTY3JvbGwgdG8gY29udGVudFxuICAgIHZhciBzY3JvbGxIaW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njcm9sbC1oaW50Jyk7XG4gICAgaWYgKHNjcm9sbEhpbnQgIT09IG51bGwpIHtcbiAgICAgIC8vICAgc2Nyb2xsSGludC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gICAgIGlmICghc2Nyb2xsSGludC5jbGFzc0xpc3QuY29udGFpbnMoJ3Zpc2libGUnKSlcbiAgICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgICAgLy8gICAgICAgd2luZG93LnNjcm9sbEJ5KHtcbiAgICAgIC8vICAgICAgICAgdG9wOiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAvLyAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAvLyAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgLy8gICAgIH0pO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIC8vIFNjcm9sbCB0byBjb250ZW50XG5cdFx0JCgnLmhlYWRlci1zY3JvbGwtaGludCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdHZhciAkY292ZXIgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jb3ZlcicpO1xuXHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICRjb3Zlci5wb3NpdGlvbigpLnRvcCArICRjb3Zlci5oZWlnaHQoKVxuXHRcdFx0fSwgNDAwICk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cbiAgICAgIC8vICQoJy5jb3ZlciAuYXJyb3ctZG93bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeydzY3JvbGxUb3AnOiAkKCcuY292ZXInKS5oZWlnaHQoKX0sIDgwMCk7XG4gICAgICAvLyAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICBpZiAoc2Nyb2xsVG9wID4gMCkge1xuICAgICAgICAgICAgICBzY3JvbGxIaW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY3JvbGxIaW50LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICBpZiAoc2Nyb2xsVG9wID4gMCkge1xuICAgICAgICAgICAgICBzY3JvbGxIaW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzY3JvbGxIaW50LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGp1c3RDb3ZlcigpIHtcblx0XHQgICAgc2V0RWxlbWVudEhlaWdodCgnLnBvc3QtaGVhZGVyLmNvdmVyJyk7XG5cdCAgfVxuXG4gICAgLy/liJ3lp4vljJYgdG9jIOaPkuS7tlxuICAgICQoJyN0b2MnKS5pbml0VE9DKHtcbiAgICAgICAgc2VsZWN0b3I6IFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiLFxuICAgICAgICBzY29wZTogXCJhcnRpY2xlXCIsXG4gICAgICAgIG92ZXJ3cml0ZTogZmFsc2UsXG4gICAgICAgIHByZWZpeDogXCJ0b2NcIlxuICAgIH0pO1xuXG4gICAgLy/liqjmgIHorr7nva7moLflvI8s5L6L5aaCOua7muWKqOWIsOS4gOWumueoi+W6puS5i+WQjumakOiXj+ebruW9lVxuICAgIHZhciBtYXJfbGVmdCA9ICQoXCIucG9zdFwiKS53aWR0aCgpIC8gMiArIDIwO1xuICAgIC8vdmFyIHRvcCA9ICQoXCIjdG9jXCIpLmNzcyhcInRvcFwiKTsgIOi/meWPquiDveiOt+WPluexu+S8vDE1MnB455qE5a2X56ym5LiyLOS4i+mdouaJjeiDveiOt+WPluWAvFxuICAgIC8vdmFyIHRvcCA9ICQoXCIjdG9jXCIpLnBvc2l0aW9uKCkudG9wO1xuICAgIC8vIHZhciB0b3AgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgLy8gJChcIiN0b2NcIikuY3NzKFwidG9wXCIsdG9wIC8gMi0gKHRvcCAvIDQpK1wicHhcIik7XG4gICAgLy8gJChcIiN0b2Mgb2xcIikuaHRtbChmdW5jdGlvbihpLG9yaWdUZXh0KXtcbiAgICAvLyAgICAgcmV0dXJuIG9yaWdUZXh0ICsgXCI8bGk+PGEgaWQ9J3Njcm9sbFRvcCcgaHJlZj0nIyc+6L+U5Zue6aG26YOoPC9hPjwvbGk+XCI7XG4gICAgLy8gfSk7XG4gICAgJChcIiN0b2NcIikuY3NzKHtcIm1hcmdpbi1sZWZ0XCI6bWFyX2xlZnQrXCJweFwifSk7XG4gICAgLy8gJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xuICAgIC8vICAgICB2YXIgd2luZG93X29mZnNldCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAvLyAgICAgdmFyIG1haW5faGVhZGVyX2hlaWdodCA9ICQoXCIubWFpbi1oZWFkZXJcIikuaGVpZ2h0KCk7XG4gICAgLy8gICAgIHZhciBjb250ZW50X2hlaWdodCA9ICQoXCIuY29udGVudFwiKS5oZWlnaHQoKTtcbiAgICAvLyAgICAgaWYod2luZG93X29mZnNldCA8IG1haW5faGVhZGVyX2hlaWdodCAtIDEwMCkge1xuICAgIC8vICAgICAgICAgJChcIiN0b2NcIikuaGlkZSgpO1xuICAgIC8vICAgICAgICAgLy/kuIvpnaLnmoTmnaHku7bkuI3og73nlKggYT54PmPov5nnp43lvaLlvI8s5Y+q6IO955SoJiYu6Lqr5Li65LiA5Liq5YmN56uv5bCP55m96KGo56S65Lyk5LiN6LW3Li4uXG4gICAgLy8gICAgIH1lbHNlIGlmKHdpbmRvd19vZmZzZXQgPiBtYWluX2hlYWRlcl9oZWlnaHQmJm1haW5faGVhZGVyX2hlaWdodCtjb250ZW50X2hlaWdodCAtIDUwMCA+IHdpbmRvd19vZmZzZXQpIHtcbiAgICAvLyAgICAgICAgICQoXCIjdG9jXCIpLnNob3coKTtcbiAgICAvLyAgICAgfWVsc2V7XG4gICAgLy8gICAgICAgICAkKFwiI3RvY1wiKS5oaWRlKCk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcblxuXHQgIC8vIFNldCB0aGUgbmV3IGhlaWdodCBvZiBhbiBlbGVtZW50XG5cdCAgZnVuY3Rpb24gc2V0RWxlbWVudEhlaWdodChlbGVtZW50KXtcblx0XHQgICAgdmFyIHdpbmRvd0hlaWdodCA9ICggdHJ1ZT09PWlzaVBvZCgpICYmIHRydWU9PT1pc1NhZmFyaSgpICkgPyB3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0IDogJCh3aW5kb3cpLmhlaWdodCgpO1xuXHRcdCAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSAkKCcuc2l0ZS1oZWFkZXInKS5vdXRlckhlaWdodCgpO1xuXHRcdCAgICAgICAgdmFyIG5ld0hlaWdodCA9IHdpbmRvd0hlaWdodDtcblx0XHQgICAgICAgICAgaWYgKCAkKGVsZW1lbnQpLmZpbmQoJy5zY3JvbGwtZG93bicpLmlzKCc6aGlkZGVuJykgKSB7XG5cdFx0XHQgICAgICAgICAgICAgJChlbGVtZW50KS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0ICAgICAgICAgICAgICAgICQoZWxlbWVudCkuZmluZCgnLmNvdmVyLWJnJykuY3NzKCd0b3AnLCcnKTtcblx0XHQgICAgICAgICAgfVxuXHRcdCAgICAgICAgICBlbHNlIHtcblx0XHRcdCAgICAgICAgICAgICAkKGVsZW1lbnQpLm91dGVySGVpZ2h0KG5ld0hlaWdodCk7XG5cdFx0XHQgICAgICAgICAgICAgICAgJChlbGVtZW50KS5maW5kKCcuY292ZXItYmcnKS5jc3MoJ3RvcCcsb2Zmc2V0SGVpZ2h0KTtcblx0XHQgICAgICAgICAgfVxuXHQgIH1cblxuXHQgIC8vIFRocm90dGxlcyBhbiBhY3Rpb24uXG5cdCAgLy8gVGFrZW4gZnJvbSBVbmRlcnNjb3JlLmpzLlxuXHQgIGZ1bmN0aW9uIGRlYm91bmNlIChmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcblx0XHQgICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHRcdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdCAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuXHRcdFx0ICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcblx0XHRcdCAgICAgICAgIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCk7XG5cdFx0XHQgICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICAgICAgICAgICAgdmFyIGxhc3QgPSAobmV3IERhdGUoKSkgLSB0aW1lc3RhbXA7XG5cdFx0XHRcdCAgICAgICAgICAgIGlmIChsYXN0IDwgd2FpdCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHRcdFx0XHQgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuXHRcdFx0XHRcdFx0ICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICB9XG5cdFx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgIH07XG5cdFx0XHQgICAgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0XHRcdCAgICAgICAgICAgIGlmICghdGltZW91dCkge1xuXHRcdFx0XHQgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgICAgICAgICAgaWYgKGNhbGxOb3cpIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHQgICAgcmV0dXJuIHJlc3VsdDtcblx0XHQgICAgICB9O1xuXHQgIH1cblxuXHQgIC8vIENoZWNrIGlmIGRldmljZSBpcyBhbiBpUGhvbmUgb3IgaVBvZFxuXHQgIGZ1bmN0aW9uIGlzaVBvZCgpe1xuXHRcdCAgICByZXR1cm4oLyhpUGhvbmV8aVBvZCkvZykudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICB9XG5cblx0ICAvLyBDaGVjayBpZiBicm93c2VyIGlzIFNhZmFyaVxuXHQgIGZ1bmN0aW9uIGlzU2FmYXJpKCl7XG5cdFx0ICAgIHJldHVybigtMSE9PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSk7XG5cdCAgfVxuXG5cdFx0Ly8gSGlkZGVuIHNlY3Rpb25zXG5cdFx0JCgnLnNpZGViYXItdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHQvLyAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ3NpZGViYXItb3BlbmVkJyk7IOWIh+aNouexu+WIq+WPr+S7peebtOaOpeeUqCB0b2dnbGVDbGFzc1xuICAgICAgaWYgKCAkKCdib2R5JykuaGFzQ2xhc3MoJ3NpZGViYXItb3BlbmVkJykgKSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc2lkZWJhci1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdzY3JvbGwnKTsgLy8g5oGi5aSNIGJvZHnvvIzlhYHorrjkuIvlsYLmu5Hliqhcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnc2lkZWJhci1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTsgLy8g6ZSB5a6aIGJvZHnvvIznpoHmraLkuIvlsYLmu5Hliqhcblx0XHRcdH1cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuXHRcdCQoJy5zZWFyY2gtdG9nZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRpZiAoICQoJ2JvZHknKS5oYXNDbGFzcygnc2VhcmNoLW9wZW5lZCcpICkge1xuXHRcdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NlYXJjaC1vcGVuZWQnKTtcbiAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCdzY3JvbGwnKTsgLy8g5oGi5aSNIGJvZHnvvIzlhYHorrjkuIvlsYLmu5Hliqhcblx0XHRcdFx0c2VhcmNoRmllbGQuY2xlYXIoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnc2VhcmNoLW9wZW5lZCcpO1xuICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsJ2hpZGRlbicpOyAvLyDplIHlrpogYm9kee+8jOemgeatouS4i+Wxgua7keWKqFxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoJyNzZWFyY2gtZmllbGQnKS5mb2N1cygpO1xuXHRcdFx0XHR9LCAzMDApO1xuXHRcdFx0fVxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdCQoJy5vdmVybGF5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3NpZGViYXItb3BlbmVkIHNlYXJjaC1vcGVuZWQnKTtcbiAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93Jywnc2Nyb2xsJyk7IC8vIOaBouWkjSBib2R577yM5YWB6K645LiL5bGC5ruR5YqoXG5cdFx0XHRzZWFyY2hGaWVsZC5jbGVhcigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXG4gICAgLy8gU2hvdyBjb21tZW50c1xuXHRcdGlmICggdHlwZW9mIGRpc3F1c19zaG9ydG5hbWUgIT09ICd1bmRlZmluZWQnICkge1xuXHRcdFx0dmFyIGRpc3F1c19sb2FkZWQgPSBmYWxzZTtcblx0XHRcdCQoJy5jb21tZW50cy10aXRsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgX3RoaXMgPSAkKHRoaXMpO1xuXHRcdFx0XHRpZiAoICEgZGlzcXVzX2xvYWRlZCApIHtcblx0XHRcdFx0XHQkLmFqYXgoe1xuXHRcdFx0XHRcdFx0dHlwZTogXCJHRVRcIixcblx0XHRcdFx0XHRcdHVybDogXCIvL1wiICsgZGlzcXVzX3Nob3J0bmFtZSArIFwiLmRpc3F1cy5jb20vZW1iZWQuanNcIixcblx0XHRcdFx0XHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdFx0XHRcdFx0Y2FjaGU6IHRydWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRfdGhpcy5hZGRDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdGRpc3F1c19sb2FkZWQgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoJyNkaXNxdXNfdGhyZWFkJykuc2xpZGVUb2dnbGUoKTtcblx0XHRcdFx0XHRpZiAoIF90aGlzLmhhc0NsYXNzKCd0b2dnbGVkLW9uJykgKSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5yZW1vdmVDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5hZGRDbGFzcygndG9nZ2xlZC1vbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG4gICAgJC5mbi5sYXp5bG9hZCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcztcbiAgICAgICAgdmFyICRjb250YWluZXI7XG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgICAgIGZhaWx1cmVfbGltaXQ6IDAsXG4gICAgICAgICAgICBldmVudDogXCJzY3JvbGxcIixcbiAgICAgICAgICAgIGVmZmVjdDogXCJzaG93XCIsXG4gICAgICAgICAgICBjb250YWluZXI6IHdpbmRvdyxcbiAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiBcIm9yaWdpbmFsXCIsXG4gICAgICAgICAgICBza2lwX2ludmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBhcHBlYXI6IG51bGwsXG4gICAgICAgICAgICBsb2FkOiBudWxsLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiXCIsXG4gICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICBpc19zY2FsZTogZmFsc2UsXG4gICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2tpcF9pbnZpc2libGUgJiYgISR0aGlzLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJC5hYm92ZXRoZXRvcCh0aGlzLCBzZXR0aW5ncykgfHxcbiAgICAgICAgICAgICAgICAgICAgJC5sZWZ0b2ZiZWdpbih0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogTm90aGluZy4gKi9cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEkLmJlbG93dGhlZm9sZCh0aGlzLCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAgICAgICAgICAgISQucmlnaHRvZmZvbGQodGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIC8qIGlmIHdlIGZvdW5kIGFuIGltYWdlIHdlJ2xsIGxvYWQsIHJlc2V0IHRoZSBjb3VudGVyICovXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50ZXIgPiBzZXR0aW5ncy5mYWlsdXJlX2xpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8qIE1haW50YWluIEJDIGZvciBhIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZmFpbHVyZWxpbWl0KSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsdXJlX2xpbWl0ID0gb3B0aW9ucy5mYWlsdXJlbGltaXQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5lZmZlY3RzcGVlZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZWZmZWN0X3NwZWVkID0gb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogQ2FjaGUgY29udGFpbmVyIGFzIGpRdWVyeSBhcyBvYmplY3QuICovXG4gICAgICAgICRjb250YWluZXIgPSAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSA/ICR3aW5kb3cgOiAkKHNldHRpbmdzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgLyogRmlyZSBvbmUgc2Nyb2xsIGV2ZW50IHBlciBzY3JvbGwuIE5vdCBvbmUgc2Nyb2xsIGV2ZW50IHBlciBpbWFnZS4gKi9cbiAgICAgICAgaWYgKDAgPT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICRjb250YWluZXIuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+a7muWKqOS6hjExMScpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqgnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG5cbiAgICAgICAgICAgIHNlbGYubG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qIElmIG5vIHNyYyBhdHRyaWJ1dGUgZ2l2ZW4gdXNlIGRhdGE6dXJpLiAqL1xuICAgICAgICAgICAgaWYgKCRzZWxmLmF0dHIoXCJzcmNcIikgPT09IHVuZGVmaW5lZCB8fCAkc2VsZi5hdHRyKFwic3JjXCIpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHNldHRpbmdzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogV2hlbiBhcHBlYXIgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UuICovXG4gICAgICAgICAgICAkc2VsZi5vbmUoXCJhcHBlYXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmFwcGVhci5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcxLnNlbGYuYXR0ciA9ICcsJHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcImRhdGEtb3JpZ2luYWxcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVcmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgPSAkc2VsZi5hdHRyKFwic3JjXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5rWL6K+VID0gJywkc2VsZi5zdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCA9ICRzZWxmLnN0eWxlLmJhY2tncm91bmRJbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkVXJsID0gJyx1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflm77niYflnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ29iNm1jaTMwZy5xbnNzbC5jb20nKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ0RO5Zyw5Z2AJyArdXBkYXRlZFVybC5pbmRleE9mKCdmaWxlLmlzMjYuY29tJykpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFVybC5pbmRleE9mKCdvYjZtY2kzMGcucW5zc2wuY29tJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGVydCgxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYWR2YW5jZWRfbG9hZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnP2ltYWdlVmlldzInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5pc19zY2FsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnLzAvdy8nICsgc2V0dGluZ3Muc2NhbGVfd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLndlYlBfbG9hZCA9PT0gdHJ1ZSAmJiBzZXR0aW5ncy5pc19zY2FsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy8wL2Zvcm1hdC93ZWJwJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09PSB0cnVlICYmIHNldHRpbmdzLmlzX3NjYWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Lit6Ze05omT5Y2wdXBkYXRlZFVybCcsdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKuS4remXtOaJk+WNsCBpbWcuc3JjID0gJywkc2VsZi5hdHRyKFwic3JjXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnKioqKioqKioq5Lit6Ze05omT5Y2wIGltZyA9ICcsJChcIjxpbWcgLz5cIikpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJChcIjxpbWcgLz5cIikuYmluZChcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnKioqKioqKioqaW1nLnNyYyA9ICcsJHNlbGYuYXR0cihcInNyY1wiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIHVwZGF0ZWRVcmwgKyBcIicpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcqKioqKioqKipiYWNrZ3JvdW5kLWltYWdlID0gJywkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZltzZXR0aW5ncy5lZmZlY3RdKHNldHRpbmdzLmVmZmVjdF9zcGVlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgaW1hZ2UgZnJvbSBhcnJheSBzbyBpdCBpcyBub3QgbG9vcGVkIG5leHQgdGltZS4gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9ICQuZ3JlcChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQubG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJCh0ZW1wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXG4gICAgICAgICAgICAvKiBieSB0cmlnZ2VyaW5nIGFwcGVhci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBDaGVjayBpZiBzb21ldGhpbmcgYXBwZWFycyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLiAqL1xuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogV2l0aCBJT1M1IGZvcmNlIGxvYWRpbmcgaW1hZ2VzIHdoZW4gbmF2aWdhdGluZyB3aXRoIGJhY2sgYnV0dG9uLiAqL1xuICAgICAgICAvKiBOb24gb3B0aW1hbCB3b3JrYXJvdW5kLiAqL1xuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcbiAgICAgICAgICAgICR3aW5kb3cuYmluZChcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBGb3JjZSBpbml0aWFsIGNoZWNrIGlmIGltYWdlcyBzaG91bGQgYXBwZWFyLiAqL1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cbiAgICAvKiBVc2UgYXMgICQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHt0aHJlc2hvbGQgOiAxMDAsIGNvbnRhaW5lciA6IHdpbmRvd30pICovXG5cbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAkd2luZG93LmhlaWdodCgpKSArICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy53aWR0aCgpICsgJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS5oZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xuICAgIH07XG5cbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQubGVmdG9mYmVnaW4oZWxlbWVudCwgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAhJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmFib3ZldGhldG9wKGVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9O1xuXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xuICAgIC8qIFVzZSBhcyAkKFwiaW1nOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIG9yICovXG4gICAgLyogJChcImltZ1wiKS5maWx0ZXIoXCI6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgd2hpY2ggaXMgZmFzdGVyICovXG5cbiAgICAkLmV4dGVuZCgkLmV4cHJbXCI6XCJdLCB7XG4gICAgICAgIFwiYmVsb3ctdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImFib3ZlLXRoZS10b3BcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImluLXZpZXdwb3J0XCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmludmlld3BvcnQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgIFwiYWJvdmUtdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIEdlbmVyYWwuaW5pdCgpO1xuICAgIEltYWdlU21hcnRMb2FkZXIuaW5pdCgpO1xuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICBHZW5lcmFsLmFkZEljb25zKCk7XG4gICAgfVxuXG4gICAgLy8gU2l0ZSBzZWFyY2hcbiAgICAvLyB2YXIgc2VhcmNoRmllbGQgPSAkKCcjc2VhcmNoLWZpZWxkJykuZ2hvc3RIdW50ZXIoe1xuICAgIC8vICAgcmVzdWx0cyA6IFwiI3NlYXJjaC1yZXN1bHRzXCIsXG4gICAgLy8gICBvbktleVVwIDogdHJ1ZSxcbiAgICAvLyAgIG9uUGFnZUxvYWQgOiB0cnVlLFxuICAgIC8vICAgaW5jbHVkZXBhZ2VzIDogdHJ1ZSxcbiAgICAvLyAgIGluZm9fdGVtcGxhdGUgOiAnPGRpdiBjbGFzcz1cInJlc3VsdHMtaW5mb1wiPlBvc3RzIGZvdW5kOiB7e2Ftb3VudH19PC9kaXY+JyxcbiAgICAvLyAgIHJlc3VsdF90ZW1wbGF0ZSA6ICc8ZGl2IGNsYXNzPVwicmVzdWx0LWl0ZW1cIj48YSBocmVmPVwie3tsaW5rfX1cIj48ZGl2IGNsYXNzPVwicmVzdWx0LXRpdGxlXCI+e3t0aXRsZX19PC9kaXY+PGRpdiBjbGFzcz1cInJlc3VsdC1kYXRlXCI+e3twdWJEYXRlfX08L2Rpdj48L2E+PC9kaXY+J1xuICAgIC8vIH0pO1xufSk7XG4iLCIvKipcbiogZ2hvc3RIdW50ZXIgLSAwLjUuMFxuICogQ29weXJpZ2h0IChDKSAyMDE0IEphbWFsIE5ldWZlbGQgKGphbWFsQGkxMXUubWUpXG4gKiBNSVQgTGljZW5zZWRcbiAqIEBsaWNlbnNlXG4qL1xuKGZ1bmN0aW9uKCAkICkge1xuXG4gIC8qKlxuICogbHVuciAtIGh0dHA6Ly9sdW5yanMuY29tIC0gQSBiaXQgbGlrZSBTb2xyLCBidXQgbXVjaCBzbWFsbGVyIGFuZCBub3QgYXMgYnJpZ2h0IC0gMi4xLjVcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbjsoZnVuY3Rpb24oKXtcblxuLyoqXG4gKiBBIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjb25maWd1cmluZyBhbmQgY29uc3RydWN0aW5nXG4gKiBhIG5ldyBsdW5yIEluZGV4LlxuICpcbiAqIEEgbHVuci5CdWlsZGVyIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIHRoZSBwaXBlbGluZSBzZXR1cFxuICogd2l0aCBhIHRyaW1tZXIsIHN0b3Agd29yZCBmaWx0ZXIgYW5kIHN0ZW1tZXIuXG4gKlxuICogVGhpcyBidWlsZGVyIG9iamVjdCBpcyB5aWVsZGVkIHRvIHRoZSBjb25maWd1cmF0aW9uIGZ1bmN0aW9uXG4gKiB0aGF0IGlzIHBhc3NlZCBhcyBhIHBhcmFtZXRlciwgYWxsb3dpbmcgdGhlIGxpc3Qgb2YgZmllbGRzXG4gKiBhbmQgb3RoZXIgYnVpbGRlciBwYXJhbWV0ZXJzIHRvIGJlIGN1c3RvbWlzZWQuXG4gKlxuICogQWxsIGRvY3VtZW50cyBfbXVzdF8gYmUgYWRkZWQgd2l0aGluIHRoZSBwYXNzZWQgY29uZmlnIGZ1bmN0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgaWR4ID0gbHVucihmdW5jdGlvbiAoKSB7XG4gKiAgIHRoaXMuZmllbGQoJ3RpdGxlJylcbiAqICAgdGhpcy5maWVsZCgnYm9keScpXG4gKiAgIHRoaXMucmVmKCdpZCcpXG4gKlxuICogICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XG4gKiAgICAgdGhpcy5hZGQoZG9jKVxuICogICB9LCB0aGlzKVxuICogfSlcbiAqXG4gKiBAc2VlIHtAbGluayBsdW5yLkJ1aWxkZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICogQHNlZSB7QGxpbmsgbHVuci50cmltbWVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5zdG9wV29yZEZpbHRlcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuc3RlbW1lcn1cbiAqIEBuYW1lc3BhY2Uge2Z1bmN0aW9ufSBsdW5yXG4gKi9cbnZhciBsdW5yID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICB2YXIgYnVpbGRlciA9IG5ldyBsdW5yLkJ1aWxkZXIoKTtcblxuICBidWlsZGVyLnBpcGVsaW5lLmFkZChcbiAgICBsdW5yLnRyaW1tZXIsXG4gICAgbHVuci5zdG9wV29yZEZpbHRlcixcbiAgICBsdW5yLnN0ZW1tZXJcbiAgKTtcblxuICBidWlsZGVyLnNlYXJjaFBpcGVsaW5lLmFkZChcbiAgICBsdW5yLnN0ZW1tZXJcbiAgKTtcblxuICBjb25maWcuY2FsbChidWlsZGVyLCBidWlsZGVyKTtcbiAgcmV0dXJuIGJ1aWxkZXIuYnVpbGQoKTtcbn07XG5cbmx1bnIudmVyc2lvbiA9IFwiMi4xLjVcIjtcbi8qIVxuICogbHVuci51dGlsc1xuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSBuYW1lc3BhY2UgY29udGFpbmluZyB1dGlscyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGx1bnIgbGlicmFyeVxuICovXG5sdW5yLnV0aWxzID0ge307XG5cbi8qKlxuICogUHJpbnQgYSB3YXJuaW5nIG1lc3NhZ2UgdG8gdGhlIGNvbnNvbGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gYmUgcHJpbnRlZC5cbiAqIEBtZW1iZXJPZiBVdGlsc1xuICovXG5sdW5yLnV0aWxzLndhcm4gPSAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIHJldHVybiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChnbG9iYWwuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xufSkodGhpcyk7XG5cbi8qKlxuICogQ29udmVydCBhbiBvYmplY3QgdG8gYSBzdHJpbmcuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCB0aGUgZnVuY3Rpb24gcmV0dXJuc1xuICogdGhlIGVtcHR5IHN0cmluZywgaW4gYWxsIG90aGVyIGNhc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICogYHRvU3RyaW5nYCBvbiB0aGUgcGFzc2VkIG9iamVjdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge0FueX0gb2JqIFRoZSBvYmplY3QgdG8gY29udmVydCB0byBhIHN0cmluZy5cbiAqIEByZXR1cm4ge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXNzZWQgb2JqZWN0LlxuICogQG1lbWJlck9mIFV0aWxzXG4gKi9cbmx1bnIudXRpbHMuYXNTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gIGlmIChvYmogPT09IHZvaWQgMCB8fCBvYmogPT09IG51bGwpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCk7XG4gIH1cbn07XG5sdW5yLkZpZWxkUmVmID0gZnVuY3Rpb24gKGRvY1JlZiwgZmllbGROYW1lLCBzdHJpbmdWYWx1ZSkge1xuICB0aGlzLmRvY1JlZiA9IGRvY1JlZjtcbiAgdGhpcy5maWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gIHRoaXMuX3N0cmluZ1ZhbHVlID0gc3RyaW5nVmFsdWU7XG59O1xuXG5sdW5yLkZpZWxkUmVmLmpvaW5lciA9IFwiL1wiO1xuXG5sdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAocykge1xuICB2YXIgbiA9IHMuaW5kZXhPZihsdW5yLkZpZWxkUmVmLmpvaW5lcik7XG5cbiAgaWYgKG4gPT09IC0xKSB7XG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgZmllbGQgcmVmIHN0cmluZ1wiO1xuICB9XG5cbiAgdmFyIGZpZWxkUmVmID0gcy5zbGljZSgwLCBuKSxcbiAgICAgIGRvY1JlZiA9IHMuc2xpY2UobiArIDEpO1xuXG4gIHJldHVybiBuZXcgbHVuci5GaWVsZFJlZiAoZG9jUmVmLCBmaWVsZFJlZiwgcyk7XG59O1xuXG5sdW5yLkZpZWxkUmVmLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX3N0cmluZ1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9zdHJpbmdWYWx1ZSA9IHRoaXMuZmllbGROYW1lICsgbHVuci5GaWVsZFJlZi5qb2luZXIgKyB0aGlzLmRvY1JlZjtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9zdHJpbmdWYWx1ZTtcbn07XG4vKipcbiAqIEEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBpbnZlcnNlIGRvY3VtZW50IGZyZXF1ZW5jeSBmb3JcbiAqIGEgcG9zdGluZy4gVGhpcyBpcyBzaGFyZWQgYmV0d2VlbiB0aGUgYnVpbGRlciBhbmQgdGhlIGluZGV4XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwb3N0aW5nIC0gVGhlIHBvc3RpbmcgZm9yIGEgZ2l2ZW4gdGVybVxuICogQHBhcmFtIHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBUaGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cy5cbiAqL1xubHVuci5pZGYgPSBmdW5jdGlvbiAocG9zdGluZywgZG9jdW1lbnRDb3VudCkge1xuICB2YXIgZG9jdW1lbnRzV2l0aFRlcm0gPSAwO1xuXG4gIGZvciAodmFyIGZpZWxkTmFtZSBpbiBwb3N0aW5nKSB7XG4gICAgaWYgKGZpZWxkTmFtZSA9PSAnX2luZGV4JykgY29udGludWU7IC8vIElnbm9yZSB0aGUgdGVybSBpbmRleCwgaXRzIG5vdCBhIGZpZWxkXG4gICAgZG9jdW1lbnRzV2l0aFRlcm0gKz0gT2JqZWN0LmtleXMocG9zdGluZ1tmaWVsZE5hbWVdKS5sZW5ndGg7XG4gIH1cblxuICB2YXIgeCA9IChkb2N1bWVudENvdW50IC0gZG9jdW1lbnRzV2l0aFRlcm0gKyAwLjUpIC8gKGRvY3VtZW50c1dpdGhUZXJtICsgMC41KTtcblxuICByZXR1cm4gTWF0aC5sb2coMSArIE1hdGguYWJzKHgpKTtcbn07XG5cbi8qKlxuICogQSB0b2tlbiB3cmFwcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRva2VuXG4gKiBhcyBpdCBpcyBwYXNzZWQgdGhyb3VnaCB0aGUgdGV4dCBwcm9jZXNzaW5nIHBpcGVsaW5lLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IFtzdHI9JyddIC0gVGhlIHN0cmluZyB0b2tlbiBiZWluZyB3cmFwcGVkLlxuICogQHBhcmFtIHtvYmplY3R9IFttZXRhZGF0YT17fV0gLSBNZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xubHVuci5Ub2tlbiA9IGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gIHRoaXMuc3RyID0gc3RyIHx8IFwiXCI7XG4gIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YSB8fCB7fTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdG9rZW4gc3RyaW5nIHRoYXQgaXMgYmVpbmcgd3JhcHBlZCBieSB0aGlzIG9iamVjdC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuc3RyO1xufTtcblxuLyoqXG4gKiBBIHRva2VuIHVwZGF0ZSBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gdXBkYXRpbmcgb3Igb3B0aW9uYWxseVxuICogd2hlbiBjbG9uaW5nIGEgdG9rZW4uXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhZGF0YSAtIEFsbCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIHRvIHRoZSB3cmFwcGVkIHN0cmluZyB0b2tlbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gKiAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKVxuICogfSlcbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgdG9rZW4gc3RyaW5nLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICB0aGlzLnN0ciA9IGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHRva2VuLiBPcHRpb25hbGx5IGEgZnVuY3Rpb24gY2FuIGJlXG4gKiBhcHBsaWVkIHRvIHRoZSBjbG9uZWQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBbZm5dIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIGNsb25lZCB0b2tlbi5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChmbikge1xuICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzOyB9O1xuICByZXR1cm4gbmV3IGx1bnIuVG9rZW4gKGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKSwgdGhpcy5tZXRhZGF0YSk7XG59O1xuLyohXG4gKiBsdW5yLnRva2VuaXplclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSBmdW5jdGlvbiBmb3Igc3BsaXR0aW5nIGEgc3RyaW5nIGludG8gdG9rZW5zIHJlYWR5IHRvIGJlIGluc2VydGVkIGludG9cbiAqIHRoZSBzZWFyY2ggaW5kZXguIFVzZXMgYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAgdG8gc3BsaXQgc3RyaW5ncywgY2hhbmdlXG4gKiB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSB0byBjaGFuZ2UgaG93IHN0cmluZ3MgYXJlIHNwbGl0IGludG8gdG9rZW5zLlxuICpcbiAqIFRoaXMgdG9rZW5pemVyIHdpbGwgY29udmVydCBpdHMgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgYHRvU3RyaW5nYCBhbmRcbiAqIHRoZW4gd2lsbCBzcGxpdCB0aGlzIHN0cmluZyBvbiB0aGUgY2hhcmFjdGVyIGluIGBsdW5yLnRva2VuaXplci5zZXBhcmF0b3JgLlxuICogQXJyYXlzIHdpbGwgaGF2ZSB0aGVpciBlbGVtZW50cyBjb252ZXJ0ZWQgdG8gc3RyaW5ncyBhbmQgd3JhcHBlZCBpbiBhIGx1bnIuVG9rZW4uXG4gKlxuICogQHN0YXRpY1xuICogQHBhcmFtIHs/KHN0cmluZ3xvYmplY3R8b2JqZWN0W10pfSBvYmogLSBUaGUgb2JqZWN0IHRvIGNvbnZlcnQgaW50byB0b2tlbnNcbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuW119XG4gKi9cbmx1bnIudG9rZW5pemVyID0gZnVuY3Rpb24gKG9iaikge1xuICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gbmV3IGx1bnIuVG9rZW4obHVuci51dGlscy5hc1N0cmluZyh0KS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBzdHIgPSBvYmoudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXG4gICAgICB0b2tlbnMgPSBbXTtcblxuICBmb3IgKHZhciBzbGljZUVuZCA9IDAsIHNsaWNlU3RhcnQgPSAwOyBzbGljZUVuZCA8PSBsZW47IHNsaWNlRW5kKyspIHtcbiAgICB2YXIgY2hhciA9IHN0ci5jaGFyQXQoc2xpY2VFbmQpLFxuICAgICAgICBzbGljZUxlbmd0aCA9IHNsaWNlRW5kIC0gc2xpY2VTdGFydDtcblxuICAgIGlmICgoY2hhci5tYXRjaChsdW5yLnRva2VuaXplci5zZXBhcmF0b3IpIHx8IHNsaWNlRW5kID09IGxlbikpIHtcblxuICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICB0b2tlbnMucHVzaChcbiAgICAgICAgICBuZXcgbHVuci5Ub2tlbiAoc3RyLnNsaWNlKHNsaWNlU3RhcnQsIHNsaWNlRW5kKSwge1xuICAgICAgICAgICAgcG9zaXRpb246IFtzbGljZVN0YXJ0LCBzbGljZUxlbmd0aF0sXG4gICAgICAgICAgICBpbmRleDogdG9rZW5zLmxlbmd0aFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuLyoqXG4gKiBUaGUgc2VwYXJhdG9yIHVzZWQgdG8gc3BsaXQgYSBzdHJpbmcgaW50byB0b2tlbnMuIE92ZXJyaWRlIHRoaXMgcHJvcGVydHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvdXIgb2ZcbiAqIGBsdW5yLnRva2VuaXplcmAgYmVoYXZpb3VyIHdoZW4gdG9rZW5pemluZyBzdHJpbmdzLiBCeSBkZWZhdWx0IHRoaXMgc3BsaXRzIG9uIHdoaXRlc3BhY2UgYW5kIGh5cGhlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNlZSBsdW5yLnRva2VuaXplclxuICovXG5sdW5yLnRva2VuaXplci5zZXBhcmF0b3IgPSAvW1xcc1xcLV0rLztcbi8qIVxuICogbHVuci5QaXBlbGluZVxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogbHVuci5QaXBlbGluZXMgbWFpbnRhaW4gYW4gb3JkZXJlZCBsaXN0IG9mIGZ1bmN0aW9ucyB0byBiZSBhcHBsaWVkIHRvIGFsbFxuICogdG9rZW5zIGluIGRvY3VtZW50cyBlbnRlcmluZyB0aGUgc2VhcmNoIGluZGV4IGFuZCBxdWVyaWVzIGJlaW5nIHJhbiBhZ2FpbnN0XG4gKiB0aGUgaW5kZXguXG4gKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5JbmRleCBjcmVhdGVkIHdpdGggdGhlIGx1bnIgc2hvcnRjdXQgd2lsbCBjb250YWluIGFcbiAqIHBpcGVsaW5lIHdpdGggYSBzdG9wIHdvcmQgZmlsdGVyIGFuZCBhbiBFbmdsaXNoIGxhbmd1YWdlIHN0ZW1tZXIuIEV4dHJhXG4gKiBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIGJlZm9yZSBvciBhZnRlciBlaXRoZXIgb2YgdGhlc2UgZnVuY3Rpb25zIG9yIHRoZXNlXG4gKiBkZWZhdWx0IGZ1bmN0aW9ucyBjYW4gYmUgcmVtb3ZlZC5cbiAqXG4gKiBXaGVuIHJ1biB0aGUgcGlwZWxpbmUgd2lsbCBjYWxsIGVhY2ggZnVuY3Rpb24gaW4gdHVybiwgcGFzc2luZyBhIHRva2VuLCB0aGVcbiAqIGluZGV4IG9mIHRoYXQgdG9rZW4gaW4gdGhlIG9yaWdpbmFsIGxpc3Qgb2YgYWxsIHRva2VucyBhbmQgZmluYWxseSBhIGxpc3Qgb2ZcbiAqIGFsbCB0aGUgb3JpZ2luYWwgdG9rZW5zLlxuICpcbiAqIFRoZSBvdXRwdXQgb2YgZnVuY3Rpb25zIGluIHRoZSBwaXBlbGluZSB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbmV4dCBmdW5jdGlvblxuICogaW4gdGhlIHBpcGVsaW5lLiBUbyBleGNsdWRlIGEgdG9rZW4gZnJvbSBlbnRlcmluZyB0aGUgaW5kZXggdGhlIGZ1bmN0aW9uXG4gKiBzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCwgdGhlIHJlc3Qgb2YgdGhlIHBpcGVsaW5lIHdpbGwgbm90IGJlIGNhbGxlZCB3aXRoXG4gKiB0aGlzIHRva2VuLlxuICpcbiAqIEZvciBzZXJpYWxpc2F0aW9uIG9mIHBpcGVsaW5lcyB0byB3b3JrLCBhbGwgZnVuY3Rpb25zIHVzZWQgaW4gYW4gaW5zdGFuY2Ugb2ZcbiAqIGEgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgd2l0aCBsdW5yLlBpcGVsaW5lLiBSZWdpc3RlcmVkIGZ1bmN0aW9ucyBjYW5cbiAqIHRoZW4gYmUgbG9hZGVkLiBJZiB0cnlpbmcgdG8gbG9hZCBhIHNlcmlhbGlzZWQgcGlwZWxpbmUgdGhhdCB1c2VzIGZ1bmN0aW9uc1xuICogdGhhdCBhcmUgbm90IHJlZ2lzdGVyZWQgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKlxuICogSWYgbm90IHBsYW5uaW5nIG9uIHNlcmlhbGlzaW5nIHRoZSBwaXBlbGluZSB0aGVuIHJlZ2lzdGVyaW5nIHBpcGVsaW5lIGZ1bmN0aW9uc1xuICogaXMgbm90IG5lY2Vzc2FyeS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xubHVuci5QaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXTtcbn07XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8qKlxuICogQSBwaXBlbGluZSBmdW5jdGlvbiBtYXBzIGx1bnIuVG9rZW4gdG8gbHVuci5Ub2tlbi4gQSBsdW5yLlRva2VuIGNvbnRhaW5zIHRoZSB0b2tlblxuICogc3RyaW5nIGFzIHdlbGwgYXMgYWxsIGtub3duIG1ldGFkYXRhLiBBIHBpcGVsaW5lIGZ1bmN0aW9uIGNhbiBtdXRhdGUgdGhlIHRva2VuIHN0cmluZ1xuICogb3IgbXV0YXRlIChvciBhZGQpIG1ldGFkYXRhIGZvciBhIGdpdmVuIHRva2VuLlxuICpcbiAqIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIGluZGljYXRlIHRoYXQgdGhlIHBhc3NlZCB0b2tlbiBzaG91bGQgYmUgZGlzY2FyZGVkIGJ5IHJldHVybmluZ1xuICogbnVsbC4gVGhpcyB0b2tlbiB3aWxsIG5vdCBiZSBwYXNzZWQgdG8gYW55IGRvd25zdHJlYW0gcGlwZWxpbmUgZnVuY3Rpb25zIGFuZCB3aWxsIG5vdCBiZVxuICogYWRkZWQgdG8gdGhlIGluZGV4LlxuICpcbiAqIE11bHRpcGxlIHRva2VucyBjYW4gYmUgcmV0dXJuZWQgYnkgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRva2Vucy4gRWFjaCB0b2tlbiB3aWxsIGJlIHBhc3NlZFxuICogdG8gYW55IGRvd25zdHJlYW0gcGlwZWxpbmUgZnVuY3Rpb25zIGFuZCBhbGwgd2lsbCByZXR1cm5lZCB0b2tlbnMgd2lsbCBiZSBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogQW55IG51bWJlciBvZiBwaXBlbGluZSBmdW5jdGlvbnMgbWF5IGJlIGNoYWluZWQgdG9nZXRoZXIgdXNpbmcgYSBsdW5yLlBpcGVsaW5lLlxuICpcbiAqIEBpbnRlcmZhY2UgbHVuci5QaXBlbGluZUZ1bmN0aW9uXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW59IHRva2VuIC0gQSB0b2tlbiBmcm9tIHRoZSBkb2N1bWVudCBiZWluZyBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gaSAtIFRoZSBpbmRleCBvZiB0aGlzIHRva2VuIGluIHRoZSBjb21wbGV0ZSBsaXN0IG9mIHRva2VucyBmb3IgdGhpcyBkb2N1bWVudC9maWVsZC5cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbltdfSB0b2tlbnMgLSBBbGwgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICogQHJldHVybnMgeyg/bHVuci5Ub2tlbnxsdW5yLlRva2VuW10pfVxuICovXG5cbi8qKlxuICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB3aXRoIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBGdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCBpbiB0aGUgcGlwZWxpbmUgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgaWYgdGhlIHBpcGVsaW5lXG4gKiBuZWVkcyB0byBiZSBzZXJpYWxpc2VkLCBvciBhIHNlcmlhbGlzZWQgcGlwZWxpbmUgbmVlZHMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFJlZ2lzdGVyaW5nIGEgZnVuY3Rpb24gZG9lcyBub3QgYWRkIGl0IHRvIGEgcGlwZWxpbmUsIGZ1bmN0aW9ucyBtdXN0IHN0aWxsIGJlXG4gKiBhZGRlZCB0byBpbnN0YW5jZXMgb2YgdGhlIHBpcGVsaW5lIGZvciB0aGVtIHRvIGJlIHVzZWQgd2hlbiBydW5uaW5nIGEgcGlwZWxpbmUuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCAtIFRoZSBsYWJlbCB0byByZWdpc3RlciB0aGlzIGZ1bmN0aW9uIHdpdGhcbiAqL1xubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuLCBsYWJlbCkge1xuICBpZiAobGFiZWwgaW4gdGhpcy5yZWdpc3RlcmVkRnVuY3Rpb25zKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdPdmVyd3JpdGluZyBleGlzdGluZyByZWdpc3RlcmVkIGZ1bmN0aW9uOiAnICsgbGFiZWwpO1xuICB9XG5cbiAgZm4ubGFiZWwgPSBsYWJlbDtcbiAgbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuLmxhYmVsXSA9IGZuO1xufTtcblxuLyoqXG4gKiBXYXJucyBpZiB0aGUgZnVuY3Rpb24gaXMgbm90IHJlZ2lzdGVyZWQgYXMgYSBQaXBlbGluZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHByaXZhdGVcbiAqL1xubHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIGlzUmVnaXN0ZXJlZCA9IGZuLmxhYmVsICYmIChmbi5sYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpO1xuXG4gIGlmICghaXNSZWdpc3RlcmVkKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdGdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIHBpcGVsaW5lLiBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyB3aGVuIHNlcmlhbGlzaW5nIHRoZSBpbmRleC5cXG4nLCBmbik7XG4gIH1cbn07XG5cbi8qKlxuICogTG9hZHMgYSBwcmV2aW91c2x5IHNlcmlhbGlzZWQgcGlwZWxpbmUuXG4gKlxuICogQWxsIGZ1bmN0aW9ucyB0byBiZSBsb2FkZWQgbXVzdCBhbHJlYWR5IGJlIHJlZ2lzdGVyZWQgd2l0aCBsdW5yLlBpcGVsaW5lLlxuICogSWYgYW55IGZ1bmN0aW9uIGZyb20gdGhlIHNlcmlhbGlzZWQgZGF0YSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB0aGVuIGFuXG4gKiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXNlZCAtIFRoZSBzZXJpYWxpc2VkIHBpcGVsaW5lIHRvIGxvYWQuXG4gKiBAcmV0dXJucyB7bHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5QaXBlbGluZS5sb2FkID0gZnVuY3Rpb24gKHNlcmlhbGlzZWQpIHtcbiAgdmFyIHBpcGVsaW5lID0gbmV3IGx1bnIuUGlwZWxpbmUoKTtcblxuICBzZXJpYWxpc2VkLmZvckVhY2goZnVuY3Rpb24gKGZuTmFtZSkge1xuICAgIHZhciBmbiA9IGx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9uc1tmbk5hbWVdO1xuXG4gICAgaWYgKGZuKSB7XG4gICAgICBwaXBlbGluZS5hZGQoZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBsb2FkIHVucmVnaXN0ZXJlZCBmdW5jdGlvbjogJyArIGZuTmFtZSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGlwZWxpbmU7XG59O1xuXG4vKipcbiAqIEFkZHMgbmV3IGZ1bmN0aW9ucyB0byB0aGUgZW5kIG9mIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb25bXX0gZnVuY3Rpb25zIC0gQW55IG51bWJlciBvZiBmdW5jdGlvbnMgdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZm5zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICBmbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChmbik7XG4gICAgdGhpcy5fc3RhY2sucHVzaChmbik7XG4gIH0sIHRoaXMpO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgc2luZ2xlIGZ1bmN0aW9uIGFmdGVyIGEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGVcbiAqIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gbmV3Rm4gLSBUaGUgbmV3IGZ1bmN0aW9uIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFmdGVyID0gZnVuY3Rpb24gKGV4aXN0aW5nRm4sIG5ld0ZuKSB7XG4gIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKG5ld0ZuKTtcblxuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihleGlzdGluZ0ZuKTtcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZXhpc3RpbmdGbicpO1xuICB9XG5cbiAgcG9zID0gcG9zICsgMTtcbiAgdGhpcy5fc3RhY2suc3BsaWNlKHBvcywgMCwgbmV3Rm4pO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgc2luZ2xlIGZ1bmN0aW9uIGJlZm9yZSBhIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlXG4gKiBwaXBlbGluZS5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGV4aXN0aW5nRm4gLSBBIGZ1bmN0aW9uIHRoYXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHBpcGVsaW5lLlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IG5ld0ZuIC0gVGhlIG5ldyBmdW5jdGlvbiB0byBhZGQgdG8gdGhlIHBpcGVsaW5lLlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5iZWZvcmUgPSBmdW5jdGlvbiAoZXhpc3RpbmdGbiwgbmV3Rm4pIHtcbiAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pO1xuXG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGV4aXN0aW5nRm4pO1xuICBpZiAocG9zID09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBleGlzdGluZ0ZuJyk7XG4gIH1cblxuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAwLCBuZXdGbik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgYSBmdW5jdGlvbiBmcm9tIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBmcm9tIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGZuKTtcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDEpO1xufTtcblxuLyoqXG4gKiBSdW5zIHRoZSBjdXJyZW50IGxpc3Qgb2YgZnVuY3Rpb25zIHRoYXQgbWFrZSB1cCB0aGUgcGlwZWxpbmUgYWdhaW5zdCB0aGVcbiAqIHBhc3NlZCB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zIFRoZSB0b2tlbnMgdG8gcnVuIHRocm91Z2ggdGhlIHBpcGVsaW5lLlxuICogQHJldHVybnMge0FycmF5fVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAodG9rZW5zKSB7XG4gIHZhciBzdGFja0xlbmd0aCA9IHRoaXMuX3N0YWNrLmxlbmd0aDtcblxuICB2YXIgciA9IGZ1bmN0aW9uIChtZW1vLCB0b2tlbiwgaikge1xuICAgIHZhciByZXN1bHQgPSBmbih0b2tlbiwgaiwgdG9rZW5zKTtcbiAgICBpZiAocmVzdWx0ID09PSB2b2lkIDAgfHwgcmVzdWx0ID09PSAnJykgcmV0dXJuIG1lbW87XG4gICAgcmV0dXJuIG1lbW8uY29uY2F0KHJlc3VsdCk7XG4gIH07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZuID0gdGhpcy5fc3RhY2tbaV07XG4gICAgdG9rZW5zID0gdG9rZW5zLnJlZHVjZShyLCBbXSk7XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHBhc3NpbmcgYSBzdHJpbmcgdGhyb3VnaCBhIHBpcGVsaW5lIGFuZCBnZXR0aW5nXG4gKiBzdHJpbmdzIG91dC4gVGhpcyBtZXRob2QgdGFrZXMgY2FyZSBvZiB3cmFwcGluZyB0aGUgcGFzc2VkIHN0cmluZyBpbiBhXG4gKiB0b2tlbiBhbmQgbWFwcGluZyB0aGUgcmVzdWx0aW5nIHRva2VucyBiYWNrIHRvIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gcGFzcyB0aHJvdWdoIHRoZSBwaXBlbGluZS5cbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucnVuU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgdG9rZW4gPSBuZXcgbHVuci5Ub2tlbiAoc3RyKTtcblxuICByZXR1cm4gdGhpcy5ydW4oW3Rva2VuXSkubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlc2V0cyB0aGUgcGlwZWxpbmUgYnkgcmVtb3ZpbmcgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gKlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwaXBlbGluZSByZWFkeSBmb3Igc2VyaWFsaXNhdGlvbi5cbiAqXG4gKiBMb2dzIGEgd2FybmluZyBpZiB0aGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9zdGFjay5tYXAoZnVuY3Rpb24gKGZuKSB7XG4gICAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQoZm4pO1xuICAgIHJldHVybiBmbi5sYWJlbDtcbiAgfSk7XG59O1xuLyohXG4gKiBsdW5yLlZlY3RvclxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSB2ZWN0b3IgaXMgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHZlY3RvciBzcGFjZSBvZiBkb2N1bWVudHMgYW5kIHF1ZXJpZXMuIFRoZXNlXG4gKiB2ZWN0b3JzIHN1cHBvcnQgb3BlcmF0aW9ucyB0byBkZXRlcm1pbmUgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0d28gZG9jdW1lbnRzIG9yXG4gKiBhIGRvY3VtZW50IGFuZCBhIHF1ZXJ5LlxuICpcbiAqIE5vcm1hbGx5IG5vIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIGZvciBpbml0aWFsaXppbmcgYSB2ZWN0b3IsIGJ1dCBpbiB0aGUgY2FzZSBvZlxuICogbG9hZGluZyBhIHByZXZpb3VzbHkgZHVtcGVkIHZlY3RvciB0aGUgcmF3IGVsZW1lbnRzIGNhbiBiZSBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IuXG4gKlxuICogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdmVjdG9ycyBhcmUgaW1wbGVtZW50ZWQgd2l0aCBhIGZsYXQgYXJyYXksIHdoZXJlIGFuIGVsZW1lbnRzXG4gKiBpbmRleCBpcyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBpdHMgdmFsdWUuIEUuZy4gW2luZGV4LCB2YWx1ZSwgaW5kZXgsIHZhbHVlXS4gVGhpc1xuICogYWxsb3dzIHRoZSB1bmRlcmx5aW5nIGFycmF5IHRvIGJlIGFzIHNwYXJzZSBhcyBwb3NzaWJsZSBhbmQgc3RpbGwgb2ZmZXIgZGVjZW50XG4gKiBwZXJmb3JtYW5jZSB3aGVuIGJlaW5nIHVzZWQgZm9yIHZlY3RvciBjYWxjdWxhdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge051bWJlcltdfSBbZWxlbWVudHNdIC0gVGhlIGZsYXQgbGlzdCBvZiBlbGVtZW50IGluZGV4IGFuZCBlbGVtZW50IHZhbHVlIHBhaXJzLlxuICovXG5sdW5yLlZlY3RvciA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICB0aGlzLl9tYWduaXR1ZGUgPSAwO1xuICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHMgfHwgW107XG59O1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9zaXRpb24gd2l0aGluIHRoZSB2ZWN0b3IgdG8gaW5zZXJ0IGEgZ2l2ZW4gaW5kZXguXG4gKlxuICogVGhpcyBpcyB1c2VkIGludGVybmFsbHkgYnkgaW5zZXJ0IGFuZCB1cHNlcnQuIElmIHRoZXJlIGFyZSBkdXBsaWNhdGUgaW5kZXhlcyB0aGVuXG4gKiB0aGUgcG9zaXRpb24gaXMgcmV0dXJuZWQgYXMgaWYgdGhlIHZhbHVlIGZvciB0aGF0IGluZGV4IHdlcmUgdG8gYmUgdXBkYXRlZCwgYnV0IGl0XG4gKiBpcyB0aGUgY2FsbGVycyByZXNwb25zaWJpbGl0eSB0byBjaGVjayB3aGV0aGVyIHRoZXJlIGlzIGEgZHVwbGljYXRlIGF0IHRoYXQgaW5kZXhcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5wb3NpdGlvbkZvckluZGV4ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gIC8vIEZvciBhbiBlbXB0eSB2ZWN0b3IgdGhlIHR1cGxlIGNhbiBiZSBpbnNlcnRlZCBhdCB0aGUgYmVnaW5uaW5nXG4gIGlmICh0aGlzLmVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIHN0YXJ0ID0gMCxcbiAgICAgIGVuZCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoIC8gMixcbiAgICAgIHNsaWNlTGVuZ3RoID0gZW5kIC0gc3RhcnQsXG4gICAgICBwaXZvdFBvaW50ID0gTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpLFxuICAgICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdO1xuXG4gIHdoaWxlIChzbGljZUxlbmd0aCA+IDEpIHtcbiAgICBpZiAocGl2b3RJbmRleCA8IGluZGV4KSB7XG4gICAgICBzdGFydCA9IHBpdm90UG9pbnQ7XG4gICAgfVxuXG4gICAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgICAgZW5kID0gcGl2b3RQb2ludDtcbiAgICB9XG5cbiAgICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc2xpY2VMZW5ndGggPSBlbmQgLSBzdGFydDtcbiAgICBwaXZvdFBvaW50ID0gc3RhcnQgKyBNYXRoLmZsb29yKHNsaWNlTGVuZ3RoIC8gMik7XG4gICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdO1xuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPT0gaW5kZXgpIHtcbiAgICByZXR1cm4gcGl2b3RQb2ludCAqIDI7XG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA+IGluZGV4KSB7XG4gICAgcmV0dXJuIHBpdm90UG9pbnQgKiAyO1xuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPCBpbmRleCkge1xuICAgIHJldHVybiAocGl2b3RQb2ludCArIDEpICogMjtcbiAgfVxufTtcblxuLyoqXG4gKiBJbnNlcnRzIGFuIGVsZW1lbnQgYXQgYW4gaW5kZXggd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogRG9lcyBub3QgYWxsb3cgZHVwbGljYXRlcywgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGVudHJ5XG4gKiBmb3IgdGhpcyBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWwgLSBUaGUgdmFsdWUgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgdmVjdG9yLlxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsKSB7XG4gIHRoaXMudXBzZXJ0KGluc2VydElkeCwgdmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgXCJkdXBsaWNhdGUgaW5kZXhcIjtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBleGlzdGluZyBpbmRleCB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0SWR4IC0gVGhlIGluZGV4IGF0IHdoaWNoIHRoZSBlbGVtZW50IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWwgLSBUaGUgdmFsdWUgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgdmVjdG9yLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBBIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIGZvciB1cGRhdGVzLCB0aGUgZXhpc3RpbmcgdmFsdWUgYW5kIHRoZVxuICogcmVxdWVzdGVkIHZhbHVlIGFyZSBwYXNzZWQgYXMgYXJndW1lbnRzXG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS51cHNlcnQgPSBmdW5jdGlvbiAoaW5zZXJ0SWR4LCB2YWwsIGZuKSB7XG4gIHRoaXMuX21hZ25pdHVkZSA9IDA7XG4gIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Gb3JJbmRleChpbnNlcnRJZHgpO1xuXG4gIGlmICh0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uXSA9PSBpbnNlcnRJZHgpIHtcbiAgICB0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uICsgMV0gPSBmbih0aGlzLmVsZW1lbnRzW3Bvc2l0aW9uICsgMV0sIHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5lbGVtZW50cy5zcGxpY2UocG9zaXRpb24sIDAsIGluc2VydElkeCwgdmFsKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBtYWduaXR1ZGUgb2YgdGhpcyB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLm1hZ25pdHVkZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuX21hZ25pdHVkZSkgcmV0dXJuIHRoaXMuX21hZ25pdHVkZTtcblxuICB2YXIgc3VtT2ZTcXVhcmVzID0gMCxcbiAgICAgIGVsZW1lbnRzTGVuZ3RoID0gdGhpcy5lbGVtZW50cy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBlbGVtZW50c0xlbmd0aDsgaSArPSAyKSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuZWxlbWVudHNbaV07XG4gICAgc3VtT2ZTcXVhcmVzICs9IHZhbCAqIHZhbDtcbiAgfVxuXG4gIHRoaXMuX21hZ25pdHVkZSA9IE1hdGguc3FydChzdW1PZlNxdWFyZXMpO1xuICByZXR1cm4gdGhpcy5fbWFnbml0dWRlO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHZhciBkb3RQcm9kdWN0ID0gMCxcbiAgICAgIGEgPSB0aGlzLmVsZW1lbnRzLCBiID0gb3RoZXJWZWN0b3IuZWxlbWVudHMsXG4gICAgICBhTGVuID0gYS5sZW5ndGgsIGJMZW4gPSBiLmxlbmd0aCxcbiAgICAgIGFWYWwgPSAwLCBiVmFsID0gMCxcbiAgICAgIGkgPSAwLCBqID0gMDtcblxuICB3aGlsZSAoaSA8IGFMZW4gJiYgaiA8IGJMZW4pIHtcbiAgICBhVmFsID0gYVtpXTsgYlZhbCA9IGJbal07XG4gICAgaWYgKGFWYWwgPCBiVmFsKSB7XG4gICAgICBpICs9IDI7XG4gICAgfSBlbHNlIGlmIChhVmFsID4gYlZhbCkge1xuICAgICAgaiArPSAyO1xuICAgIH0gZWxzZSBpZiAoYVZhbCA9PSBiVmFsKSB7XG4gICAgICBkb3RQcm9kdWN0ICs9IGFbaSArIDFdICogYltqICsgMV07XG4gICAgICBpICs9IDI7XG4gICAgICBqICs9IDI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRvdFByb2R1Y3Q7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGNvc2luZSBzaW1pbGFyaXR5IGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXJcbiAqIHZlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVmVjdG9yfSBvdGhlclZlY3RvciAtIFRoZSBvdGhlciB2ZWN0b3IgdG8gY2FsY3VsYXRlIHRoZVxuICogc2ltaWxhcml0eSB3aXRoLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnNpbWlsYXJpdHkgPSBmdW5jdGlvbiAob3RoZXJWZWN0b3IpIHtcbiAgcmV0dXJuIHRoaXMuZG90KG90aGVyVmVjdG9yKSAvICh0aGlzLm1hZ25pdHVkZSgpICogb3RoZXJWZWN0b3IubWFnbml0dWRlKCkpO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgdmVjdG9yIHRvIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3V0cHV0ID0gbmV3IEFycmF5ICh0aGlzLmVsZW1lbnRzLmxlbmd0aCAvIDIpO1xuXG4gIGZvciAodmFyIGkgPSAxLCBqID0gMDsgaSA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyBpICs9IDIsIGorKykge1xuICAgIG91dHB1dFtqXSA9IHRoaXMuZWxlbWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLyoqXG4gKiBBIEpTT04gc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3IuXG4gKlxuICogQHJldHVybnMge051bWJlcltdfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5lbGVtZW50cztcbn07XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyohXG4gKiBsdW5yLnN0ZW1tZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEluY2x1ZGVzIGNvZGUgZnJvbSAtIGh0dHA6Ly90YXJ0YXJ1cy5vcmcvfm1hcnRpbi9Qb3J0ZXJTdGVtbWVyL2pzLnR4dFxuICovXG5cbi8qKlxuICogbHVuci5zdGVtbWVyIGlzIGFuIGVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lciwgdGhpcyBpcyBhIEphdmFTY3JpcHRcbiAqIGltcGxlbWVudGF0aW9uIG9mIHRoZSBQb3J0ZXJTdGVtbWVyIHRha2VuIGZyb20gaHR0cDovL3RhcnRhcnVzLm9yZy9+bWFydGluXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBUaGUgc3RyaW5nIHRvIHN0ZW1cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5zdGVtbWVyID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBzdGVwMmxpc3QgPSB7XG4gICAgICBcImF0aW9uYWxcIiA6IFwiYXRlXCIsXG4gICAgICBcInRpb25hbFwiIDogXCJ0aW9uXCIsXG4gICAgICBcImVuY2lcIiA6IFwiZW5jZVwiLFxuICAgICAgXCJhbmNpXCIgOiBcImFuY2VcIixcbiAgICAgIFwiaXplclwiIDogXCJpemVcIixcbiAgICAgIFwiYmxpXCIgOiBcImJsZVwiLFxuICAgICAgXCJhbGxpXCIgOiBcImFsXCIsXG4gICAgICBcImVudGxpXCIgOiBcImVudFwiLFxuICAgICAgXCJlbGlcIiA6IFwiZVwiLFxuICAgICAgXCJvdXNsaVwiIDogXCJvdXNcIixcbiAgICAgIFwiaXphdGlvblwiIDogXCJpemVcIixcbiAgICAgIFwiYXRpb25cIiA6IFwiYXRlXCIsXG4gICAgICBcImF0b3JcIiA6IFwiYXRlXCIsXG4gICAgICBcImFsaXNtXCIgOiBcImFsXCIsXG4gICAgICBcIml2ZW5lc3NcIiA6IFwiaXZlXCIsXG4gICAgICBcImZ1bG5lc3NcIiA6IFwiZnVsXCIsXG4gICAgICBcIm91c25lc3NcIiA6IFwib3VzXCIsXG4gICAgICBcImFsaXRpXCIgOiBcImFsXCIsXG4gICAgICBcIml2aXRpXCIgOiBcIml2ZVwiLFxuICAgICAgXCJiaWxpdGlcIiA6IFwiYmxlXCIsXG4gICAgICBcImxvZ2lcIiA6IFwibG9nXCJcbiAgICB9LFxuXG4gICAgc3RlcDNsaXN0ID0ge1xuICAgICAgXCJpY2F0ZVwiIDogXCJpY1wiLFxuICAgICAgXCJhdGl2ZVwiIDogXCJcIixcbiAgICAgIFwiYWxpemVcIiA6IFwiYWxcIixcbiAgICAgIFwiaWNpdGlcIiA6IFwiaWNcIixcbiAgICAgIFwiaWNhbFwiIDogXCJpY1wiLFxuICAgICAgXCJmdWxcIiA6IFwiXCIsXG4gICAgICBcIm5lc3NcIiA6IFwiXCJcbiAgICB9LFxuXG4gICAgYyA9IFwiW15hZWlvdV1cIiwgICAgICAgICAgLy8gY29uc29uYW50XG4gICAgdiA9IFwiW2FlaW91eV1cIiwgICAgICAgICAgLy8gdm93ZWxcbiAgICBDID0gYyArIFwiW15hZWlvdXldKlwiLCAgICAvLyBjb25zb25hbnQgc2VxdWVuY2VcbiAgICBWID0gdiArIFwiW2FlaW91XSpcIiwgICAgICAvLyB2b3dlbCBzZXF1ZW5jZVxuXG4gICAgbWdyMCA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQywgICAgICAgICAgICAgICAvLyBbQ11WQy4uLiBpcyBtPjBcbiAgICBtZXExID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDICsgXCIoXCIgKyBWICsgXCIpPyRcIiwgIC8vIFtDXVZDW1ZdIGlzIG09MVxuICAgIG1ncjEgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMgKyBWICsgQywgICAgICAgLy8gW0NdVkNWQy4uLiBpcyBtPjFcbiAgICBzX3YgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgdjsgICAgICAgICAgICAgICAgICAgLy8gdm93ZWwgaW4gc3RlbVxuXG4gIHZhciByZV9tZ3IwID0gbmV3IFJlZ0V4cChtZ3IwKTtcbiAgdmFyIHJlX21ncjEgPSBuZXcgUmVnRXhwKG1ncjEpO1xuICB2YXIgcmVfbWVxMSA9IG5ldyBSZWdFeHAobWVxMSk7XG4gIHZhciByZV9zX3YgPSBuZXcgUmVnRXhwKHNfdik7XG5cbiAgdmFyIHJlXzFhID0gL14oLis/KShzc3xpKWVzJC87XG4gIHZhciByZTJfMWEgPSAvXiguKz8pKFtec10pcyQvO1xuICB2YXIgcmVfMWIgPSAvXiguKz8pZWVkJC87XG4gIHZhciByZTJfMWIgPSAvXiguKz8pKGVkfGluZykkLztcbiAgdmFyIHJlXzFiXzIgPSAvLiQvO1xuICB2YXIgcmUyXzFiXzIgPSAvKGF0fGJsfGl6KSQvO1xuICB2YXIgcmUzXzFiXzIgPSBuZXcgUmVnRXhwKFwiKFteYWVpb3V5bHN6XSlcXFxcMSRcIik7XG4gIHZhciByZTRfMWJfMiA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDICsgdiArIFwiW15hZWlvdXd4eV0kXCIpO1xuXG4gIHZhciByZV8xYyA9IC9eKC4rP1teYWVpb3VdKXkkLztcbiAgdmFyIHJlXzIgPSAvXiguKz8pKGF0aW9uYWx8dGlvbmFsfGVuY2l8YW5jaXxpemVyfGJsaXxhbGxpfGVudGxpfGVsaXxvdXNsaXxpemF0aW9ufGF0aW9ufGF0b3J8YWxpc218aXZlbmVzc3xmdWxuZXNzfG91c25lc3N8YWxpdGl8aXZpdGl8YmlsaXRpfGxvZ2kpJC87XG5cbiAgdmFyIHJlXzMgPSAvXiguKz8pKGljYXRlfGF0aXZlfGFsaXplfGljaXRpfGljYWx8ZnVsfG5lc3MpJC87XG5cbiAgdmFyIHJlXzQgPSAvXiguKz8pKGFsfGFuY2V8ZW5jZXxlcnxpY3xhYmxlfGlibGV8YW50fGVtZW50fG1lbnR8ZW50fG91fGlzbXxhdGV8aXRpfG91c3xpdmV8aXplKSQvO1xuICB2YXIgcmUyXzQgPSAvXiguKz8pKHN8dCkoaW9uKSQvO1xuXG4gIHZhciByZV81ID0gL14oLis/KWUkLztcbiAgdmFyIHJlXzVfMSA9IC9sbCQvO1xuICB2YXIgcmUzXzUgPSBuZXcgUmVnRXhwKFwiXlwiICsgQyArIHYgKyBcIlteYWVpb3V3eHldJFwiKTtcblxuICB2YXIgcG9ydGVyU3RlbW1lciA9IGZ1bmN0aW9uIHBvcnRlclN0ZW1tZXIodykge1xuICAgIHZhciBzdGVtLFxuICAgICAgc3VmZml4LFxuICAgICAgZmlyc3RjaCxcbiAgICAgIHJlLFxuICAgICAgcmUyLFxuICAgICAgcmUzLFxuICAgICAgcmU0O1xuXG4gICAgaWYgKHcubGVuZ3RoIDwgMykgeyByZXR1cm4gdzsgfVxuXG4gICAgZmlyc3RjaCA9IHcuc3Vic3RyKDAsMSk7XG4gICAgaWYgKGZpcnN0Y2ggPT0gXCJ5XCIpIHtcbiAgICAgIHcgPSBmaXJzdGNoLnRvVXBwZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDFhXG4gICAgcmUgPSByZV8xYTtcbiAgICByZTIgPSByZTJfMWE7XG5cbiAgICBpZiAocmUudGVzdCh3KSkgeyB3ID0gdy5yZXBsYWNlKHJlLFwiJDEkMlwiKTsgfVxuICAgIGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7IHcgPSB3LnJlcGxhY2UocmUyLFwiJDEkMlwiKTsgfVxuXG4gICAgdmFyIGZwO1xuICAgIC8vIFN0ZXAgMWJcbiAgICByZSA9IHJlXzFiO1xuICAgIHJlMiA9IHJlMl8xYjtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3QoZnBbMV0pKSB7XG4gICAgICAgIHJlID0gcmVfMWJfMjtcbiAgICAgICAgdyA9IHcucmVwbGFjZShyZSxcIlwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlMi50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlMi5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgcmUyID0gcmVfc192O1xuICAgICAgaWYgKHJlMi50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgICByZTIgPSByZTJfMWJfMjtcbiAgICAgICAgcmUzID0gcmUzXzFiXzI7XG4gICAgICAgIHJlNCA9IHJlNF8xYl8yO1xuICAgICAgICBpZiAocmUyLnRlc3QodykpIHsgdyA9IHcgKyBcImVcIjsgfVxuICAgICAgICBlbHNlIGlmIChyZTMudGVzdCh3KSkgeyByZSA9IHJlXzFiXzI7IHcgPSB3LnJlcGxhY2UocmUsXCJcIik7IH1cbiAgICAgICAgZWxzZSBpZiAocmU0LnRlc3QodykpIHsgdyA9IHcgKyBcImVcIjsgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgMWMgLSByZXBsYWNlIHN1ZmZpeCB5IG9yIFkgYnkgaSBpZiBwcmVjZWRlZCBieSBhIG5vbi12b3dlbCB3aGljaCBpcyBub3QgdGhlIGZpcnN0IGxldHRlciBvZiB0aGUgd29yZCAoc28gY3J5IC0+IGNyaSwgYnkgLT4gYnksIHNheSAtPiBzYXkpXG4gICAgcmUgPSByZV8xYztcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgdyA9IHN0ZW0gKyBcImlcIjtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDJcbiAgICByZSA9IHJlXzI7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW0gKyBzdGVwMmxpc3Rbc3VmZml4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDNcbiAgICByZSA9IHJlXzM7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHN1ZmZpeCA9IGZwWzJdO1xuICAgICAgcmUgPSByZV9tZ3IwO1xuICAgICAgaWYgKHJlLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW0gKyBzdGVwM2xpc3Rbc3VmZml4XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdGVwIDRcbiAgICByZSA9IHJlXzQ7XG4gICAgcmUyID0gcmUyXzQ7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlID0gcmVfbWdyMTtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV0gKyBmcFsyXTtcbiAgICAgIHJlMiA9IHJlX21ncjE7XG4gICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCA1XG4gICAgcmUgPSByZV81O1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICByZSA9IHJlX21ncjE7XG4gICAgICByZTIgPSByZV9tZXExO1xuICAgICAgcmUzID0gcmUzXzU7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSB8fCAocmUyLnRlc3Qoc3RlbSkgJiYgIShyZTMudGVzdChzdGVtKSkpKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlID0gcmVfNV8xO1xuICAgIHJlMiA9IHJlX21ncjE7XG4gICAgaWYgKHJlLnRlc3QodykgJiYgcmUyLnRlc3QodykpIHtcbiAgICAgIHJlID0gcmVfMWJfMjtcbiAgICAgIHcgPSB3LnJlcGxhY2UocmUsXCJcIik7XG4gICAgfVxuXG4gICAgLy8gYW5kIHR1cm4gaW5pdGlhbCBZIGJhY2sgdG8geVxuXG4gICAgaWYgKGZpcnN0Y2ggPT0gXCJ5XCIpIHtcbiAgICAgIHcgPSBmaXJzdGNoLnRvTG93ZXJDYXNlKCkgKyB3LnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdztcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuLnVwZGF0ZShwb3J0ZXJTdGVtbWVyKTtcbiAgfTtcbn0pKCk7XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0ZW1tZXIsICdzdGVtbWVyJyk7XG4vKiFcbiAqIGx1bnIuc3RvcFdvcmRGaWx0ZXJcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciBidWlsZHMgYSBzdG9wV29yZEZpbHRlciBmdW5jdGlvbiBmcm9tIHRoZSBwcm92aWRlZFxuICogbGlzdCBvZiBzdG9wIHdvcmRzLlxuICpcbiAqIFRoZSBidWlsdCBpbiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGJ1aWx0IHVzaW5nIHRoaXMgZ2VuZXJhdG9yIGFuZCBjYW4gYmUgdXNlZFxuICogdG8gZ2VuZXJhdGUgY3VzdG9tIHN0b3BXb3JkRmlsdGVycyBmb3IgYXBwbGljYXRpb25zIG9yIG5vbiBFbmdsaXNoIGxhbmd1YWdlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbiBUaGUgdG9rZW4gdG8gcGFzcyB0aHJvdWdoIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm5zIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAc2VlIGx1bnIuUGlwZWxpbmVcbiAqIEBzZWUgbHVuci5zdG9wV29yZEZpbHRlclxuICovXG5sdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIgPSBmdW5jdGlvbiAoc3RvcFdvcmRzKSB7XG4gIHZhciB3b3JkcyA9IHN0b3BXb3Jkcy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHN0b3BXb3JkKSB7XG4gICAgbWVtb1tzdG9wV29yZF0gPSBzdG9wV29yZDtcbiAgICByZXR1cm4gbWVtbztcbiAgfSwge30pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBpZiAodG9rZW4gJiYgd29yZHNbdG9rZW4udG9TdHJpbmcoKV0gIT09IHRva2VuLnRvU3RyaW5nKCkpIHJldHVybiB0b2tlbjtcbiAgfTtcbn07XG5cbi8qKlxuICogbHVuci5zdG9wV29yZEZpbHRlciBpcyBhbiBFbmdsaXNoIGxhbmd1YWdlIHN0b3Agd29yZCBsaXN0IGZpbHRlciwgYW55IHdvcmRzXG4gKiBjb250YWluZWQgaW4gdGhlIGxpc3Qgd2lsbCBub3QgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gdGhlIFBpcGVsaW5lLiBJZiB0aGUgdG9rZW4gZG9lcyBub3QgcGFzcyB0aGVcbiAqIGZpbHRlciB0aGVuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259XG4gKiBAcGFyYW1zIHtsdW5yLlRva2VufSB0b2tlbiAtIEEgdG9rZW4gdG8gY2hlY2sgZm9yIGJlaW5nIGEgc3RvcCB3b3JkLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKiBAc2VlIHtAbGluayBsdW5yLlBpcGVsaW5lfVxuICovXG5sdW5yLnN0b3BXb3JkRmlsdGVyID0gbHVuci5nZW5lcmF0ZVN0b3BXb3JkRmlsdGVyKFtcbiAgJ2EnLFxuICAnYWJsZScsXG4gICdhYm91dCcsXG4gICdhY3Jvc3MnLFxuICAnYWZ0ZXInLFxuICAnYWxsJyxcbiAgJ2FsbW9zdCcsXG4gICdhbHNvJyxcbiAgJ2FtJyxcbiAgJ2Ftb25nJyxcbiAgJ2FuJyxcbiAgJ2FuZCcsXG4gICdhbnknLFxuICAnYXJlJyxcbiAgJ2FzJyxcbiAgJ2F0JyxcbiAgJ2JlJyxcbiAgJ2JlY2F1c2UnLFxuICAnYmVlbicsXG4gICdidXQnLFxuICAnYnknLFxuICAnY2FuJyxcbiAgJ2Nhbm5vdCcsXG4gICdjb3VsZCcsXG4gICdkZWFyJyxcbiAgJ2RpZCcsXG4gICdkbycsXG4gICdkb2VzJyxcbiAgJ2VpdGhlcicsXG4gICdlbHNlJyxcbiAgJ2V2ZXInLFxuICAnZXZlcnknLFxuICAnZm9yJyxcbiAgJ2Zyb20nLFxuICAnZ2V0JyxcbiAgJ2dvdCcsXG4gICdoYWQnLFxuICAnaGFzJyxcbiAgJ2hhdmUnLFxuICAnaGUnLFxuICAnaGVyJyxcbiAgJ2hlcnMnLFxuICAnaGltJyxcbiAgJ2hpcycsXG4gICdob3cnLFxuICAnaG93ZXZlcicsXG4gICdpJyxcbiAgJ2lmJyxcbiAgJ2luJyxcbiAgJ2ludG8nLFxuICAnaXMnLFxuICAnaXQnLFxuICAnaXRzJyxcbiAgJ2p1c3QnLFxuICAnbGVhc3QnLFxuICAnbGV0JyxcbiAgJ2xpa2UnLFxuICAnbGlrZWx5JyxcbiAgJ21heScsXG4gICdtZScsXG4gICdtaWdodCcsXG4gICdtb3N0JyxcbiAgJ211c3QnLFxuICAnbXknLFxuICAnbmVpdGhlcicsXG4gICdubycsXG4gICdub3InLFxuICAnbm90JyxcbiAgJ29mJyxcbiAgJ29mZicsXG4gICdvZnRlbicsXG4gICdvbicsXG4gICdvbmx5JyxcbiAgJ29yJyxcbiAgJ290aGVyJyxcbiAgJ291cicsXG4gICdvd24nLFxuICAncmF0aGVyJyxcbiAgJ3NhaWQnLFxuICAnc2F5JyxcbiAgJ3NheXMnLFxuICAnc2hlJyxcbiAgJ3Nob3VsZCcsXG4gICdzaW5jZScsXG4gICdzbycsXG4gICdzb21lJyxcbiAgJ3RoYW4nLFxuICAndGhhdCcsXG4gICd0aGUnLFxuICAndGhlaXInLFxuICAndGhlbScsXG4gICd0aGVuJyxcbiAgJ3RoZXJlJyxcbiAgJ3RoZXNlJyxcbiAgJ3RoZXknLFxuICAndGhpcycsXG4gICd0aXMnLFxuICAndG8nLFxuICAndG9vJyxcbiAgJ3R3YXMnLFxuICAndXMnLFxuICAnd2FudHMnLFxuICAnd2FzJyxcbiAgJ3dlJyxcbiAgJ3dlcmUnLFxuICAnd2hhdCcsXG4gICd3aGVuJyxcbiAgJ3doZXJlJyxcbiAgJ3doaWNoJyxcbiAgJ3doaWxlJyxcbiAgJ3dobycsXG4gICd3aG9tJyxcbiAgJ3doeScsXG4gICd3aWxsJyxcbiAgJ3dpdGgnLFxuICAnd291bGQnLFxuICAneWV0JyxcbiAgJ3lvdScsXG4gICd5b3VyJ1xuXSk7XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0b3BXb3JkRmlsdGVyLCAnc3RvcFdvcmRGaWx0ZXInKTtcbi8qIVxuICogbHVuci50cmltbWVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLnRyaW1tZXIgaXMgYSBwaXBlbGluZSBmdW5jdGlvbiBmb3IgdHJpbW1pbmcgbm9uIHdvcmRcbiAqIGNoYXJhY3RlcnMgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgdG9rZW5zIGJlZm9yZSB0aGV5XG4gKiBlbnRlciB0aGUgaW5kZXguXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBtYXkgbm90IHdvcmsgY29ycmVjdGx5IGZvciBub24gbGF0aW5cbiAqIGNoYXJhY3RlcnMgYW5kIHNob3VsZCBlaXRoZXIgYmUgcmVtb3ZlZCBvciBhZGFwdGVkIGZvciB1c2VcbiAqIHdpdGggbGFuZ3VhZ2VzIHdpdGggbm9uLWxhdGluIGNoYXJhY3RlcnMuXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gVGhlIHRva2VuIHRvIHBhc3MgdGhyb3VnaCB0aGUgZmlsdGVyXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICovXG5sdW5yLnRyaW1tZXIgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgcmV0dXJuIHRva2VuLnVwZGF0ZShmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL15cXFcrLywgJycpLnJlcGxhY2UoL1xcVyskLywgJycpO1xuICB9KTtcbn07XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnRyaW1tZXIsICd0cmltbWVyJyk7XG4vKiFcbiAqIGx1bnIuVG9rZW5TZXRcbiAqIENvcHlyaWdodCAoQykgMjAxNyBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgdG9rZW4gc2V0IGlzIHVzZWQgdG8gc3RvcmUgdGhlIHVuaXF1ZSBsaXN0IG9mIGFsbCB0b2tlbnNcbiAqIHdpdGhpbiBhbiBpbmRleC4gVG9rZW4gc2V0cyBhcmUgYWxzbyB1c2VkIHRvIHJlcHJlc2VudCBhblxuICogaW5jb21pbmcgcXVlcnkgdG8gdGhlIGluZGV4LCB0aGlzIHF1ZXJ5IHRva2VuIHNldCBhbmQgaW5kZXhcbiAqIHRva2VuIHNldCBhcmUgdGhlbiBpbnRlcnNlY3RlZCB0byBmaW5kIHdoaWNoIHRva2VucyB0byBsb29rXG4gKiB1cCBpbiB0aGUgaW52ZXJ0ZWQgaW5kZXguXG4gKlxuICogQSB0b2tlbiBzZXQgY2FuIGhvbGQgbXVsdGlwbGUgdG9rZW5zLCBhcyBpbiB0aGUgY2FzZSBvZiB0aGVcbiAqIGluZGV4IHRva2VuIHNldCwgb3IgaXQgY2FuIGhvbGQgYSBzaW5nbGUgdG9rZW4gYXMgaW4gdGhlXG4gKiBjYXNlIG9mIGEgc2ltcGxlIHF1ZXJ5IHRva2VuIHNldC5cbiAqXG4gKiBBZGRpdGlvbmFsbHkgdG9rZW4gc2V0cyBhcmUgdXNlZCB0byBwZXJmb3JtIHdpbGRjYXJkIG1hdGNoaW5nLlxuICogTGVhZGluZywgY29udGFpbmVkIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMgYXJlIHN1cHBvcnRlZCwgYW5kXG4gKiBmcm9tIHRoaXMgZWRpdCBkaXN0YW5jZSBtYXRjaGluZyBjYW4gYWxzbyBiZSBwcm92aWRlZC5cbiAqXG4gKiBUb2tlbiBzZXRzIGFyZSBpbXBsZW1lbnRlZCBhcyBhIG1pbmltYWwgZmluaXRlIHN0YXRlIGF1dG9tYXRhLFxuICogd2hlcmUgYm90aCBjb21tb24gcHJlZml4ZXMgYW5kIHN1ZmZpeGVzIGFyZSBzaGFyZWQgYmV0d2VlbiB0b2tlbnMuXG4gKiBUaGlzIGhlbHBzIHRvIHJlZHVjZSB0aGUgc3BhY2UgdXNlZCBmb3Igc3RvcmluZyB0aGUgdG9rZW4gc2V0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5sdW5yLlRva2VuU2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmZpbmFsID0gZmFsc2U7XG4gIHRoaXMuZWRnZXMgPSB7fTtcbiAgdGhpcy5pZCA9IGx1bnIuVG9rZW5TZXQuX25leHRJZDtcbiAgbHVuci5Ub2tlblNldC5fbmV4dElkICs9IDE7XG59O1xuXG4vKipcbiAqIEtlZXBzIHRyYWNrIG9mIHRoZSBuZXh0LCBhdXRvIGluY3JlbWVudCwgaWRlbnRpZmllciB0byBhc3NpZ25cbiAqIHRvIGEgbmV3IHRva2VuU2V0LlxuICpcbiAqIFRva2VuU2V0cyByZXF1aXJlIGEgdW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgY29ycmVjdGx5IG1pbmltaXNlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5sdW5yLlRva2VuU2V0Ll9uZXh0SWQgPSAxO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBUb2tlblNldCBpbnN0YW5jZSBmcm9tIHRoZSBnaXZlbiBzb3J0ZWQgYXJyYXkgb2Ygd29yZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmdbXX0gYXJyIC0gQSBzb3J0ZWQgYXJyYXkgb2Ygc3RyaW5ncyB0byBjcmVhdGUgdGhlIHNldCBmcm9tLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKiBAdGhyb3dzIFdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGlucHV0IGFycmF5IGlzIG5vdCBzb3J0ZWQuXG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgYnVpbGRlciA9IG5ldyBsdW5yLlRva2VuU2V0LkJ1aWxkZXIoKTtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnVpbGRlci5pbnNlcnQoYXJyW2ldKTtcbiAgfVxuXG4gIGJ1aWxkZXIuZmluaXNoKCk7XG4gIHJldHVybiBidWlsZGVyLnJvb3Q7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgZnJvbSBhIHF1ZXJ5IGNsYXVzZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IGNsYXVzZSAtIEEgc2luZ2xlIGNsYXVzZSBmcm9tIGx1bnIuUXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhdXNlLnRlcm0gLSBUaGUgcXVlcnkgY2xhdXNlIHRlcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gW2NsYXVzZS5lZGl0RGlzdGFuY2VdIC0gVGhlIG9wdGlvbmFsIGVkaXQgZGlzdGFuY2UgZm9yIHRoZSB0ZXJtLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgaWYgKCdlZGl0RGlzdGFuY2UnIGluIGNsYXVzZSkge1xuICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyhjbGF1c2UudGVybSwgY2xhdXNlLmVkaXREaXN0YW5jZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyhjbGF1c2UudGVybSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCByZXByZXNlbnRpbmcgYSBzaW5nbGUgc3RyaW5nIHdpdGggYSBzcGVjaWZpZWRcbiAqIGVkaXQgZGlzdGFuY2UuXG4gKlxuICogSW5zZXJ0aW9ucywgZGVsZXRpb25zLCBzdWJzdGl0dXRpb25zIGFuZCB0cmFuc3Bvc2l0aW9ucyBhcmUgZWFjaFxuICogdHJlYXRlZCBhcyBhbiBlZGl0IGRpc3RhbmNlIG9mIDEuXG4gKlxuICogSW5jcmVhc2luZyB0aGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHdpbGwgaGF2ZSBhIGRyYW1hdGljIGltcGFjdFxuICogb24gdGhlIHBlcmZvcm1hbmNlIG9mIGJvdGggY3JlYXRpbmcgYW5kIGludGVyc2VjdGluZyB0aGVzZSBUb2tlblNldHMuXG4gKiBJdCBpcyBhZHZpc2VkIHRvIGtlZXAgdGhlIGVkaXQgZGlzdGFuY2UgbGVzcyB0aGFuIDMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gY3JlYXRlIHRoZSB0b2tlbiBzZXQgZnJvbS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlZGl0RGlzdGFuY2UgLSBUaGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHRvIG1hdGNoLlxuICogQHJldHVybnMge2x1bnIuVmVjdG9yfVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyA9IGZ1bmN0aW9uIChzdHIsIGVkaXREaXN0YW5jZSkge1xuICB2YXIgcm9vdCA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBub2RlOiByb290LFxuICAgIGVkaXRzUmVtYWluaW5nOiBlZGl0RGlzdGFuY2UsXG4gICAgc3RyOiBzdHJcbiAgfV07XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIHZhciBmcmFtZSA9IHN0YWNrLnBvcCgpO1xuXG4gICAgdmFyIGNoYXI7XG4gICAgLy8gbm8gZWRpdFxuICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID4gMCkge1xuICAgICAgY2hhciA9IGZyYW1lLnN0ci5jaGFyQXQoMCk7XG5cbiAgICAgIHZhciBub0VkaXROb2RlO1xuICAgICAgaWYgKGNoYXIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBub0VkaXROb2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vRWRpdE5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCgpO1xuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdID0gbm9FZGl0Tm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICBub0VkaXROb2RlLmZpbmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IG5vRWRpdE5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlbGV0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSBkZWxldGlvbiBpZiB3ZSBoYXZlIGVub3VnaCBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgaWYgdGhlcmUgYXJlIGNoYXJhY3RlcnMgbGVmdCB0byBkZWxldGUgaW4gdGhlIHN0cmluZ1xuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNoYXIgPSBmcmFtZS5zdHIuY2hhckF0KDEpO1xuXG4gICAgICB2YXIgZGVsZXRpb25Ob2RlO1xuICAgICAgaWYgKGNoYXIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBkZWxldGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyXSA9IGRlbGV0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPD0gMikge1xuICAgICAgICBkZWxldGlvbk5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogZGVsZXRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGVsZXRpb25cbiAgICAvLyBqdXN0IHJlbW92aW5nIHRoZSBsYXN0IGNoYXJhY3RlciBmcm9tIHRoZSBzdHJcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgZnJhbWUubm9kZS5maW5hbCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHN1YnN0aXR1dGlvbk5vZGU7XG4gICAgLy8gc3Vic3RpdHV0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSBzdWJzdGl0dXRpb24gaWYgd2UgaGF2ZSBlbm91Z2ggZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIGlmIHRoZXJlIGFyZSBjaGFyYWN0ZXJzIGxlZnQgdG8gc3Vic3RpdHV0ZVxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+PSAxKSB7XG4gICAgICBpZiAoXCIqXCIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlID0gZnJhbWUubm9kZS5lZGdlc1tcIipcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tcIipcIl0gPSBzdWJzdGl0dXRpb25Ob2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbk5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogc3Vic3RpdHV0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbnNlcnRpb25Ob2RlO1xuICAgIC8vIGluc2VydGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGluc2VydGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgaWYgKGZyYW1lLmVkaXRzUmVtYWluaW5nID4gMCkge1xuICAgICAgaWYgKFwiKlwiIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCk7XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gaW5zZXJ0aW9uTm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaW5zZXJ0aW9uTm9kZS5maW5hbCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBpbnNlcnRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdHJhbnNwb3NpdGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgdHJhbnNwb3NpdGlvbiBpZiB0aGVyZSBhcmUgZWRpdHMgcmVtYWluaW5nXG4gICAgLy8gYW5kIHRoZXJlIGFyZSBlbm91Z2ggY2hhcmFjdGVycyB0byB0cmFuc3Bvc2VcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgY2hhckEgPSBmcmFtZS5zdHIuY2hhckF0KDApLFxuICAgICAgICAgIGNoYXJCID0gZnJhbWUuc3RyLmNoYXJBdCgxKSxcbiAgICAgICAgICB0cmFuc3Bvc2VOb2RlO1xuXG4gICAgICBpZiAoY2hhckIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlID0gZnJhbWUubm9kZS5lZGdlc1tjaGFyQl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyQl0gPSB0cmFuc3Bvc2VOb2RlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHRyYW5zcG9zZU5vZGUuZmluYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogdHJhbnNwb3NlTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogY2hhckEgKyBmcmFtZS5zdHIuc2xpY2UoMilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJvb3Q7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBUb2tlblNldCBmcm9tIGEgc3RyaW5nLlxuICpcbiAqIFRoZSBzdHJpbmcgbWF5IGNvbnRhaW4gb25lIG9yIG1vcmUgd2lsZGNhcmQgY2hhcmFjdGVycyAoKilcbiAqIHRoYXQgd2lsbCBhbGxvdyB3aWxkY2FyZCBtYXRjaGluZyB3aGVuIGludGVyc2VjdGluZyB3aXRoXG4gKiBhbm90aGVyIFRva2VuU2V0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGNyZWF0ZSBhIFRva2VuU2V0IGZyb20uXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlblNldH1cbiAqL1xubHVuci5Ub2tlblNldC5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgbm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0KCksXG4gICAgICByb290ID0gbm9kZSxcbiAgICAgIHdpbGRjYXJkRm91bmQgPSBmYWxzZTtcblxuICAvKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGFsbCBjaGFyYWN0ZXJzIHdpdGhpbiB0aGUgcGFzc2VkIHN0cmluZ1xuICAgKiBhcHBlbmRpbmcgYSBub2RlIGZvciBlYWNoIGNoYXJhY3Rlci5cbiAgICpcbiAgICogQXMgc29vbiBhcyBhIHdpbGRjYXJkIGNoYXJhY3RlciBpcyBmb3VuZCB0aGVuIGEgc2VsZlxuICAgKiByZWZlcmVuY2luZyBlZGdlIGlzIGludHJvZHVjZWQgdG8gY29udGludWFsbHkgbWF0Y2hcbiAgICogYW55IG51bWJlciBvZiBhbnkgY2hhcmFjdGVycy5cbiAgICovXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgY2hhciA9IHN0cltpXSxcbiAgICAgICAgZmluYWwgPSAoaSA9PSBsZW4gLSAxKTtcblxuICAgIGlmIChjaGFyID09IFwiKlwiKSB7XG4gICAgICB3aWxkY2FyZEZvdW5kID0gdHJ1ZTtcbiAgICAgIG5vZGUuZWRnZXNbY2hhcl0gPSBub2RlO1xuICAgICAgbm9kZS5maW5hbCA9IGZpbmFsO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgIG5leHQuZmluYWwgPSBmaW5hbDtcblxuICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHQ7XG4gICAgICBub2RlID0gbmV4dDtcblxuICAgICAgLy8gVE9ETzogaXMgdGhpcyBuZWVkZWQgYW55bW9yZT9cbiAgICAgIGlmICh3aWxkY2FyZEZvdW5kKSB7XG4gICAgICAgIG5vZGUuZWRnZXNbXCIqXCJdID0gcm9vdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm9vdDtcbn07XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBUb2tlblNldCBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHdvcmRzID0gW107XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBwcmVmaXg6IFwiXCIsXG4gICAgbm9kZTogdGhpc1xuICB9XTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgdmFyIGZyYW1lID0gc3RhY2sucG9wKCksXG4gICAgICAgIGVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIGxlbiA9IGVkZ2VzLmxlbmd0aDtcblxuICAgIGlmIChmcmFtZS5ub2RlLmZpbmFsKSB7XG4gICAgICB3b3Jkcy5wdXNoKGZyYW1lLnByZWZpeCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXTtcblxuICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgIHByZWZpeDogZnJhbWUucHJlZml4LmNvbmNhdChlZGdlKSxcbiAgICAgICAgbm9kZTogZnJhbWUubm9kZS5lZGdlc1tlZGdlXVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdvcmRzO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBUb2tlblNldC5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGFsbG93IFRva2VuU2V0cyB0byBiZSB1c2VkIGFzIGtleXNcbiAqIGluIG9iamVjdHMsIGxhcmdlbHkgdG8gYWlkIHRoZSBjb25zdHJ1Y3Rpb24gYW5kIG1pbmltaXNhdGlvblxuICogb2YgYSBUb2tlblNldC4gQXMgc3VjaCBpdCBpcyBub3QgZGVzaWduZWQgdG8gYmUgYSBodW1hblxuICogZnJpZW5kbHkgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRva2VuU2V0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAvLyBOT1RFOiBVc2luZyBPYmplY3Qua2V5cyBoZXJlIGFzIHRoaXMuZWRnZXMgaXMgdmVyeSBsaWtlbHlcbiAgLy8gdG8gZW50ZXIgJ2hhc2gtbW9kZScgd2l0aCBtYW55IGtleXMgYmVpbmcgYWRkZWRcbiAgLy9cbiAgLy8gYXZvaWRpbmcgYSBmb3ItaW4gbG9vcCBoZXJlIGFzIGl0IGxlYWRzIHRvIHRoZSBmdW5jdGlvblxuICAvLyBiZWluZyBkZS1vcHRpbWlzZWQgKGF0IGxlYXN0IGluIFY4KS4gRnJvbSBzb21lIHNpbXBsZVxuICAvLyBiZW5jaG1hcmtzIHRoZSBwZXJmb3JtYW5jZSBpcyBjb21wYXJhYmxlLCBidXQgYWxsb3dpbmdcbiAgLy8gVjggdG8gb3B0aW1pemUgbWF5IG1lYW4gZWFzeSBwZXJmb3JtYW5jZSB3aW5zIGluIHRoZSBmdXR1cmUuXG5cbiAgaWYgKHRoaXMuX3N0cikge1xuICAgIHJldHVybiB0aGlzLl9zdHI7XG4gIH1cblxuICB2YXIgc3RyID0gdGhpcy5maW5hbCA/ICcxJyA6ICcwJyxcbiAgICAgIGxhYmVscyA9IE9iamVjdC5rZXlzKHRoaXMuZWRnZXMpLnNvcnQoKSxcbiAgICAgIGxlbiA9IGxhYmVscy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBsYWJlbCA9IGxhYmVsc1tpXSxcbiAgICAgICAgbm9kZSA9IHRoaXMuZWRnZXNbbGFiZWxdO1xuXG4gICAgc3RyID0gc3RyICsgbGFiZWwgKyBub2RlLmlkO1xuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBUb2tlblNldCB0aGF0IGlzIHRoZSBpbnRlcnNlY3Rpb24gb2ZcbiAqIHRoaXMgVG9rZW5TZXQgYW5kIHRoZSBwYXNzZWQgVG9rZW5TZXQuXG4gKlxuICogVGhpcyBpbnRlcnNlY3Rpb24gd2lsbCB0YWtlIGludG8gYWNjb3VudCBhbnkgd2lsZGNhcmRzXG4gKiBjb250YWluZWQgd2l0aGluIHRoZSBUb2tlblNldC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5TZXR9IGIgLSBBbiBvdGhlciBUb2tlblNldCB0byBpbnRlcnNlY3Qgd2l0aC5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICovXG5sdW5yLlRva2VuU2V0LnByb3RvdHlwZS5pbnRlcnNlY3QgPSBmdW5jdGlvbiAoYikge1xuICB2YXIgb3V0cHV0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgdmFyIGZyYW1lO1xuXG4gIHZhciBzdGFjayA9IFt7XG4gICAgcU5vZGU6IGIsXG4gICAgb3V0cHV0OiBvdXRwdXQsXG4gICAgbm9kZTogdGhpc1xuICB9XTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgZnJhbWUgPSBzdGFjay5wb3AoKTtcblxuICAgIC8vIE5PVEU6IEFzIHdpdGggdGhlICN0b1N0cmluZyBtZXRob2QsIHdlIGFyZSB1c2luZ1xuICAgIC8vIE9iamVjdC5rZXlzIGFuZCBhIGZvciBsb29wIGluc3RlYWQgb2YgYSBmb3ItaW4gbG9vcFxuICAgIC8vIGFzIGJvdGggb2YgdGhlc2Ugb2JqZWN0cyBlbnRlciAnaGFzaCcgbW9kZSwgY2F1c2luZ1xuICAgIC8vIHRoZSBmdW5jdGlvbiB0byBiZSBkZS1vcHRpbWlzZWQgaW4gVjhcbiAgICB2YXIgcUVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUucU5vZGUuZWRnZXMpLFxuICAgICAgICBxTGVuID0gcUVkZ2VzLmxlbmd0aCxcbiAgICAgICAgbkVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIG5MZW4gPSBuRWRnZXMubGVuZ3RoO1xuXG4gICAgZm9yICh2YXIgcSA9IDA7IHEgPCBxTGVuOyBxKyspIHtcbiAgICAgIHZhciBxRWRnZSA9IHFFZGdlc1txXTtcblxuICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBuTGVuOyBuKyspIHtcbiAgICAgICAgdmFyIG5FZGdlID0gbkVkZ2VzW25dO1xuXG4gICAgICAgIGlmIChuRWRnZSA9PSBxRWRnZSB8fCBxRWRnZSA9PSAnKicpIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbbkVkZ2VdLFxuICAgICAgICAgICAgICBxTm9kZSA9IGZyYW1lLnFOb2RlLmVkZ2VzW3FFZGdlXSxcbiAgICAgICAgICAgICAgZmluYWwgPSBub2RlLmZpbmFsICYmIHFOb2RlLmZpbmFsLFxuICAgICAgICAgICAgICBuZXh0O1xuXG4gICAgICAgICAgaWYgKG5FZGdlIGluIGZyYW1lLm91dHB1dC5lZGdlcykge1xuICAgICAgICAgICAgLy8gYW4gZWRnZSBhbHJlYWR5IGV4aXN0cyBmb3IgdGhpcyBjaGFyYWN0ZXJcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gY3JlYXRlIGEgbmV3IG5vZGUsIGp1c3Qgc2V0IHRoZSBmaW5hbGl0eVxuICAgICAgICAgICAgLy8gYml0IHVubGVzcyB0aGlzIG5vZGUgaXMgYWxyZWFkeSBmaW5hbFxuICAgICAgICAgICAgbmV4dCA9IGZyYW1lLm91dHB1dC5lZGdlc1tuRWRnZV07XG4gICAgICAgICAgICBuZXh0LmZpbmFsID0gbmV4dC5maW5hbCB8fCBmaW5hbDtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBlZGdlIGV4aXN0cyB5ZXQsIG11c3QgY3JlYXRlIG9uZVxuICAgICAgICAgICAgLy8gc2V0IHRoZSBmaW5hbGl0eSBiaXQgYW5kIGluc2VydCBpdFxuICAgICAgICAgICAgLy8gaW50byB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgICAgICAgICAgIG5leHQuZmluYWwgPSBmaW5hbDtcbiAgICAgICAgICAgIGZyYW1lLm91dHB1dC5lZGdlc1tuRWRnZV0gPSBuZXh0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgICAgcU5vZGU6IHFOb2RlLFxuICAgICAgICAgICAgb3V0cHV0OiBuZXh0LFxuICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucHJldmlvdXNXb3JkID0gXCJcIjtcbiAgdGhpcy5yb290ID0gbmV3IGx1bnIuVG9rZW5TZXQoKTtcbiAgdGhpcy51bmNoZWNrZWROb2RlcyA9IFtdO1xuICB0aGlzLm1pbmltaXplZE5vZGVzID0ge307XG59O1xuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4gIHZhciBub2RlLFxuICAgICAgY29tbW9uUHJlZml4ID0gMDtcblxuICBpZiAod29yZCA8IHRoaXMucHJldmlvdXNXb3JkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yIChcIk91dCBvZiBvcmRlciB3b3JkIGluc2VydGlvblwiKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZC5sZW5ndGggJiYgaSA8IHRoaXMucHJldmlvdXNXb3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHdvcmRbaV0gIT0gdGhpcy5wcmV2aW91c1dvcmRbaV0pIGJyZWFrO1xuICAgIGNvbW1vblByZWZpeCsrO1xuICB9XG5cbiAgdGhpcy5taW5pbWl6ZShjb21tb25QcmVmaXgpO1xuXG4gIGlmICh0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIG5vZGUgPSB0aGlzLnJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgbm9kZSA9IHRoaXMudW5jaGVja2VkTm9kZXNbdGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggLSAxXS5jaGlsZDtcbiAgfVxuXG4gIGZvciAodmFyIGogPSBjb21tb25QcmVmaXg7IGogPCB3b3JkLmxlbmd0aDsgaisrKSB7XG4gICAgdmFyIG5leHROb2RlID0gbmV3IGx1bnIuVG9rZW5TZXQoKSxcbiAgICAgICAgY2hhciA9IHdvcmRbal07XG5cbiAgICBub2RlLmVkZ2VzW2NoYXJdID0gbmV4dE5vZGU7XG5cbiAgICB0aGlzLnVuY2hlY2tlZE5vZGVzLnB1c2goe1xuICAgICAgcGFyZW50OiBub2RlLFxuICAgICAgY2hhcjogY2hhcixcbiAgICAgIGNoaWxkOiBuZXh0Tm9kZVxuICAgIH0pO1xuXG4gICAgbm9kZSA9IG5leHROb2RlO1xuICB9XG5cbiAgbm9kZS5maW5hbCA9IHRydWU7XG4gIHRoaXMucHJldmlvdXNXb3JkID0gd29yZDtcbn07XG5cbmx1bnIuVG9rZW5TZXQuQnVpbGRlci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm1pbmltaXplKDApO1xufTtcblxubHVuci5Ub2tlblNldC5CdWlsZGVyLnByb3RvdHlwZS5taW5pbWl6ZSA9IGZ1bmN0aW9uIChkb3duVG8pIHtcbiAgZm9yICh2YXIgaSA9IHRoaXMudW5jaGVja2VkTm9kZXMubGVuZ3RoIC0gMTsgaSA+PSBkb3duVG87IGktLSkge1xuICAgIHZhciBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1tpXSxcbiAgICAgICAgY2hpbGRLZXkgPSBub2RlLmNoaWxkLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAoY2hpbGRLZXkgaW4gdGhpcy5taW5pbWl6ZWROb2Rlcykge1xuICAgICAgbm9kZS5wYXJlbnQuZWRnZXNbbm9kZS5jaGFyXSA9IHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYWNoZSB0aGUga2V5IGZvciB0aGlzIG5vZGUgc2luY2VcbiAgICAgIC8vIHdlIGtub3cgaXQgY2FuJ3QgY2hhbmdlIGFueW1vcmVcbiAgICAgIG5vZGUuY2hpbGQuX3N0ciA9IGNoaWxkS2V5O1xuXG4gICAgICB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XSA9IG5vZGUuY2hpbGQ7XG4gICAgfVxuXG4gICAgdGhpcy51bmNoZWNrZWROb2Rlcy5wb3AoKTtcbiAgfVxufTtcbi8qIVxuICogbHVuci5JbmRleFxuICogQ29weXJpZ2h0IChDKSAyMDE3IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQW4gaW5kZXggY29udGFpbnMgdGhlIGJ1aWx0IGluZGV4IG9mIGFsbCBkb2N1bWVudHMgYW5kIHByb3ZpZGVzIGEgcXVlcnkgaW50ZXJmYWNlXG4gKiB0byB0aGUgaW5kZXguXG4gKlxuICogVXN1YWxseSBpbnN0YW5jZXMgb2YgbHVuci5JbmRleCB3aWxsIG5vdCBiZSBjcmVhdGVkIHVzaW5nIHRoaXMgY29uc3RydWN0b3IsIGluc3RlYWRcbiAqIGx1bnIuQnVpbGRlciBzaG91bGQgYmUgdXNlZCB0byBjb25zdHJ1Y3QgbmV3IGluZGV4ZXMsIG9yIGx1bnIuSW5kZXgubG9hZCBzaG91bGQgYmVcbiAqIHVzZWQgdG8gbG9hZCBwcmV2aW91c2x5IGJ1aWx0IGFuZCBzZXJpYWxpemVkIGluZGV4ZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMgLSBUaGUgYXR0cmlidXRlcyBvZiB0aGUgYnVpbHQgc2VhcmNoIGluZGV4LlxuICogQHBhcmFtIHtPYmplY3R9IGF0dHJzLmludmVydGVkSW5kZXggLSBBbiBpbmRleCBvZiB0ZXJtL2ZpZWxkIHRvIGRvY3VtZW50IHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbHVuci5WZWN0b3I+fSBhdHRycy5kb2N1bWVudFZlY3RvcnMgLSBEb2N1bWVudCB2ZWN0b3JzIGtleWVkIGJ5IGRvY3VtZW50IHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYXR0cnMudG9rZW5TZXQgLSBBbiBzZXQgb2YgYWxsIGNvcnB1cyB0b2tlbnMuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRycy5maWVsZHMgLSBUaGUgbmFtZXMgb2YgaW5kZXhlZCBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmV9IGF0dHJzLnBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHRvIHVzZSBmb3Igc2VhcmNoIHRlcm1zLlxuICovXG5sdW5yLkluZGV4ID0gZnVuY3Rpb24gKGF0dHJzKSB7XG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IGF0dHJzLmludmVydGVkSW5kZXg7XG4gIHRoaXMuZmllbGRWZWN0b3JzID0gYXR0cnMuZmllbGRWZWN0b3JzO1xuICB0aGlzLnRva2VuU2V0ID0gYXR0cnMudG9rZW5TZXQ7XG4gIHRoaXMuZmllbGRzID0gYXR0cnMuZmllbGRzO1xuICB0aGlzLnBpcGVsaW5lID0gYXR0cnMucGlwZWxpbmU7XG59O1xuXG4vKipcbiAqIEEgcmVzdWx0IGNvbnRhaW5zIGRldGFpbHMgb2YgYSBkb2N1bWVudCBtYXRjaGluZyBhIHNlYXJjaCBxdWVyeS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IGx1bnIuSW5kZXh+UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcmVmIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdGhpcyByZXN1bHQgcmVwcmVzZW50cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzY29yZSAtIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgaG93IHNpbWlsYXIgdGhpcyBkb2N1bWVudCBpcyB0byB0aGUgcXVlcnkuXG4gKiBAcHJvcGVydHkge2x1bnIuTWF0Y2hEYXRhfSBtYXRjaERhdGEgLSBDb250YWlucyBtZXRhZGF0YSBhYm91dCB0aGlzIG1hdGNoIGluY2x1ZGluZyB3aGljaCB0ZXJtKHMpIGNhdXNlZCB0aGUgbWF0Y2guXG4gKi9cblxuLyoqXG4gKiBBbHRob3VnaCBsdW5yIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGNyZWF0ZSBxdWVyaWVzIHVzaW5nIGx1bnIuUXVlcnksIGl0IGFsc28gcHJvdmlkZXMgYSBzaW1wbGVcbiAqIHF1ZXJ5IGxhbmd1YWdlIHdoaWNoIGl0c2VsZiBpcyBwYXJzZWQgaW50byBhbiBpbnN0YW5jZSBvZiBsdW5yLlF1ZXJ5LlxuICpcbiAqIEZvciBwcm9ncmFtbWF0aWNhbGx5IGJ1aWxkaW5nIHF1ZXJpZXMgaXQgaXMgYWR2aXNlZCB0byBkaXJlY3RseSB1c2UgbHVuci5RdWVyeSwgdGhlIHF1ZXJ5IGxhbmd1YWdlXG4gKiBpcyBiZXN0IHVzZWQgZm9yIGh1bWFuIGVudGVyZWQgdGV4dCByYXRoZXIgdGhhbiBwcm9ncmFtIGdlbmVyYXRlZCB0ZXh0LlxuICpcbiAqIEF0IGl0cyBzaW1wbGVzdCBxdWVyaWVzIGNhbiBqdXN0IGJlIGEgc2luZ2xlIHRlcm0sIGUuZy4gYGhlbGxvYCwgbXVsdGlwbGUgdGVybXMgYXJlIGFsc28gc3VwcG9ydGVkXG4gKiBhbmQgd2lsbCBiZSBjb21iaW5lZCB3aXRoIE9SLCBlLmcgYGhlbGxvIHdvcmxkYCB3aWxsIG1hdGNoIGRvY3VtZW50cyB0aGF0IGNvbnRhaW4gZWl0aGVyICdoZWxsbydcbiAqIG9yICd3b3JsZCcsIHRob3VnaCB0aG9zZSB0aGF0IGNvbnRhaW4gYm90aCB3aWxsIHJhbmsgaGlnaGVyIGluIHRoZSByZXN1bHRzLlxuICpcbiAqIFdpbGRjYXJkcyBjYW4gYmUgaW5jbHVkZWQgaW4gdGVybXMgdG8gbWF0Y2ggb25lIG9yIG1vcmUgdW5zcGVjaWZpZWQgY2hhcmFjdGVycywgdGhlc2Ugd2lsZGNhcmRzIGNhblxuICogYmUgaW5zZXJ0ZWQgYW55d2hlcmUgd2l0aGluIHRoZSB0ZXJtLCBhbmQgbW9yZSB0aGFuIG9uZSB3aWxkY2FyZCBjYW4gZXhpc3QgaW4gYSBzaW5nbGUgdGVybS4gQWRkaW5nXG4gKiB3aWxkY2FyZHMgd2lsbCBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHdpbGwgYmUgZm91bmQgYnV0IGNhbiBhbHNvIGhhdmUgYSBuZWdhdGl2ZVxuICogaW1wYWN0IG9uIHF1ZXJ5IHBlcmZvcm1hbmNlLCBlc3BlY2lhbGx5IHdpdGggd2lsZGNhcmRzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSB0ZXJtLlxuICpcbiAqIFRlcm1zIGNhbiBiZSByZXN0cmljdGVkIHRvIHNwZWNpZmljIGZpZWxkcywgZS5nLiBgdGl0bGU6aGVsbG9gLCBvbmx5IGRvY3VtZW50cyB3aXRoIHRoZSB0ZXJtXG4gKiBoZWxsbyBpbiB0aGUgdGl0bGUgZmllbGQgd2lsbCBtYXRjaCB0aGlzIHF1ZXJ5LiBVc2luZyBhIGZpZWxkIG5vdCBwcmVzZW50IGluIHRoZSBpbmRleCB3aWxsIGxlYWRcbiAqIHRvIGFuIGVycm9yIGJlaW5nIHRocm93bi5cbiAqXG4gKiBNb2RpZmllcnMgY2FuIGFsc28gYmUgYWRkZWQgdG8gdGVybXMsIGx1bnIgc3VwcG9ydHMgZWRpdCBkaXN0YW5jZSBhbmQgYm9vc3QgbW9kaWZpZXJzIG9uIHRlcm1zLiBBIHRlcm1cbiAqIGJvb3N0IHdpbGwgbWFrZSBkb2N1bWVudHMgbWF0Y2hpbmcgdGhhdCB0ZXJtIHNjb3JlIGhpZ2hlciwgZS5nLiBgZm9vXjVgLiBFZGl0IGRpc3RhbmNlIGlzIGFsc28gc3VwcG9ydGVkXG4gKiB0byBwcm92aWRlIGZ1enp5IG1hdGNoaW5nLCBlLmcuICdoZWxsb34yJyB3aWxsIG1hdGNoIGRvY3VtZW50cyB3aXRoIGhlbGxvIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyLlxuICogQXZvaWQgbGFyZ2UgdmFsdWVzIGZvciBlZGl0IGRpc3RhbmNlIHRvIGltcHJvdmUgcXVlcnkgcGVyZm9ybWFuY2UuXG4gKlxuICogVG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgYmFja3NsYXNoIGNoYXJhY3RlciAnXFwnIGNhbiBiZSB1c2VkLCB0aGlzIGFsbG93cyBzZWFyY2hlcyB0byBpbmNsdWRlXG4gKiBjaGFyYWN0ZXJzIHRoYXQgd291bGQgbm9ybWFsbHkgYmUgY29uc2lkZXJlZCBtb2RpZmllcnMsIGUuZy4gYGZvb1xcfjJgIHdpbGwgc2VhcmNoIGZvciBhIHRlcm0gXCJmb29+MlwiIGluc3RlYWRcbiAqIG9mIGF0dGVtcHRpbmcgdG8gYXBwbHkgYSBib29zdCBvZiAyIHRvIHRoZSBzZWFyY2ggdGVybSBcImZvb1wiLlxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd9IGx1bnIuSW5kZXh+UXVlcnlTdHJpbmdcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlNpbXBsZSBzaW5nbGUgdGVybSBxdWVyeTwvY2FwdGlvbj5cbiAqIGhlbGxvXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NdWx0aXBsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICogaGVsbG8gd29ybGRcbiAqIEBleGFtcGxlIDxjYXB0aW9uPnRlcm0gc2NvcGVkIHRvIGEgZmllbGQ8L2NhcHRpb24+XG4gKiB0aXRsZTpoZWxsb1xuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSB3aXRoIGEgYm9vc3Qgb2YgMTA8L2NhcHRpb24+XG4gKiBoZWxsb14xMFxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMjwvY2FwdGlvbj5cbiAqIGhlbGxvfjJcbiAqL1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgc2VhcmNoIGFnYWluc3QgdGhlIGluZGV4IHVzaW5nIGx1bnIgcXVlcnkgc3ludGF4LlxuICpcbiAqIFJlc3VsdHMgd2lsbCBiZSByZXR1cm5lZCBzb3J0ZWQgYnkgdGhlaXIgc2NvcmUsIHRoZSBtb3N0IHJlbGV2YW50IHJlc3VsdHNcbiAqIHdpbGwgYmUgcmV0dXJuZWQgZmlyc3QuXG4gKlxuICogRm9yIG1vcmUgcHJvZ3JhbW1hdGljIHF1ZXJ5aW5nIHVzZSBsdW5yLkluZGV4I3F1ZXJ5LlxuICpcbiAqIEBwYXJhbSB7bHVuci5JbmRleH5RdWVyeVN0cmluZ30gcXVlcnlTdHJpbmcgLSBBIHN0cmluZyBjb250YWluaW5nIGEgbHVuciBxdWVyeS5cbiAqIEB0aHJvd3Mge2x1bnIuUXVlcnlQYXJzZUVycm9yfSBJZiB0aGUgcGFzc2VkIHF1ZXJ5IHN0cmluZyBjYW5ub3QgYmUgcGFyc2VkLlxuICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChxdWVyeVN0cmluZykge1xuICByZXR1cm4gdGhpcy5xdWVyeShmdW5jdGlvbiAocXVlcnkpIHtcbiAgICB2YXIgcGFyc2VyID0gbmV3IGx1bnIuUXVlcnlQYXJzZXIocXVlcnlTdHJpbmcsIHF1ZXJ5KTtcbiAgICBwYXJzZXIucGFyc2UoKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIEEgcXVlcnkgYnVpbGRlciBjYWxsYmFjayBwcm92aWRlcyBhIHF1ZXJ5IG9iamVjdCB0byBiZSB1c2VkIHRvIGV4cHJlc3NcbiAqIHRoZSBxdWVyeSB0byBwZXJmb3JtIG9uIHRoZSBpbmRleC5cbiAqXG4gKiBAY2FsbGJhY2sgbHVuci5JbmRleH5xdWVyeUJ1aWxkZXJcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX0gcXVlcnkgLSBUaGUgcXVlcnkgb2JqZWN0IHRvIGJ1aWxkIHVwLlxuICogQHRoaXMgbHVuci5RdWVyeVxuICovXG5cbi8qKlxuICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBpbmRleCB1c2luZyB0aGUgeWllbGRlZCBsdW5yLlF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBJZiBwZXJmb3JtaW5nIHByb2dyYW1tYXRpYyBxdWVyaWVzIGFnYWluc3QgdGhlIGluZGV4LCB0aGlzIG1ldGhvZCBpcyBwcmVmZXJyZWRcbiAqIG92ZXIgbHVuci5JbmRleCNzZWFyY2ggc28gYXMgdG8gYXZvaWQgdGhlIGFkZGl0aW9uYWwgcXVlcnkgcGFyc2luZyBvdmVyaGVhZC5cbiAqXG4gKiBBIHF1ZXJ5IG9iamVjdCBpcyB5aWVsZGVkIHRvIHRoZSBzdXBwbGllZCBmdW5jdGlvbiB3aGljaCBzaG91bGQgYmUgdXNlZCB0b1xuICogZXhwcmVzcyB0aGUgcXVlcnkgdG8gYmUgcnVuIGFnYWluc3QgdGhlIGluZGV4LlxuICpcbiAqIE5vdGUgdGhhdCBhbHRob3VnaCB0aGlzIGZ1bmN0aW9uIHRha2VzIGEgY2FsbGJhY2sgcGFyYW1ldGVyIGl0IGlzIF9ub3RfIGFuXG4gKiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLCB0aGUgY2FsbGJhY2sgaXMganVzdCB5aWVsZGVkIGEgcXVlcnkgb2JqZWN0IHRvIGJlXG4gKiBjdXN0b21pemVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5JbmRleH5xdWVyeUJ1aWxkZXJ9IGZuIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gYnVpbGQgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGZuKSB7XG4gIC8vIGZvciBlYWNoIHF1ZXJ5IGNsYXVzZVxuICAvLyAqIHByb2Nlc3MgdGVybXNcbiAgLy8gKiBleHBhbmQgdGVybXMgZnJvbSB0b2tlbiBzZXRcbiAgLy8gKiBmaW5kIG1hdGNoaW5nIGRvY3VtZW50cyBhbmQgbWV0YWRhdGFcbiAgLy8gKiBnZXQgZG9jdW1lbnQgdmVjdG9yc1xuICAvLyAqIHNjb3JlIGRvY3VtZW50c1xuXG4gIHZhciBxdWVyeSA9IG5ldyBsdW5yLlF1ZXJ5KHRoaXMuZmllbGRzKSxcbiAgICAgIG1hdGNoaW5nRmllbGRzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHF1ZXJ5VmVjdG9ycyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICB0ZXJtRmllbGRDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm4uY2FsbChxdWVyeSwgcXVlcnkpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVlcnkuY2xhdXNlcy5sZW5ndGg7IGkrKykge1xuICAgIC8qXG4gICAgICogVW5sZXNzIHRoZSBwaXBlbGluZSBoYXMgYmVlbiBkaXNhYmxlZCBmb3IgdGhpcyB0ZXJtLCB3aGljaCBpc1xuICAgICAqIHRoZSBjYXNlIGZvciB0ZXJtcyB3aXRoIHdpbGRjYXJkcywgd2UgbmVlZCB0byBwYXNzIHRoZSBjbGF1c2VcbiAgICAgKiB0ZXJtIHRocm91Z2ggdGhlIHNlYXJjaCBwaXBlbGluZS4gQSBwaXBlbGluZSByZXR1cm5zIGFuIGFycmF5XG4gICAgICogb2YgcHJvY2Vzc2VkIHRlcm1zLiBQaXBlbGluZSBmdW5jdGlvbnMgbWF5IGV4cGFuZCB0aGUgcGFzc2VkXG4gICAgICogdGVybSwgd2hpY2ggbWVhbnMgd2UgbWF5IGVuZCB1cCBwZXJmb3JtaW5nIG11bHRpcGxlIGluZGV4IGxvb2t1cHNcbiAgICAgKiBmb3IgYSBzaW5nbGUgcXVlcnkgdGVybS5cbiAgICAgKi9cbiAgICB2YXIgY2xhdXNlID0gcXVlcnkuY2xhdXNlc1tpXSxcbiAgICAgICAgdGVybXMgPSBudWxsO1xuXG4gICAgaWYgKGNsYXVzZS51c2VQaXBlbGluZSkge1xuICAgICAgdGVybXMgPSB0aGlzLnBpcGVsaW5lLnJ1blN0cmluZyhjbGF1c2UudGVybSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlcm1zID0gW2NsYXVzZS50ZXJtXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IHRlcm1zLmxlbmd0aDsgbSsrKSB7XG4gICAgICB2YXIgdGVybSA9IHRlcm1zW21dO1xuXG4gICAgICAvKlxuICAgICAgICogRWFjaCB0ZXJtIHJldHVybmVkIGZyb20gdGhlIHBpcGVsaW5lIG5lZWRzIHRvIHVzZSB0aGUgc2FtZSBxdWVyeVxuICAgICAgICogY2xhdXNlIG9iamVjdCwgZS5nLiB0aGUgc2FtZSBib29zdCBhbmQgb3IgZWRpdCBkaXN0YW5jZS4gVGhlXG4gICAgICAgKiBzaW1wbGVzdCB3YXkgdG8gZG8gdGhpcyBpcyB0byByZS11c2UgdGhlIGNsYXVzZSBvYmplY3QgYnV0IG11dGF0ZVxuICAgICAgICogaXRzIHRlcm0gcHJvcGVydHkuXG4gICAgICAgKi9cblxuICAgICAgY2xhdXNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjbGF1c2UpKTtcbiAgICAgIGNsYXVzZS50ZXJtID0gdGVybTtcblxuICAgICAgLypcbiAgICAgICAqIEZyb20gdGhlIHRlcm0gaW4gdGhlIGNsYXVzZSB3ZSBjcmVhdGUgYSB0b2tlbiBzZXQgd2hpY2ggd2lsbCB0aGVuXG4gICAgICAgKiBiZSB1c2VkIHRvIGludGVyc2VjdCB0aGUgaW5kZXhlcyB0b2tlbiBzZXQgdG8gZ2V0IGEgbGlzdCBvZiB0ZXJtc1xuICAgICAgICogdG8gbG9va3VwIGluIHRoZSBpbnZlcnRlZCBpbmRleFxuICAgICAgICovXG4gICAgICB2YXIgdGVybVRva2VuU2V0ID0gbHVuci5Ub2tlblNldC5mcm9tQ2xhdXNlKGNsYXVzZSksXG4gICAgICAgICAgZXhwYW5kZWRUZXJtcyA9IHRoaXMudG9rZW5TZXQuaW50ZXJzZWN0KHRlcm1Ub2tlblNldCkudG9BcnJheSgpO1xuXG4gICAgICB2YXIgdGVybUluZGV4O1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHBhbmRlZFRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEZvciBlYWNoIHRlcm0gZ2V0IHRoZSBwb3N0aW5nIGFuZCB0ZXJtSW5kZXgsIHRoaXMgaXMgcmVxdWlyZWQgZm9yXG4gICAgICAgICAqIGJ1aWxkaW5nIHRoZSBxdWVyeSB2ZWN0b3IuXG4gICAgICAgICAqL1xuICAgICAgICAgIHZhciBleHBhbmRlZFRlcm0gPSBleHBhbmRlZFRlcm1zW2pdO1xuICAgICAgICAgIHZhciBwb3N0aW5nID0gdGhpcy5pbnZlcnRlZEluZGV4W2V4cGFuZGVkVGVybV07XG4gICAgICAgICAgaWYgKHBvc3RpbmcpIHtcbiAgICAgICAgICAgICAgdGVybUluZGV4ID0gcG9zdGluZy5faW5kZXg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNsYXVzZS5maWVsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIEZvciBlYWNoIGZpZWxkIHRoYXQgdGhpcyBxdWVyeSB0ZXJtIGlzIHNjb3BlZCBieSAoYnkgZGVmYXVsdFxuICAgICAgICAgICAqIGFsbCBmaWVsZHMgYXJlIGluIHNjb3BlKSB3ZSBuZWVkIHRvIGdldCBhbGwgdGhlIGRvY3VtZW50IHJlZnNcbiAgICAgICAgICAgKiB0aGF0IGhhdmUgdGhpcyB0ZXJtIGluIHRoYXQgZmllbGQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUaGUgcG9zdGluZyBpcyB0aGUgZW50cnkgaW4gdGhlIGludmVydGVkSW5kZXggZm9yIHRoZSBtYXRjaGluZ1xuICAgICAgICAgICAqIHRlcm0gZnJvbSBhYm92ZS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICB2YXIgZmllbGQgPSBjbGF1c2UuZmllbGRzW2tdLFxuICAgICAgICAgICAgICBmaWVsZFBvc3RpbmcgPSBwb3N0aW5nW2ZpZWxkXSxcbiAgICAgICAgICAgICAgbWF0Y2hpbmdEb2N1bWVudFJlZnMgPSBPYmplY3Qua2V5cyhmaWVsZFBvc3RpbmcpLFxuICAgICAgICAgICAgICB0ZXJtRmllbGQgPSBleHBhbmRlZFRlcm0gKyBcIi9cIiArIGZpZWxkO1xuXG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBUbyBzdXBwb3J0IGZpZWxkIGxldmVsIGJvb3N0cyBhIHF1ZXJ5IHZlY3RvciBpcyBjcmVhdGVkIHBlclxuICAgICAgICAgICAqIGZpZWxkLiBUaGlzIHZlY3RvciBpcyBwb3B1bGF0ZWQgdXNpbmcgdGhlIHRlcm1JbmRleCBmb3VuZCBmb3JcbiAgICAgICAgICAgKiB0aGUgdGVybSBhbmQgYSB1bml0IHZhbHVlIHdpdGggdGhlIGFwcHJvcHJpYXRlIGJvb3N0IGFwcGxpZWQuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBJZiB0aGUgcXVlcnkgdmVjdG9yIGZvciB0aGlzIGZpZWxkIGRvZXMgbm90IGV4aXN0IHlldCBpdCBuZWVkc1xuICAgICAgICAgICAqIHRvIGJlIGNyZWF0ZWQuXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKHF1ZXJ5VmVjdG9yc1tmaWVsZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXSA9IG5ldyBsdW5yLlZlY3RvcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8qXG4gICAgICAgICAgICogVXNpbmcgdXBzZXJ0IGJlY2F1c2UgdGhlcmUgY291bGQgYWxyZWFkeSBiZSBhbiBlbnRyeSBpbiB0aGUgdmVjdG9yXG4gICAgICAgICAgICogZm9yIHRoZSB0ZXJtIHdlIGFyZSB3b3JraW5nIHdpdGguIEluIHRoYXQgY2FzZSB3ZSBqdXN0IGFkZCB0aGUgc2NvcmVzXG4gICAgICAgICAgICogdG9nZXRoZXIuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXS51cHNlcnQodGVybUluZGV4LCAxICogY2xhdXNlLmJvb3N0LCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSArIGI7IH0pO1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSWYgd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgdGVybSwgZmllbGQgY29tYm8gdGhlbiB3ZSd2ZSBhbHJlYWR5IGNvbGxlY3RlZFxuICAgICAgICAgICAqIHRoZSBtYXRjaGluZyBkb2N1bWVudHMgYW5kIG1ldGFkYXRhLCBubyBuZWVkIHRvIGdvIHRocm91Z2ggYWxsIHRoYXQgYWdhaW5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGVybUZpZWxkQ2FjaGVbdGVybUZpZWxkXSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBtYXRjaGluZ0RvY3VtZW50UmVmcy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIEFsbCBtZXRhZGF0YSBmb3IgdGhpcyB0ZXJtL2ZpZWxkL2RvY3VtZW50IHRyaXBsZVxuICAgICAgICAgICAgICogYXJlIHRoZW4gZXh0cmFjdGVkIGFuZCBjb2xsZWN0ZWQgaW50byBhbiBpbnN0YW5jZVxuICAgICAgICAgICAgICogb2YgbHVuci5NYXRjaERhdGEgcmVhZHkgdG8gYmUgcmV0dXJuZWQgaW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgKiByZXN1bHRzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBtYXRjaGluZ0RvY3VtZW50UmVmID0gbWF0Y2hpbmdEb2N1bWVudFJlZnNbbF0sXG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdGaWVsZFJlZiA9IG5ldyBsdW5yLkZpZWxkUmVmIChtYXRjaGluZ0RvY3VtZW50UmVmLCBmaWVsZCksXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBmaWVsZFBvc3RpbmdbbWF0Y2hpbmdEb2N1bWVudFJlZl0sXG4gICAgICAgICAgICAgICAgZmllbGRNYXRjaDtcblxuICAgICAgICAgICAgaWYgKChmaWVsZE1hdGNoID0gbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0pID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0gPSBuZXcgbHVuci5NYXRjaERhdGEgKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpZWxkTWF0Y2guYWRkKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRlcm1GaWVsZENhY2hlW3Rlcm1GaWVsZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG1hdGNoaW5nRmllbGRSZWZzID0gT2JqZWN0LmtleXMobWF0Y2hpbmdGaWVsZHMpLFxuICAgICAgcmVzdWx0cyA9IFtdLFxuICAgICAgbWF0Y2hlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm9yICggaSA9IDA7IGkgPCBtYXRjaGluZ0ZpZWxkUmVmcy5sZW5ndGg7IGkrKykge1xuICAgIC8qXG4gICAgICogQ3VycmVudGx5IHdlIGhhdmUgZG9jdW1lbnQgZmllbGRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5LCBidXQgd2VcbiAgICAgKiBuZWVkIHRvIHJldHVybiBkb2N1bWVudHMuIFRoZSBtYXRjaERhdGEgYW5kIHNjb3JlcyBhcmUgY29tYmluZWRcbiAgICAgKiBmcm9tIG11bHRpcGxlIGZpZWxkcyBiZWxvbmdpbmcgdG8gdGhlIHNhbWUgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBTY29yZXMgYXJlIGNhbGN1bGF0ZWQgYnkgZmllbGQsIHVzaW5nIHRoZSBxdWVyeSB2ZWN0b3JzIGNyZWF0ZWRcbiAgICAgKiBhYm92ZSwgYW5kIGNvbWJpbmVkIGludG8gYSBmaW5hbCBkb2N1bWVudCBzY29yZSB1c2luZyBhZGRpdGlvbi5cbiAgICAgKi9cbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcobWF0Y2hpbmdGaWVsZFJlZnNbaV0pLFxuICAgICAgICBkb2NSZWYgPSBmaWVsZFJlZi5kb2NSZWYsXG4gICAgICAgIGZpZWxkVmVjdG9yID0gdGhpcy5maWVsZFZlY3RvcnNbZmllbGRSZWZdLFxuICAgICAgICBzY29yZSA9IHF1ZXJ5VmVjdG9yc1tmaWVsZFJlZi5maWVsZE5hbWVdLnNpbWlsYXJpdHkoZmllbGRWZWN0b3IpLFxuICAgICAgICBkb2NNYXRjaDtcblxuICAgIGlmICgoZG9jTWF0Y2ggPSBtYXRjaGVzW2RvY1JlZl0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRvY01hdGNoLnNjb3JlICs9IHNjb3JlO1xuICAgICAgZG9jTWF0Y2gubWF0Y2hEYXRhLmNvbWJpbmUobWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1hdGNoID0ge1xuICAgICAgICByZWY6IGRvY1JlZixcbiAgICAgICAgc2NvcmU6IHNjb3JlLFxuICAgICAgICBtYXRjaERhdGE6IG1hdGNoaW5nRmllbGRzW2ZpZWxkUmVmXVxuICAgICAgfTtcbiAgICAgIG1hdGNoZXNbZG9jUmVmXSA9IG1hdGNoO1xuICAgICAgcmVzdWx0cy5wdXNoKG1hdGNoKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBTb3J0IHRoZSByZXN1bHRzIG9iamVjdHMgYnkgc2NvcmUsIGhpZ2hlc3QgZmlyc3QuXG4gICAqL1xuICByZXR1cm4gcmVzdWx0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICB9KTtcbn07XG5cbi8qKlxuICogUHJlcGFyZXMgdGhlIGluZGV4IGZvciBKU09OIHNlcmlhbGl6YXRpb24uXG4gKlxuICogVGhlIHNjaGVtYSBmb3IgdGhpcyBKU09OIGJsb2Igd2lsbCBiZSBkZXNjcmliZWQgaW4gYVxuICogc2VwYXJhdGUgSlNPTiBzY2hlbWEgZmlsZS5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5sdW5yLkluZGV4LnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpbnZlcnRlZEluZGV4ID0gT2JqZWN0LmtleXModGhpcy5pbnZlcnRlZEluZGV4KVxuICAgIC5zb3J0KClcbiAgICAubWFwKGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICByZXR1cm4gW3Rlcm0sIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXV07XG4gICAgfSwgdGhpcyk7XG5cbiAgdmFyIGZpZWxkVmVjdG9ycyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRWZWN0b3JzKVxuICAgIC5tYXAoZnVuY3Rpb24gKHJlZikge1xuICAgICAgcmV0dXJuIFtyZWYsIHRoaXMuZmllbGRWZWN0b3JzW3JlZl0udG9KU09OKCldO1xuICAgIH0sIHRoaXMpO1xuXG4gIHJldHVybiB7XG4gICAgdmVyc2lvbjogbHVuci52ZXJzaW9uLFxuICAgIGZpZWxkczogdGhpcy5maWVsZHMsXG4gICAgZmllbGRWZWN0b3JzOiBmaWVsZFZlY3RvcnMsXG4gICAgaW52ZXJ0ZWRJbmRleDogaW52ZXJ0ZWRJbmRleCxcbiAgICBwaXBlbGluZTogdGhpcy5waXBlbGluZS50b0pTT04oKVxuICB9O1xufTtcblxuLyoqXG4gKiBMb2FkcyBhIHByZXZpb3VzbHkgc2VyaWFsaXplZCBsdW5yLkluZGV4XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlcmlhbGl6ZWRJbmRleCAtIEEgcHJldmlvdXNseSBzZXJpYWxpemVkIGx1bnIuSW5kZXhcbiAqIEByZXR1cm5zIHtsdW5yLkluZGV4fVxuICovXG5sdW5yLkluZGV4LmxvYWQgPSBmdW5jdGlvbiAoc2VyaWFsaXplZEluZGV4KSB7XG4gIHZhciBhdHRycyA9IHt9LFxuICAgICAgZmllbGRWZWN0b3JzID0ge30sXG4gICAgICBzZXJpYWxpemVkVmVjdG9ycyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZFZlY3RvcnMsXG4gICAgICBpbnZlcnRlZEluZGV4ID0ge30sXG4gICAgICBzZXJpYWxpemVkSW52ZXJ0ZWRJbmRleCA9IHNlcmlhbGl6ZWRJbmRleC5pbnZlcnRlZEluZGV4LFxuICAgICAgdG9rZW5TZXRCdWlsZGVyID0gbmV3IGx1bnIuVG9rZW5TZXQuQnVpbGRlcigpLFxuICAgICAgcGlwZWxpbmUgPSBsdW5yLlBpcGVsaW5lLmxvYWQoc2VyaWFsaXplZEluZGV4LnBpcGVsaW5lKTtcblxuICBpZiAoc2VyaWFsaXplZEluZGV4LnZlcnNpb24gIT0gbHVuci52ZXJzaW9uKSB7XG4gICAgbHVuci51dGlscy53YXJuKFwiVmVyc2lvbiBtaXNtYXRjaCB3aGVuIGxvYWRpbmcgc2VyaWFsaXNlZCBpbmRleC4gQ3VycmVudCB2ZXJzaW9uIG9mIGx1bnIgJ1wiICsgbHVuci52ZXJzaW9uICsgXCInIGRvZXMgbm90IG1hdGNoIHNlcmlhbGl6ZWQgaW5kZXggJ1wiICsgc2VyaWFsaXplZEluZGV4LnZlcnNpb24gKyBcIidcIik7XG4gIH1cblxuICB2YXIgdHVwbGU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2VyaWFsaXplZFZlY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICB0dXBsZSA9IHNlcmlhbGl6ZWRWZWN0b3JzW2ldO1xuICAgIHJlZiA9IHR1cGxlWzBdO1xuICAgIGVsZW1lbnRzID0gdHVwbGVbMV07XG5cbiAgICBmaWVsZFZlY3RvcnNbcmVmXSA9IG5ldyBsdW5yLlZlY3RvcihlbGVtZW50cyk7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgc2VyaWFsaXplZEludmVydGVkSW5kZXgubGVuZ3RoOyBpKyspIHtcbiAgICB0dXBsZSA9IHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4W2ldO1xuICAgIHRlcm0gPSB0dXBsZVswXTtcbiAgICBwb3N0aW5nID0gdHVwbGVbMV07XG5cbiAgICB0b2tlblNldEJ1aWxkZXIuaW5zZXJ0KHRlcm0pO1xuICAgIGludmVydGVkSW5kZXhbdGVybV0gPSBwb3N0aW5nO1xuICB9XG5cbiAgdG9rZW5TZXRCdWlsZGVyLmZpbmlzaCgpO1xuXG4gIGF0dHJzLmZpZWxkcyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZHM7XG5cbiAgYXR0cnMuZmllbGRWZWN0b3JzID0gZmllbGRWZWN0b3JzO1xuICBhdHRycy5pbnZlcnRlZEluZGV4ID0gaW52ZXJ0ZWRJbmRleDtcbiAgYXR0cnMudG9rZW5TZXQgPSB0b2tlblNldEJ1aWxkZXIucm9vdDtcbiAgYXR0cnMucGlwZWxpbmUgPSBwaXBlbGluZTtcblxuICByZXR1cm4gbmV3IGx1bnIuSW5kZXgoYXR0cnMpO1xufTtcbi8qIVxuICogbHVuci5CdWlsZGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTcgT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLkJ1aWxkZXIgcGVyZm9ybXMgaW5kZXhpbmcgb24gYSBzZXQgb2YgZG9jdW1lbnRzIGFuZFxuICogcmV0dXJucyBpbnN0YW5jZXMgb2YgbHVuci5JbmRleCByZWFkeSBmb3IgcXVlcnlpbmcuXG4gKlxuICogQWxsIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGluZGV4IGlzIGRvbmUgdmlhIHRoZSBidWlsZGVyLCB0aGVcbiAqIGZpZWxkcyB0byBpbmRleCwgdGhlIGRvY3VtZW50IHJlZmVyZW5jZSwgdGhlIHRleHQgcHJvY2Vzc2luZ1xuICogcGlwZWxpbmUgYW5kIGRvY3VtZW50IHNjb3JpbmcgcGFyYW1ldGVycyBhcmUgYWxsIHNldCBvbiB0aGVcbiAqIGJ1aWxkZXIgYmVmb3JlIGluZGV4aW5nLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByb3BlcnR5IHtzdHJpbmd9IF9yZWYgLSBJbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHJlZmVyZW5jZSBmaWVsZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IF9maWVsZHMgLSBJbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IGZpZWxkcyB0byBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBpbnZlcnRlZEluZGV4IC0gVGhlIGludmVydGVkIGluZGV4IG1hcHMgdGVybXMgdG8gZG9jdW1lbnQgZmllbGRzLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGRvY3VtZW50VGVybUZyZXF1ZW5jaWVzIC0gS2VlcHMgdHJhY2sgb2YgZG9jdW1lbnQgdGVybSBmcmVxdWVuY2llcy5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBkb2N1bWVudExlbmd0aHMgLSBLZWVwcyB0cmFjayBvZiB0aGUgbGVuZ3RoIG9mIGRvY3VtZW50cyBhZGRlZCB0byB0aGUgaW5kZXguXG4gKiBAcHJvcGVydHkge2x1bnIudG9rZW5pemVyfSB0b2tlbml6ZXIgLSBGdW5jdGlvbiBmb3Igc3BsaXR0aW5nIHN0cmluZ3MgaW50byB0b2tlbnMgZm9yIGluZGV4aW5nLlxuICogQHByb3BlcnR5IHtsdW5yLlBpcGVsaW5lfSBwaXBlbGluZSAtIFRoZSBwaXBlbGluZSBwZXJmb3JtcyB0ZXh0IHByb2Nlc3Npbmcgb24gdG9rZW5zIGJlZm9yZSBpbmRleGluZy5cbiAqIEBwcm9wZXJ0eSB7bHVuci5QaXBlbGluZX0gc2VhcmNoUGlwZWxpbmUgLSBBIHBpcGVsaW5lIGZvciBwcm9jZXNzaW5nIHNlYXJjaCB0ZXJtcyBiZWZvcmUgcXVlcnlpbmcgdGhlIGluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRvY3VtZW50Q291bnQgLSBLZWVwcyB0cmFjayBvZiB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyBpbmRleGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IF9iIC0gQSBwYXJhbWV0ZXIgdG8gY29udHJvbCBmaWVsZCBsZW5ndGggbm9ybWFsaXphdGlvbiwgc2V0dGluZyB0aGlzIHRvIDAgZGlzYWJsZWQgbm9ybWFsaXphdGlvbiwgMSBmdWxseSBub3JtYWxpemVzIGZpZWxkIGxlbmd0aHMsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDAuNzUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gX2sxIC0gQSBwYXJhbWV0ZXIgdG8gY29udHJvbCBob3cgcXVpY2tseSBhbiBpbmNyZWFzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm0gZnJlcXVlbmN5IHNhdHVyYXRpb24sIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDEuMi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0ZXJtSW5kZXggLSBBIGNvdW50ZXIgaW5jcmVtZW50ZWQgZm9yIGVhY2ggdW5pcXVlIHRlcm0sIHVzZWQgdG8gaWRlbnRpZnkgYSB0ZXJtcyBwb3NpdGlvbiBpbiB0aGUgdmVjdG9yIHNwYWNlLlxuICogQHByb3BlcnR5IHthcnJheX0gbWV0YWRhdGFXaGl0ZWxpc3QgLSBBIGxpc3Qgb2YgbWV0YWRhdGEga2V5cyB0aGF0IGhhdmUgYmVlbiB3aGl0ZWxpc3RlZCBmb3IgZW50cnkgaW4gdGhlIGluZGV4LlxuICovXG5sdW5yLkJ1aWxkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX3JlZiA9IFwiaWRcIjtcbiAgdGhpcy5fZmllbGRzID0gW107XG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMgPSB7fTtcbiAgdGhpcy5maWVsZExlbmd0aHMgPSB7fTtcbiAgdGhpcy50b2tlbml6ZXIgPSBsdW5yLnRva2VuaXplcjtcbiAgdGhpcy5waXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lKCk7XG4gIHRoaXMuc2VhcmNoUGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZSgpO1xuICB0aGlzLmRvY3VtZW50Q291bnQgPSAwO1xuICB0aGlzLl9iID0gMC43NTtcbiAgdGhpcy5fazEgPSAxLjI7XG4gIHRoaXMudGVybUluZGV4ID0gMDtcbiAgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdCA9IFtdO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBkb2N1bWVudCBmaWVsZCB1c2VkIGFzIHRoZSBkb2N1bWVudCByZWZlcmVuY2UuIEV2ZXJ5IGRvY3VtZW50IG11c3QgaGF2ZSB0aGlzIGZpZWxkLlxuICogVGhlIHR5cGUgb2YgdGhpcyBmaWVsZCBpbiB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIGEgc3RyaW5nLCBpZiBpdCBpcyBub3QgYSBzdHJpbmcgaXQgd2lsbCBiZVxuICogY29lcmNlZCBpbnRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgdG9TdHJpbmcuXG4gKlxuICogVGhlIGRlZmF1bHQgcmVmIGlzICdpZCcuXG4gKlxuICogVGhlIHJlZiBzaG91bGQgX25vdF8gYmUgY2hhbmdlZCBkdXJpbmcgaW5kZXhpbmcsIGl0IHNob3VsZCBiZSBzZXQgYmVmb3JlIGFueSBkb2N1bWVudHMgYXJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguIENoYW5naW5nIGl0IGR1cmluZyBpbmRleGluZyBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbnQgcmVzdWx0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmIC0gVGhlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZSBmaWVsZCBpbiB0aGUgZG9jdW1lbnQuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKHJlZikge1xuICB0aGlzLl9yZWYgPSByZWY7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBmaWVsZCB0byB0aGUgbGlzdCBvZiBkb2N1bWVudCBmaWVsZHMgdGhhdCB3aWxsIGJlIGluZGV4ZWQuIEV2ZXJ5IGRvY3VtZW50IGJlaW5nXG4gKiBpbmRleGVkIHNob3VsZCBoYXZlIHRoaXMgZmllbGQuIE51bGwgdmFsdWVzIGZvciB0aGlzIGZpZWxkIGluIGluZGV4ZWQgZG9jdW1lbnRzIHdpbGxcbiAqIG5vdCBjYXVzZSBlcnJvcnMgYnV0IHdpbGwgbGltaXQgdGhlIGNoYW5jZSBvZiB0aGF0IGRvY3VtZW50IGJlaW5nIHJldHJpZXZlZCBieSBzZWFyY2hlcy5cbiAqXG4gKiBBbGwgZmllbGRzIHNob3VsZCBiZSBhZGRlZCBiZWZvcmUgYWRkaW5nIGRvY3VtZW50cyB0byB0aGUgaW5kZXguIEFkZGluZyBmaWVsZHMgYWZ0ZXJcbiAqIGEgZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZCB3aWxsIGhhdmUgbm8gZWZmZWN0IG9uIGFscmVhZHkgaW5kZXhlZCBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgYSBmaWVsZCB0byBpbmRleCBpbiBhbGwgZG9jdW1lbnRzLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XG4gIHRoaXMuX2ZpZWxkcy5wdXNoKGZpZWxkKTtcbn07XG5cbi8qKlxuICogQSBwYXJhbWV0ZXIgdG8gdHVuZSB0aGUgYW1vdW50IG9mIGZpZWxkIGxlbmd0aCBub3JtYWxpc2F0aW9uIHRoYXQgaXMgYXBwbGllZCB3aGVuXG4gKiBjYWxjdWxhdGluZyByZWxldmFuY2Ugc2NvcmVzLiBBIHZhbHVlIG9mIDAgd2lsbCBjb21wbGV0ZWx5IGRpc2FibGUgYW55IG5vcm1hbGlzYXRpb25cbiAqIGFuZCBhIHZhbHVlIG9mIDEgd2lsbCBmdWxseSBub3JtYWxpc2UgZmllbGQgbGVuZ3Rocy4gVGhlIGRlZmF1bHQgaXMgMC43NS4gVmFsdWVzIG9mIGJcbiAqIHdpbGwgYmUgY2xhbXBlZCB0byB0aGUgcmFuZ2UgMCAtIDEuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5iID0gZnVuY3Rpb24gKG51bWJlcikge1xuICBpZiAobnVtYmVyIDwgMCkge1xuICAgIHRoaXMuX2IgPSAwO1xuICB9IGVsc2UgaWYgKG51bWJlciA+IDEpIHtcbiAgICB0aGlzLl9iID0gMTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9iID0gbnVtYmVyO1xuICB9XG59O1xuXG4vKipcbiAqIEEgcGFyYW1ldGVyIHRoYXQgY29udHJvbHMgdGhlIHNwZWVkIGF0IHdoaWNoIGEgcmlzZSBpbiB0ZXJtIGZyZXF1ZW5jeSByZXN1bHRzIGluIHRlcm1cbiAqIGZyZXF1ZW5jeSBzYXR1cmF0aW9uLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyAxLjIuIFNldHRpbmcgdGhpcyB0byBhIGhpZ2hlciB2YWx1ZSB3aWxsIGdpdmVcbiAqIHNsb3dlciBzYXR1cmF0aW9uIGxldmVscywgYSBsb3dlciB2YWx1ZSB3aWxsIHJlc3VsdCBpbiBxdWlja2VyIHNhdHVyYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciAtIFRoZSB2YWx1ZSB0byBzZXQgZm9yIHRoaXMgdHVuaW5nIHBhcmFtZXRlci5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5rMSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgdGhpcy5fazEgPSBudW1iZXI7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBkb2N1bWVudCB0byB0aGUgaW5kZXguXG4gKlxuICogQmVmb3JlIGFkZGluZyBmaWVsZHMgdG8gdGhlIGluZGV4IHRoZSBpbmRleCBzaG91bGQgaGF2ZSBiZWVuIGZ1bGx5IHNldHVwLCB3aXRoIHRoZSBkb2N1bWVudFxuICogcmVmIGFuZCBhbGwgZmllbGRzIHRvIGluZGV4IGFscmVhZHkgaGF2aW5nIGJlZW4gc3BlY2lmaWVkLlxuICpcbiAqIFRoZSBkb2N1bWVudCBtdXN0IGhhdmUgYSBmaWVsZCBuYW1lIGFzIHNwZWNpZmllZCBieSB0aGUgcmVmIChieSBkZWZhdWx0IHRoaXMgaXMgJ2lkJykgYW5kXG4gKiBpdCBzaG91bGQgaGF2ZSBhbGwgZmllbGRzIGRlZmluZWQgZm9yIGluZGV4aW5nLCB0aG91Z2ggbnVsbCBvciB1bmRlZmluZWQgdmFsdWVzIHdpbGwgbm90XG4gKiBjYXVzZSBlcnJvcnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRvYyAtIFRoZSBkb2N1bWVudCB0byBhZGQgdG8gdGhlIGluZGV4LlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkb2MpIHtcbiAgdmFyIGRvY1JlZiA9IGRvY1t0aGlzLl9yZWZdO1xuXG4gIHRoaXMuZG9jdW1lbnRDb3VudCArPSAxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZpZWxkTmFtZSA9IHRoaXMuX2ZpZWxkc1tpXSxcbiAgICAgICAgZmllbGQgPSBkb2NbZmllbGROYW1lXSxcbiAgICAgICAgdG9rZW5zID0gdGhpcy50b2tlbml6ZXIoZmllbGQpLFxuICAgICAgICB0ZXJtcyA9IHRoaXMucGlwZWxpbmUucnVuKHRva2VucyksXG4gICAgICAgIGZpZWxkUmVmID0gbmV3IGx1bnIuRmllbGRSZWYgKGRvY1JlZiwgZmllbGROYW1lKSxcbiAgICAgICAgZmllbGRUZXJtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICB0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzW2ZpZWxkUmVmXSA9IGZpZWxkVGVybXM7XG4gICAgdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdID0gMDtcblxuICAgIC8vIHN0b3JlIHRoZSBsZW5ndGggb2YgdGhpcyBmaWVsZCBmb3IgdGhpcyBkb2N1bWVudFxuICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSArPSB0ZXJtcy5sZW5ndGg7XG5cbiAgICAvLyBjYWxjdWxhdGUgdGVybSBmcmVxdWVuY2llcyBmb3IgdGhpcyBmaWVsZFxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciB0ZXJtID0gdGVybXNbal07XG5cbiAgICAgIGlmIChmaWVsZFRlcm1zW3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmllbGRUZXJtc1t0ZXJtXSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGZpZWxkVGVybXNbdGVybV0gKz0gMTtcblxuICAgICAgLy8gYWRkIHRvIGludmVydGVkIGluZGV4XG4gICAgICAvLyBjcmVhdGUgYW4gaW5pdGlhbCBwb3N0aW5nIGlmIG9uZSBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHBvc3RpbmcgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBwb3N0aW5nLl9pbmRleCA9IHRoaXMudGVybUluZGV4O1xuICAgICAgICB0aGlzLnRlcm1JbmRleCArPSAxO1xuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgcG9zdGluZ1t0aGlzLl9maWVsZHNba11dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3Rpbmc7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCBhbiBlbnRyeSBmb3IgdGhpcyB0ZXJtL2ZpZWxkTmFtZS9kb2NSZWYgdG8gdGhlIGludmVydGVkSW5kZXhcbiAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHN0b3JlIGFsbCB3aGl0ZWxpc3RlZCBtZXRhZGF0YSBhYm91dCB0aGlzIHRva2VuIGluIHRoZVxuICAgICAgLy8gaW52ZXJ0ZWQgaW5kZXhcbiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdGhpcy5tZXRhZGF0YVdoaXRlbGlzdC5sZW5ndGg7IGwrKykge1xuICAgICAgICB2YXIgbWV0YWRhdGFLZXkgPSB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0W2xdLFxuICAgICAgICAgICAgbWV0YWRhdGEgPSB0ZXJtLm1ldGFkYXRhW21ldGFkYXRhS2V5XTtcblxuICAgICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXVtmaWVsZE5hbWVdW2RvY1JlZl1bbWV0YWRhdGFLZXldID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdW21ldGFkYXRhS2V5XS5wdXNoKG1ldGFkYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhdmVyYWdlIGRvY3VtZW50IGxlbmd0aCBmb3IgdGhpcyBpbmRleFxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY2FsY3VsYXRlQXZlcmFnZUZpZWxkTGVuZ3RocyA9IGZ1bmN0aW9uICgpIHtcblxuICB2YXIgZmllbGRSZWZzID0gT2JqZWN0LmtleXModGhpcy5maWVsZExlbmd0aHMpLFxuICAgICAgbnVtYmVyT2ZGaWVsZHMgPSBmaWVsZFJlZnMubGVuZ3RoLFxuICAgICAgYWNjdW11bGF0b3IgPSB7fSxcbiAgICAgIGRvY3VtZW50c1dpdGhGaWVsZCA9IHt9O1xuXG4gIHZhciBmaWVsZDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZkZpZWxkczsgaSsrKSB7XG4gICAgdmFyIGZpZWxkUmVmID0gbHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nKGZpZWxkUmVmc1tpXSk7XG4gICAgZmllbGQgPSBmaWVsZFJlZi5maWVsZE5hbWU7XG5cbiAgICBpZiAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSB8fCAoZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXSA9IDApKSB7XG4gICAgICBkb2N1bWVudHNXaXRoRmllbGRbZmllbGRdICs9IDE7XG4gICAgfVxuXG5cbiAgICBpZiAoYWNjdW11bGF0b3JbZmllbGRdIHx8IChhY2N1bXVsYXRvcltmaWVsZF0gPSAwKSkge1xuICAgICAgYWNjdW11bGF0b3JbZmllbGRdICs9IHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZmllbGQgPSB0aGlzLl9maWVsZHNbaV07XG4gICAgYWNjdW11bGF0b3JbZmllbGRdID0gYWNjdW11bGF0b3JbZmllbGRdIC8gZG9jdW1lbnRzV2l0aEZpZWxkW2ZpZWxkXTtcbiAgfVxuXG4gIHRoaXMuYXZlcmFnZUZpZWxkTGVuZ3RoID0gYWNjdW11bGF0b3I7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyBhIHZlY3RvciBzcGFjZSBtb2RlbCBvZiBldmVyeSBkb2N1bWVudCB1c2luZyBsdW5yLlZlY3RvclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlRmllbGRWZWN0b3JzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZmllbGRWZWN0b3JzID0ge30sXG4gICAgICBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgIGZpZWxkUmVmc0xlbmd0aCA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICB0ZXJtSWRmQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZmllbGRSZWZzTGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcoZmllbGRSZWZzW2ldKSxcbiAgICAgICAgZmllbGQgPSBmaWVsZFJlZi5maWVsZE5hbWUsXG4gICAgICAgIGZpZWxkTGVuZ3RoID0gdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdLFxuICAgICAgICBmaWVsZFZlY3RvciA9IG5ldyBsdW5yLlZlY3RvcigpLFxuICAgICAgICB0ZXJtRnJlcXVlbmNpZXMgPSB0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzW2ZpZWxkUmVmXSxcbiAgICAgICAgdGVybXMgPSBPYmplY3Qua2V5cyh0ZXJtRnJlcXVlbmNpZXMpLFxuICAgICAgICB0ZXJtc0xlbmd0aCA9IHRlcm1zLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXNMZW5ndGg7IGorKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXSxcbiAgICAgICAgICB0ZiA9IHRlcm1GcmVxdWVuY2llc1t0ZXJtXSxcbiAgICAgICAgICB0ZXJtSW5kZXggPSB0aGlzLmludmVydGVkSW5kZXhbdGVybV0uX2luZGV4LFxuICAgICAgICAgIGlkZiwgc2NvcmUsIHNjb3JlV2l0aFByZWNpc2lvbjtcblxuICAgICAgaWYgKHRlcm1JZGZDYWNoZVt0ZXJtXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlkZiA9IGx1bnIuaWRmKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSwgdGhpcy5kb2N1bWVudENvdW50KTtcbiAgICAgICAgdGVybUlkZkNhY2hlW3Rlcm1dID0gaWRmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWRmID0gdGVybUlkZkNhY2hlW3Rlcm1dO1xuICAgICAgfVxuXG4gICAgICBzY29yZSA9IGlkZiAqICgodGhpcy5fazEgKyAxKSAqIHRmKSAvICh0aGlzLl9rMSAqICgxIC0gdGhpcy5fYiArIHRoaXMuX2IgKiAoZmllbGRMZW5ndGggLyB0aGlzLmF2ZXJhZ2VGaWVsZExlbmd0aFtmaWVsZF0pKSArIHRmKTtcbiAgICAgIHNjb3JlV2l0aFByZWNpc2lvbiA9IE1hdGgucm91bmQoc2NvcmUgKiAxMDAwKSAvIDEwMDA7XG4gICAgICAvLyBDb252ZXJ0cyAxLjIzNDU2Nzg5IHRvIDEuMjM0LlxuICAgICAgLy8gUmVkdWNpbmcgdGhlIHByZWNpc2lvbiBzbyB0aGF0IHRoZSB2ZWN0b3JzIHRha2UgdXAgbGVzc1xuICAgICAgLy8gc3BhY2Ugd2hlbiBzZXJpYWxpc2VkLiBEb2luZyBpdCBub3cgc28gdGhhdCB0aGV5IGJlaGF2ZVxuICAgICAgLy8gdGhlIHNhbWUgYmVmb3JlIGFuZCBhZnRlciBzZXJpYWxpc2F0aW9uLiBBbHNvLCB0aGlzIGlzXG4gICAgICAvLyB0aGUgZmFzdGVzdCBhcHByb2FjaCB0byByZWR1Y2luZyBhIG51bWJlcidzIHByZWNpc2lvbiBpblxuICAgICAgLy8gSmF2YVNjcmlwdC5cblxuICAgICAgZmllbGRWZWN0b3IuaW5zZXJ0KHRlcm1JbmRleCwgc2NvcmVXaXRoUHJlY2lzaW9uKTtcbiAgICB9XG5cbiAgICBmaWVsZFZlY3RvcnNbZmllbGRSZWZdID0gZmllbGRWZWN0b3I7XG4gIH1cblxuICB0aGlzLmZpZWxkVmVjdG9ycyA9IGZpZWxkVmVjdG9ycztcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCBvZiBhbGwgdG9rZW5zIGluIHRoZSBpbmRleCB1c2luZyBsdW5yLlRva2VuU2V0XG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jcmVhdGVUb2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50b2tlblNldCA9IGx1bnIuVG9rZW5TZXQuZnJvbUFycmF5KFxuICAgIE9iamVjdC5rZXlzKHRoaXMuaW52ZXJ0ZWRJbmRleCkuc29ydCgpXG4gICk7XG59O1xuXG4vKipcbiAqIEJ1aWxkcyB0aGUgaW5kZXgsIGNyZWF0aW5nIGFuIGluc3RhbmNlIG9mIGx1bnIuSW5kZXguXG4gKlxuICogVGhpcyBjb21wbGV0ZXMgdGhlIGluZGV4aW5nIHByb2Nlc3MgYW5kIHNob3VsZCBvbmx5IGJlIGNhbGxlZFxuICogb25jZSBhbGwgZG9jdW1lbnRzIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogQHJldHVybnMge2x1bnIuSW5kZXh9XG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuY2FsY3VsYXRlQXZlcmFnZUZpZWxkTGVuZ3RocygpO1xuICB0aGlzLmNyZWF0ZUZpZWxkVmVjdG9ycygpO1xuICB0aGlzLmNyZWF0ZVRva2VuU2V0KCk7XG5cbiAgcmV0dXJuIG5ldyBsdW5yLkluZGV4KHtcbiAgICBpbnZlcnRlZEluZGV4OiB0aGlzLmludmVydGVkSW5kZXgsXG4gICAgZmllbGRWZWN0b3JzOiB0aGlzLmZpZWxkVmVjdG9ycyxcbiAgICB0b2tlblNldDogdGhpcy50b2tlblNldCxcbiAgICBmaWVsZHM6IHRoaXMuX2ZpZWxkcyxcbiAgICBwaXBlbGluZTogdGhpcy5zZWFyY2hQaXBlbGluZVxuICB9KTtcbn07XG5cbi8qKlxuICogQXBwbGllcyBhIHBsdWdpbiB0byB0aGUgaW5kZXggYnVpbGRlci5cbiAqXG4gKiBBIHBsdWdpbiBpcyBhIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGNvbnRleHQuXG4gKiBQbHVnaW5zIGNhbiBiZSB1c2VkIHRvIGN1c3RvbWlzZSBvciBleHRlbmQgdGhlIGJlaGF2aW91ciBvZiB0aGUgaW5kZXhcbiAqIGluIHNvbWUgd2F5LiBBIHBsdWdpbiBpcyBqdXN0IGEgZnVuY3Rpb24sIHRoYXQgZW5jYXBzdWxhdGVkIHRoZSBjdXN0b21cbiAqIGJlaGF2aW91ciB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHdoZW4gYnVpbGRpbmcgdGhlIGluZGV4LlxuICpcbiAqIFRoZSBwbHVnaW4gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgYXJndW1lbnQsIGFkZGl0aW9uYWxcbiAqIGFyZ3VtZW50cyBjYW4gYWxzbyBiZSBwYXNzZWQgd2hlbiBjYWxsaW5nIHVzZS4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkXG4gKiB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBsdWdpbiBUaGUgcGx1Z2luIHRvIGFwcGx5LlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgZm4uYXBwbHkodGhpcywgYXJncyk7XG59O1xuLyoqXG4gKiBDb250YWlucyBhbmQgY29sbGVjdHMgbWV0YWRhdGEgYWJvdXQgYSBtYXRjaGluZyBkb2N1bWVudC5cbiAqIEEgc2luZ2xlIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIGlzIHJldHVybmVkIGFzIHBhcnQgb2YgZXZlcnlcbiAqIGx1bnIuSW5kZXh+UmVzdWx0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtZXRhZGF0YSAtIEEgY2xvbmVkIGNvbGxlY3Rpb24gb2YgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9jdW1lbnQuXG4gKiBAc2VlIHtAbGluayBsdW5yLkluZGV4flJlc3VsdH1cbiAqL1xubHVuci5NYXRjaERhdGEgPSBmdW5jdGlvbiAodGVybSwgZmllbGQsIG1ldGFkYXRhKSB7XG4gIHZhciBjbG9uZWRNZXRhZGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBtZXRhZGF0YUtleXMgPSBPYmplY3Qua2V5cyhtZXRhZGF0YSk7XG5cbiAgLy8gQ2xvbmluZyB0aGUgbWV0YWRhdGEgdG8gcHJldmVudCB0aGUgb3JpZ2luYWxcbiAgLy8gYmVpbmcgbXV0YXRlZCBkdXJpbmcgbWF0Y2ggZGF0YSBjb21iaW5hdGlvbi5cbiAgLy8gTWV0YWRhdGEgaXMga2VwdCBpbiBhbiBhcnJheSB3aXRoaW4gdGhlIGludmVydGVkXG4gIC8vIGluZGV4IHNvIGNsb25pbmcgdGhlIGRhdGEgY2FuIGJlIGRvbmUgd2l0aFxuICAvLyBBcnJheSNzbGljZVxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBtZXRhZGF0YUtleXNbaV07XG4gICAgY2xvbmVkTWV0YWRhdGFba2V5XSA9IG1ldGFkYXRhW2tleV0uc2xpY2UoKTtcbiAgfVxuXG4gIHRoaXMubWV0YWRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB0aGlzLm1ldGFkYXRhW3Rlcm1dID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBjbG9uZWRNZXRhZGF0YTtcbn07XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2lsbCBiZSBjcmVhdGVkIGZvciBldmVyeSB0ZXJtIHRoYXQgbWF0Y2hlcyBhXG4gKiBkb2N1bWVudC4gSG93ZXZlciBvbmx5IG9uZSBpbnN0YW5jZSBpcyByZXF1aXJlZCBpbiBhIGx1bnIuSW5kZXh+UmVzdWx0LiBUaGlzXG4gKiBtZXRob2QgY29tYmluZXMgbWV0YWRhdGEgZnJvbSBhbm90aGVyIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpdGggdGhpc1xuICogb2JqZWN0cyBtZXRhZGF0YS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuTWF0Y2hEYXRhfSBvdGhlck1hdGNoRGF0YSAtIEFub3RoZXIgaW5zdGFuY2Ugb2YgbWF0Y2ggZGF0YSB0byBtZXJnZSB3aXRoIHRoaXMgb25lLlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKG90aGVyTWF0Y2hEYXRhKSB7XG4gIHZhciB0ZXJtcyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRlcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRlcm0gPSB0ZXJtc1tpXSxcbiAgICAgICAgZmllbGRzID0gT2JqZWN0LmtleXMob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV0pO1xuXG4gICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBmaWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tqXSxcbiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdKTtcblxuICAgICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNba107XG5cbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSBvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XS5jb25jYXQob3RoZXJNYXRjaERhdGEubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQWRkIG1ldGFkYXRhIGZvciBhIHRlcm0vZmllbGQgcGFpciB0byB0aGlzIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqL1xubHVuci5NYXRjaERhdGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgaWYgKCEodGVybSBpbiB0aGlzLm1ldGFkYXRhKSkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdID0gbWV0YWRhdGE7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEoZmllbGQgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXSkpIHtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IG1ldGFkYXRhO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBtZXRhZGF0YUtleXMgPSBPYmplY3Qua2V5cyhtZXRhZGF0YSk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldO1xuXG4gICAgaWYgKGtleSBpbiB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0uY29uY2F0KG1ldGFkYXRhW2tleV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gbWV0YWRhdGFba2V5XTtcbiAgICB9XG4gIH1cbn07XG4vKipcbiAqIEEgbHVuci5RdWVyeSBwcm92aWRlcyBhIHByb2dyYW1tYXRpYyB3YXkgb2YgZGVmaW5pbmcgcXVlcmllcyB0byBiZSBwZXJmb3JtZWRcbiAqIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gKlxuICogUHJlZmVyIGNvbnN0cnVjdGluZyBhIGx1bnIuUXVlcnkgdXNpbmcgdGhlIHtAbGluayBsdW5yLkluZGV4I3F1ZXJ5fSBtZXRob2RcbiAqIHNvIHRoZSBxdWVyeSBvYmplY3QgaXMgcHJlLWluaXRpYWxpemVkIHdpdGggdGhlIHJpZ2h0IGluZGV4IGZpZWxkcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcm9wZXJ0eSB7bHVuci5RdWVyeX5DbGF1c2VbXX0gY2xhdXNlcyAtIEFuIGFycmF5IG9mIHF1ZXJ5IGNsYXVzZXMuXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBhbGxGaWVsZHMgLSBBbiBhcnJheSBvZiBhbGwgYXZhaWxhYmxlIGZpZWxkcyBpbiBhIGx1bnIuSW5kZXguXG4gKi9cbmx1bnIuUXVlcnkgPSBmdW5jdGlvbiAoYWxsRmllbGRzKSB7XG4gIHRoaXMuY2xhdXNlcyA9IFtdO1xuICB0aGlzLmFsbEZpZWxkcyA9IGFsbEZpZWxkcztcbn07XG5cbi8qKlxuICogQ29uc3RhbnRzIGZvciBpbmRpY2F0aW5nIHdoYXQga2luZCBvZiBhdXRvbWF0aWMgd2lsZGNhcmQgaW5zZXJ0aW9uIHdpbGwgYmUgdXNlZCB3aGVuIGNvbnN0cnVjdGluZyBhIHF1ZXJ5IGNsYXVzZS5cbiAqXG4gKiBUaGlzIGFsbG93cyB3aWxkY2FyZHMgdG8gYmUgYWRkZWQgdG8gdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgdGVybSB3aXRob3V0IGhhdmluZyB0byBtYW51YWxseSBkbyBhbnkgc3RyaW5nXG4gKiBjb25jYXRlbmF0aW9uLlxuICpcbiAqIFRoZSB3aWxkY2FyZCBjb25zdGFudHMgY2FuIGJlIGJpdHdpc2UgY29tYmluZWQgdG8gc2VsZWN0IGJvdGggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2lsZGNhcmRzLlxuICpcbiAqIEBjb25zdGFudFxuICogQGRlZmF1bHRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5OT05FIC0gVGhlIHRlcm0gd2lsbCBoYXZlIG5vIHdpbGRjYXJkcyBpbnNlcnRlZCwgdGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvdXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5MRUFESU5HIC0gUHJlcGVuZCB0aGUgdGVybSB3aXRoIGEgd2lsZGNhcmQsIHVubGVzcyBhIGxlYWRpbmcgd2lsZGNhcmQgYWxyZWFkeSBleGlzdHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWxkY2FyZC5UUkFJTElORyAtIEFwcGVuZCBhIHdpbGRjYXJkIHRvIHRoZSB0ZXJtLCB1bmxlc3MgYSB0cmFpbGluZyB3aWxkY2FyZCBhbHJlYWR5IGV4aXN0c1xuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I3Rlcm1cbiAqIEBleGFtcGxlIDxjYXB0aW9uPnF1ZXJ5IHRlcm0gd2l0aCB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHsgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcgfSlcbiAqIEBleGFtcGxlIDxjYXB0aW9uPnF1ZXJ5IHRlcm0gd2l0aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZDwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHtcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyB8IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKi9cblxubHVuci5RdWVyeS53aWxkY2FyZCA9IFwiKlwiO1xubHVuci5RdWVyeS53aWxkY2FyZC5OT05FID0gMDtcbmx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORyA9IDE7XG5sdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HID0gMjtcblxuLyoqXG4gKiBBIHNpbmdsZSBjbGF1c2UgaW4gYSB7QGxpbmsgbHVuci5RdWVyeX0gY29udGFpbnMgYSB0ZXJtIGFuZCBkZXRhaWxzIG9uIGhvdyB0b1xuICogbWF0Y2ggdGhhdCB0ZXJtIGFnYWluc3QgYSB7QGxpbmsgbHVuci5JbmRleH0uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gbHVuci5RdWVyeX5DbGF1c2VcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGZpZWxkcyAtIFRoZSBmaWVsZHMgaW4gYW4gaW5kZXggdGhpcyBjbGF1c2Ugc2hvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbYm9vc3Q9MV0gLSBBbnkgYm9vc3QgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIG1hdGNoaW5nIHRoaXMgY2xhdXNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtlZGl0RGlzdGFuY2VdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgaGF2ZSBmdXp6eSBtYXRjaGluZyBhcHBsaWVkLCBhbmQgaG93IGZ1enp5IHRoZSBtYXRjaCBzaG91bGQgYmUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VQaXBlbGluZV0gLSBXaGV0aGVyIHRoZSB0ZXJtIHNob3VsZCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgc2VhcmNoIHBpcGVsaW5lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt3aWxkY2FyZD0wXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgd2lsZGNhcmRzIGFwcGVuZGVkIG9yIHByZXBlbmRlZC5cbiAqL1xuXG4vKipcbiAqIEFkZHMgYSB7QGxpbmsgbHVuci5RdWVyeX5DbGF1c2V9IHRvIHRoaXMgcXVlcnkuXG4gKlxuICogVW5sZXNzIHRoZSBjbGF1c2UgY29udGFpbnMgdGhlIGZpZWxkcyB0byBiZSBtYXRjaGVkIGFsbCBmaWVsZHMgd2lsbCBiZSBtYXRjaGVkLiBJbiBhZGRpdGlvblxuICogYSBkZWZhdWx0IGJvb3N0IG9mIDEgaXMgYXBwbGllZCB0byB0aGUgY2xhdXNlLlxuICpcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX5DbGF1c2V9IGNsYXVzZSAtIFRoZSBjbGF1c2UgdG8gYWRkIHRvIHRoaXMgcXVlcnkuXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAqL1xubHVuci5RdWVyeS5wcm90b3R5cGUuY2xhdXNlID0gZnVuY3Rpb24gKGNsYXVzZSkge1xuICBpZiAoISgnZmllbGRzJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmZpZWxkcyA9IHRoaXMuYWxsRmllbGRzO1xuICB9XG5cbiAgaWYgKCEoJ2Jvb3N0JyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmJvb3N0ID0gMTtcbiAgfVxuXG4gIGlmICghKCd1c2VQaXBlbGluZScgaW4gY2xhdXNlKSkge1xuICAgIGNsYXVzZS51c2VQaXBlbGluZSA9IHRydWU7XG4gIH1cblxuICBpZiAoISgnd2lsZGNhcmQnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2Uud2lsZGNhcmQgPSBsdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkU7XG4gIH1cblxuICBpZiAoKGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuTEVBRElORykgJiYgKGNsYXVzZS50ZXJtLmNoYXJBdCgwKSAhPSBsdW5yLlF1ZXJ5LndpbGRjYXJkKSkge1xuICAgIGNsYXVzZS50ZXJtID0gXCIqXCIgKyBjbGF1c2UudGVybTtcbiAgfVxuXG4gIGlmICgoY2xhdXNlLndpbGRjYXJkICYgbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORykgJiYgKGNsYXVzZS50ZXJtLnNsaWNlKC0xKSAhPSBsdW5yLlF1ZXJ5LndpbGRjYXJkKSkge1xuICAgIGNsYXVzZS50ZXJtID0gXCJcIiArIGNsYXVzZS50ZXJtICsgXCIqXCI7XG4gIH1cblxuICB0aGlzLmNsYXVzZXMucHVzaChjbGF1c2UpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgdGVybSB0byB0aGUgY3VycmVudCBxdWVyeSwgdW5kZXIgdGhlIGNvdmVycyB0aGlzIHdpbGwgY3JlYXRlIGEge0BsaW5rIGx1bnIuUXVlcnl+Q2xhdXNlfVxuICogdG8gdGhlIGxpc3Qgb2YgY2xhdXNlcyB0aGF0IG1ha2UgdXAgdGhpcyBxdWVyeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVybSAtIFRoZSB0ZXJtIHRvIGFkZCB0byB0aGUgcXVlcnkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHF1ZXJ5IGNsYXVzZS5cbiAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeTwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oXCJmb29cIilcbiAqIEBleGFtcGxlIDxjYXB0aW9uPmFkZGluZyBhIHNpbmdsZSB0ZXJtIHRvIGEgcXVlcnkgYW5kIHNwZWNpZnlpbmcgc2VhcmNoIGZpZWxkcywgdGVybSBib29zdCBhbmQgYXV0b21hdGljIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybShcImZvb1wiLCB7XG4gKiAgIGZpZWxkczogW1widGl0bGVcIl0sXG4gKiAgIGJvb3N0OiAxMCxcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKi9cbmx1bnIuUXVlcnkucHJvdG90eXBlLnRlcm0gPSBmdW5jdGlvbiAodGVybSwgb3B0aW9ucykge1xuICB2YXIgY2xhdXNlID0gb3B0aW9ucyB8fCB7fTtcbiAgY2xhdXNlLnRlcm0gPSB0ZXJtO1xuXG4gIHRoaXMuY2xhdXNlKGNsYXVzZSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xubHVuci5RdWVyeVBhcnNlRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgc3RhcnQsIGVuZCkge1xuICB0aGlzLm5hbWUgPSBcIlF1ZXJ5UGFyc2VFcnJvclwiO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gIHRoaXMuZW5kID0gZW5kO1xufTtcblxubHVuci5RdWVyeVBhcnNlRXJyb3IucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5sdW5yLlF1ZXJ5TGV4ZXIgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHRoaXMubGV4ZW1lcyA9IFtdO1xuICB0aGlzLnN0ciA9IHN0cjtcbiAgdGhpcy5sZW5ndGggPSBzdHIubGVuZ3RoO1xuICB0aGlzLnBvcyA9IDA7XG4gIHRoaXMuc3RhcnQgPSAwO1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMgPSBbXTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcblxuICB3aGlsZSAoc3RhdGUpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLnNsaWNlU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3ViU2xpY2VzID0gW10sXG4gICAgICBzbGljZVN0YXJ0ID0gdGhpcy5zdGFydCxcbiAgICAgIHNsaWNlRW5kID0gdGhpcy5wb3M7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBzbGljZUVuZCA9IHRoaXMuZXNjYXBlQ2hhclBvc2l0aW9uc1tpXTtcbiAgICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCkpO1xuICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDE7XG4gIH1cblxuICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCB0aGlzLnBvcykpO1xuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoID0gMDtcblxuICByZXR1cm4gc3ViU2xpY2VzLmpvaW4oJycpO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdGhpcy5sZXhlbWVzLnB1c2goe1xuICAgIHR5cGU6IHR5cGUsXG4gICAgc3RyOiB0aGlzLnNsaWNlU3RyaW5nKCksXG4gICAgc3RhcnQ6IHRoaXMuc3RhcnQsXG4gICAgZW5kOiB0aGlzLnBvc1xuICB9KTtcblxuICB0aGlzLnN0YXJ0ID0gdGhpcy5wb3M7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVzY2FwZUNoYXJhY3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLnB1c2godGhpcy5wb3MgLSAxKTtcbiAgdGhpcy5wb3MgKz0gMTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5FT1M7XG4gIH1cblxuICB2YXIgY2hhciA9IHRoaXMuc3RyLmNoYXJBdCh0aGlzLnBvcyk7XG4gIHRoaXMucG9zICs9IDE7XG4gIHJldHVybiBjaGFyO1xufTtcblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMucG9zIC0gdGhpcy5zdGFydDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuaWdub3JlID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5zdGFydCA9PSB0aGlzLnBvcykge1xuICAgIHRoaXMucG9zICs9IDE7XG4gIH1cblxuICB0aGlzLnN0YXJ0ID0gdGhpcy5wb3M7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmJhY2t1cCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wb3MgLT0gMTtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYWNjZXB0RGlnaXRSdW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjaGFyLCBjaGFyQ29kZTtcblxuICBkbyB7XG4gICAgY2hhciA9IHRoaXMubmV4dCgpO1xuICAgIGNoYXJDb2RlID0gY2hhci5jaGFyQ29kZUF0KDApO1xuICB9IHdoaWxlIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpO1xuXG4gIGlmIChjaGFyICE9IGx1bnIuUXVlcnlMZXhlci5FT1MpIHtcbiAgICB0aGlzLmJhY2t1cCgpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLm1vcmUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnBvcyA8IHRoaXMubGVuZ3RoO1xufTtcblxubHVuci5RdWVyeUxleGVyLkVPUyA9ICdFT1MnO1xubHVuci5RdWVyeUxleGVyLkZJRUxEID0gJ0ZJRUxEJztcbmx1bnIuUXVlcnlMZXhlci5URVJNID0gJ1RFUk0nO1xubHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0UgPSAnRURJVF9ESVNUQU5DRSc7XG5sdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QgPSAnQk9PU1QnO1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RmllbGQgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuYmFja3VwKCk7XG4gIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLkZJRUxEKTtcbiAgbGV4ZXIuaWdub3JlKCk7XG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhUZXJtID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMSkge1xuICAgIGxleGVyLmJhY2t1cCgpO1xuICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICB9XG5cbiAgbGV4ZXIuaWdub3JlKCk7XG5cbiAgaWYgKGxleGVyLm1vcmUoKSkge1xuICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbiAgfVxufTtcblxubHVuci5RdWVyeUxleGVyLmxleEVkaXREaXN0YW5jZSA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5pZ25vcmUoKTtcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRSk7XG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dDtcbn07XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhCb29zdCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5pZ25vcmUoKTtcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKTtcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QpO1xuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHQ7XG59O1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RU9TID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pO1xuICB9XG59O1xuXG4vLyBUaGlzIG1hdGNoZXMgdGhlIHNlcGFyYXRvciB1c2VkIHdoZW4gdG9rZW5pc2luZyBmaWVsZHNcbi8vIHdpdGhpbiBhIGRvY3VtZW50LiBUaGVzZSBzaG91bGQgbWF0Y2ggb3RoZXJ3aXNlIGl0IGlzXG4vLyBub3QgcG9zc2libGUgdG8gc2VhcmNoIGZvciBzb21lIHRva2VucyB3aXRoaW4gYSBkb2N1bWVudC5cbi8vXG4vLyBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIHVzZXIgdG8gY2hhbmdlIHRoZSBzZXBhcmF0b3Igb24gdGhlXG4vLyB0b2tlbml6ZXIgc28gaXQgX21pZ2h0XyBjbGFzaCB3aXRoIGFueSBvdGhlciBvZiB0aGUgc3BlY2lhbFxuLy8gY2hhcmFjdGVycyBhbHJlYWR5IHVzZWQgd2l0aGluIHRoZSBzZWFyY2ggc3RyaW5nLCBlLmcuIDouXG4vL1xuLy8gVGhpcyBtZWFucyB0aGF0IGl0IGlzIHBvc3NpYmxlIHRvIGNoYW5nZSB0aGUgc2VwYXJhdG9yIGluXG4vLyBzdWNoIGEgd2F5IHRoYXQgbWFrZXMgc29tZSB3b3JkcyB1bnNlYXJjaGFibGUgdXNpbmcgYSBzZWFyY2hcbi8vIHN0cmluZy5cbmx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yID0gbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yO1xuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHZhciBjaGFyID0gbGV4ZXIubmV4dCgpO1xuXG4gICAgaWYgKGNoYXIgPT0gbHVuci5RdWVyeUxleGVyLkVPUykge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhFT1M7XG4gICAgfVxuXG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlciBpcyAnXFwnXG4gICAgaWYgKGNoYXIuY2hhckNvZGVBdCgwKSA9PSA5Mikge1xuICAgICAgbGV4ZXIuZXNjYXBlQ2hhcmFjdGVyKCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIjpcIikge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhGaWVsZDtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIn5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEVkaXREaXN0YW5jZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PSBcIl5cIikge1xuICAgICAgbGV4ZXIuYmFja3VwKCk7XG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEJvb3N0O1xuICAgIH1cblxuICAgIGlmIChjaGFyLm1hdGNoKGx1bnIuUXVlcnlMZXhlci50ZXJtU2VwYXJhdG9yKSkge1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXJtO1xuICAgIH1cbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlciA9IGZ1bmN0aW9uIChzdHIsIHF1ZXJ5KSB7XG4gIHRoaXMubGV4ZXIgPSBuZXcgbHVuci5RdWVyeUxleGVyIChzdHIpO1xuICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9O1xuICB0aGlzLmxleGVtZUlkeCA9IDA7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZXhlci5ydW4oKTtcbiAgdGhpcy5sZXhlbWVzID0gdGhpcy5sZXhlci5sZXhlbWVzO1xuXG4gIHZhciBzdGF0ZSA9IGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZE9yVGVybTtcblxuICB3aGlsZSAoc3RhdGUpIHtcbiAgICBzdGF0ZSA9IHN0YXRlKHRoaXMpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMucXVlcnk7XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5wZWVrTGV4ZW1lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5sZXhlbWVzW3RoaXMubGV4ZW1lSWR4XTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLmNvbnN1bWVMZXhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZXhlbWUgPSB0aGlzLnBlZWtMZXhlbWUoKTtcbiAgdGhpcy5sZXhlbWVJZHggKz0gMTtcbiAgcmV0dXJuIGxleGVtZTtcbn07XG5cbmx1bnIuUXVlcnlQYXJzZXIucHJvdG90eXBlLm5leHRDbGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjb21wbGV0ZWRDbGF1c2UgPSB0aGlzLmN1cnJlbnRDbGF1c2U7XG4gIHRoaXMucXVlcnkuY2xhdXNlKGNvbXBsZXRlZENsYXVzZSk7XG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9O1xufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkT3JUZXJtID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKGxleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm07XG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGVkIGVpdGhlciBhIGZpZWxkIG9yIGEgdGVybSwgZm91bmQgXCIgKyBsZXhlbWUudHlwZTtcblxuICAgICAgaWYgKGxleGVtZS5zdHIubGVuZ3RoID49IDEpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9IFwiIHdpdGggdmFsdWUgJ1wiICsgbGV4ZW1lLnN0ciArIFwiJ1wiO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZXJyb3JNZXNzYWdlO1xuICBpZiAocGFyc2VyLnF1ZXJ5LmFsbEZpZWxkcy5pbmRleE9mKGxleGVtZS5zdHIpID09IC0xKSB7XG4gICAgdmFyIHBvc3NpYmxlRmllbGRzID0gcGFyc2VyLnF1ZXJ5LmFsbEZpZWxkcy5tYXAoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIFwiJ1wiICsgZiArIFwiJ1wiOyB9KS5qb2luKCcsICcpO1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcInVucmVjb2duaXNlZCBmaWVsZCAnXCIgKyBsZXhlbWUuc3RyICsgXCInLCBwb3NzaWJsZSBmaWVsZHM6IFwiICsgcG9zc2libGVGaWVsZHM7XG5cbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmZpZWxkcyA9IFtsZXhlbWUuc3RyXTtcblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0aW5nIHRlcm0sIGZvdW5kIG5vdGhpbmdcIjtcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKTtcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKCk7XG5cbiAgaWYgKGxleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudGVybSA9IGxleGVtZS5zdHIudG9Mb3dlckNhc2UoKTtcblxuICBpZiAobGV4ZW1lLnN0ci5pbmRleE9mKFwiKlwiKSAhPSAtMSkge1xuICAgIHBhcnNlci5jdXJyZW50Q2xhdXNlLnVzZVBpcGVsaW5lID0gZmFsc2U7XG4gIH1cblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKCk7XG5cbiAgaWYgKG5leHRMZXhlbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKCk7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZTtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5CT09TVDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQm9vc3Q7XG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCI7XG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpO1xuICB9XG59O1xuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgZWRpdERpc3RhbmNlID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApO1xuXG4gIHZhciBlcnJvck1lc3NhZ2U7XG4gIGlmIChpc05hTihlZGl0RGlzdGFuY2UpKSB7XG4gICAgZXJyb3JNZXNzYWdlID0gXCJlZGl0IGRpc3RhbmNlIG11c3QgYmUgbnVtZXJpY1wiO1xuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpO1xuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuZWRpdERpc3RhbmNlID0gZWRpdERpc3RhbmNlO1xuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufTtcblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0ID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKTtcblxuICB2YXIgZXJyb3JNZXNzYWdlO1xuICBpZiAobGV4ZW1lID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYm9vc3QgPSBwYXJzZUludChsZXhlbWUuc3RyLCAxMCk7XG5cbiAgaWYgKGlzTmFOKGJvb3N0KSkge1xuICAgIGVycm9yTWVzc2FnZSA9IFwiYm9vc3QgbXVzdCBiZSBudW1lcmljXCI7XG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZCk7XG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5ib29zdCA9IGJvb3N0O1xuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKTtcblxuICBpZiAobmV4dExleGVtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBzd2l0Y2ggKG5leHRMZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpO1xuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKTtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGQ7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlO1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdDtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiO1xuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKTtcbiAgfVxufVxuXG4gIC8qKlxuICAgKiBleHBvcnQgdGhlIG1vZHVsZSB2aWEgQU1ELCBDb21tb25KUyBvciBhcyBhIGJyb3dzZXIgZ2xvYmFsXG4gICAqIEV4cG9ydCBjb2RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzXG4gICAqL1xuICA7KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgZGVmaW5lKGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICogb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAqIGxpa2UgTm9kZS5cbiAgICAgICAqL1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICByb290Lmx1bnIgPSBmYWN0b3J5KCk7XG4gICAgfVxuICB9KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBKdXN0IHJldHVybiBhIHZhbHVlIHRvIGRlZmluZSB0aGUgbW9kdWxlIGV4cG9ydC5cbiAgICAgKiBUaGlzIGV4YW1wbGUgcmV0dXJucyBhbiBvYmplY3QsIGJ1dCB0aGUgbW9kdWxlXG4gICAgICogY2FuIHJldHVybiBhIGZ1bmN0aW9uIGFzIHRoZSBleHBvcnRlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICByZXR1cm4gbHVucjtcbiAgfSkpO1xufSkoKTtcblxuXG4gIC8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vcHNldWRvbnltMTE3L0xldmVuc2h0ZWluXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSl7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnkocm9vdCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJvb3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QuTGV2ZW5zaHRlaW4gPSBmYWN0b3J5KHJvb3QpO1xuICAgIH1cbn0odGhpcywgZnVuY3Rpb24ocm9vdCl7XG5cbiAgICBmdW5jdGlvbiBmb3JFYWNoKCBhcnJheSwgZm4gKSB7IHZhciBpLCBsZW5ndGg7XG4gICAgICAgIGkgPSAtMTtcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoICsraSA8IGxlbmd0aCApXG4gICAgICAgICAgICBmbiggYXJyYXlbIGkgXSwgaSwgYXJyYXkgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXAoIGFycmF5LCBmbiApIHsgdmFyIHJlc3VsdDtcbiAgICAgICAgcmVzdWx0ID0gQXJyYXkoIGFycmF5Lmxlbmd0aCApO1xuICAgICAgICBmb3JFYWNoKCBhcnJheSwgZnVuY3Rpb24gKCB2YWwsIGksIGFycmF5ICkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goIGZuKCB2YWwsIGksIGFycmF5ICkgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVkdWNlKCBhcnJheSwgZm4sIGFjY3VtdWxhdG9yICkge1xuICAgICAgICBmb3JFYWNoKCBhcnJheSwgZnVuY3Rpb24oIHZhbCwgaSwgYXJyYXkgKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRvciA9IGZuKCB2YWwsIGksIGFycmF5ICk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLy8gRm9yIHN0cmluZyBtb2RlXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcihzdHIsIGlkeCkge1xuICAgICAgICByZXR1cm4gc3RyLmNoYXJBdChpZHgpO1xuICAgIH1cblxuICAgIC8vIEZvciBhcnJheSBtb2RlXG4gICAgZnVuY3Rpb24gZ2V0QXJyYXlNZW1iZXIoYXJyLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGFycltpZHhdO1xuICAgIH1cblxuICAgIC8vIExldmVuc2h0ZWluIGRpc3RhbmNlXG4gICAgZnVuY3Rpb24gTGV2ZW5zaHRlaW4oIHN0cl9tLCBzdHJfbiApIHtcbiAgICAgICAgdmFyIHByZXZpb3VzLCBjdXJyZW50LCBtYXRyaXgsIGdldEVsZW07XG4gICAgICAgIC8vIFNldCB0byBzdHJpbmcgb3IgYXJyYXkgbW9kZVxuICAgICAgICBpZiAodHlwZW9mIHN0cl9tID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzdHJfbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgZ2V0RWxlbSA9IGdldENoYXI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN0cl9tID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzdHJfbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgZ2V0RWxlbSA9IGdldEFycmF5TWVtYmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgXCJMZXZlbnN0aHRlaW46IGlucHV0IG11c3QgYmUgdHdvIHN0cmluZ3Mgb3IgdHdvIGFycmF5c1wiO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvbnN0cnVjdG9yXG4gICAgICAgIG1hdHJpeCA9IHRoaXMuX21hdHJpeCA9IFtdO1xuXG4gICAgICAgIC8vIFNhbml0eSBjaGVja3NcbiAgICAgICAgaWYgKCBzdHJfbSA9PSBzdHJfbiApIHtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gMDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgfWVsc2UgaWYgKCBzdHJfbSA9PT0gJycgKXtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gc3RyX24ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9ZWxzZSBpZiAoIHN0cl9uID09PSAnJyApIHtcbiAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gc3RyX20ubGVuZ3RoO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRpc3RhbmNlO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAvLyBEYW5nZXIgV2lsbCBSb2JpbnNvblxuICAgICAgICAgICAgcHJldmlvdXMgPSBbIDAgXTtcbiAgICAgICAgICAgIGZvckVhY2goIHN0cl9tLCBmdW5jdGlvbih2LGkpe1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIHByZXZpb3VzW2ldID0gaTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRyaXhbMF0gPSBwcmV2aW91cztcbiAgICAgICAgICAgIGZvckVhY2goIHN0cl9uLCBmdW5jdGlvbiggbl92YWwsIG5faWR4ICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBbICsrbl9pZHggXTtcbiAgICAgICAgICAgICAgICBmb3JFYWNoKCBzdHJfbSwgZnVuY3Rpb24oIG1fdmFsLCBtX2lkeCApIHtcbiAgICAgICAgICAgICAgICAgICAgbV9pZHgrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBnZXRFbGVtKHN0cl9tLCBtX2lkeCAtIDEpID09IGdldEVsZW0oc3RyX24sIG5faWR4IC0gMSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFsgbV9pZHggXSA9IHByZXZpb3VzWyBtX2lkeCAtIDEgXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFsgbV9pZHggXSA9IE1hdGgubWluKCBwcmV2aW91c1sgbV9pZHggXSArIDEsIGN1cnJlbnRbIG1faWR4IC0gMSBdICsgMSwgcHJldmlvdXNbIG1faWR4IC0gMSBdICsgMSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSBjdXJyZW50O1xuICAgICAgICAgICAgICAgIG1hdHJpeFsgbWF0cml4Lmxlbmd0aCBdID0gcHJldmlvdXM7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IGN1cnJlbnRbIGN1cnJlbnQubGVuZ3RoIC0gMSBdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBMZXZlbnNodGVpbi5wcm90b3R5cGUudG9TdHJpbmcgPSBMZXZlbnNodGVpbi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCBub19wcmludCApIHsgdmFyIG1hdHJpeCwgbWF4LCBidWZmLCBzZXAsIHJvd3M7XG4gICAgICAgIG1hdHJpeCA9IHRoaXMuZ2V0TWF0cml4KCk7XG4gICAgICAgIG1heCA9IHJlZHVjZSggbWF0cml4LGZ1bmN0aW9uKCBtLCBvICkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KCBtLCByZWR1Y2UoIG8sIE1hdGgubWF4LCAwICkgKTtcbiAgICAgICAgfSwgMCApO1xuICAgICAgICBidWZmID0gQXJyYXkoICggbWF4ICsgJycgKS5sZW5ndGggKS5qb2luKCAnICcgKTtcblxuICAgICAgICBzZXAgPSBbXTtcbiAgICAgICAgd2hpbGUgKCBzZXAubGVuZ3RoIDwgKG1hdHJpeFswXSAmJiBtYXRyaXhbMF0ubGVuZ3RoIHx8IDApIClcbiAgICAgICAgICAgIHNlcFsgc2VwLmxlbmd0aCBdID0gQXJyYXkoIGJ1ZmYubGVuZ3RoICsgMSApLmpvaW4oICctJyApO1xuICAgICAgICBzZXAgPSBzZXAuam9pbiggJy0rJyApICsgJy0nO1xuXG4gICAgICAgIHJvd3MgPSBtYXAoIG1hdHJpeCwgZnVuY3Rpb24oIHJvdyApIHsgdmFyIGNlbGxzO1xuICAgICAgICAgICAgY2VsbHMgPSBtYXAoIHJvdywgZnVuY3Rpb24oIGNlbGwgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICggYnVmZiArIGNlbGwgKS5zbGljZSggLSBidWZmLmxlbmd0aCApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY2VsbHMuam9pbiggJyB8JyApICsgJyAnO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcm93cy5qb2luKCBcIlxcblwiICsgc2VwICsgXCJcXG5cIiApO1xuICAgIH07XG5cbiAgICAvLyBzdGVwcyB0byBnZXQgZnJvbSBzdHJpbmcgMSB0byBzdHJpbmcgMlxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS5nZXRTdGVwcyA9IGZ1bmN0aW9uKCkgICAgIHtcbiAgICAgICAgdmFyIHN0ZXBzLCBtYXRyaXgsIHgsIHksIHUsIGwsIGQsIG1pbjtcbiAgICAgICAgc3RlcHMgPSBbXTtcbiAgICAgICAgbWF0cml4ID0gdGhpcy5nZXRNYXRyaXgoKTtcbiAgICAgICAgeCA9IG1hdHJpeC5sZW5ndGggLSAxO1xuICAgICAgICB5ID0gbWF0cml4WzBdLmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlKHggIT09IDAgfHwgeSAhPT0gMCkgICAgIHtcbiAgICAgICAgICAgIHUgPSB5ID4gMCA/IG1hdHJpeFt4XVt5LTFdIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIGwgPSB4ID4gMCA/IG1hdHJpeFt4LTFdW3ldIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgIGQgPSB5ID4gMCAmJiB4ID4gMCA/IG1hdHJpeFt4LTFdW3ktMV0gOiBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICAgICAgbWluID0gTWF0aC5taW4odSwgbCwgZCk7XG4gICAgICAgICAgICBpZihtaW4gPT09IGQpIHtcbiAgICAgICAgICAgICAgICBpZihkIDwgbWF0cml4W3hdW3ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXBzLnB1c2goWydzdWJzdGl0dXRlJywgeSwgeF0pO1xuICAgICAgICAgICAgICAgIH0vLyAgZWxzZSBzdGVwcy5wdXNoKFsnbm8tb3AnLCB5LCB4XSlcbiAgICAgICAgICAgICAgICB4LS07XG4gICAgICAgICAgICAgICAgeS0tO1xuICAgICAgICAgICAgfSBlbHNlIGlmKG1pbiA9PT0gbCkge1xuICAgICAgICAgICAgICAgIHN0ZXBzLnB1c2goWydpbnNlcnQnLCB5LCB4XSk7XG4gICAgICAgICAgICAgICAgeC0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGVwcy5wdXNoKFsnZGVsZXRlJywgeSwgeF0pO1xuICAgICAgICAgICAgICAgIHktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RlcHM7XG4gICAgfTtcblxuICAgIExldmVuc2h0ZWluLnByb3RvdHlwZS5nZXRNYXRyaXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRyaXguc2xpY2UoKTtcbiAgICB9O1xuXG4gICAgTGV2ZW5zaHRlaW4ucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzdGFuY2U7XG4gICAgfTtcblxuICAgIHJldHVybiBMZXZlbnNodGVpbjtcblxufSkpO1xuXG5cbiAgLy9UaGlzIGlzIHRoZSBtYWluIHBsdWdpbiBkZWZpbml0aW9uXG4gICQuZm4uZ2hvc3RIdW50ZXIgID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cbiAgICAvL0hlcmUgd2UgdXNlIGpRdWVyeSdzIGV4dGVuZCB0byBzZXQgZGVmYXVsdCB2YWx1ZXMgaWYgdGhleSB3ZXJlbid0IHNldCBieSB0aGUgdXNlclxuICAgIHZhciBvcHRzICAgID0gJC5leHRlbmQoIHt9LCAkLmZuLmdob3N0SHVudGVyLmRlZmF1bHRzLCBvcHRpb25zICk7XG4gICAgaWYoIG9wdHMucmVzdWx0cyApXG4gICAge1xuICAgICAgcGx1Z2luTWV0aG9kcy5pbml0KCB0aGlzICwgb3B0cyApO1xuICAgICAgcmV0dXJuIHBsdWdpbk1ldGhvZHM7XG4gICAgfVxuICB9O1xuXG4gIC8vIElmIHRoZSBHaG9zdCBpbnN0YW5jZSBpcyBpbiBhIHN1YnBhdGggb2YgdGhlIHNpdGUsIHNldCBzdWJwYXRoXG4gIC8vIGFzIHRoZSBwYXRoIHRvIHRoZSBzaXRlIHdpdGggYSBsZWFkaW5nIHNsYXNoIGFuZCBubyB0cmFpbGluZyBzbGFzaFxuICAvLyAoaS5lLiBcIi9wYXRoL3RvL2luc3RhbmNlXCIpLlxuICAkLmZuLmdob3N0SHVudGVyLmRlZmF1bHRzID0ge1xuICAgIHJlc3VsdHNEYXRhICAgICA6IGZhbHNlLFxuICAgIG9uUGFnZUxvYWQgICAgICA6IHRydWUsXG4gICAgb25LZXlVcCAgICAgICA6IGZhbHNlLFxuICAgIHJlc3VsdF90ZW1wbGF0ZSAgIDogXCI8YSBpZD0nZ2gte3tyZWZ9fScgY2xhc3M9J2doLXNlYXJjaC1pdGVtJyBocmVmPSd7e2xpbmt9fSc+PHA+PGgyPnt7dGl0bGV9fTwvaDI+PGg0Pnt7cHJldHR5UHViRGF0ZX19PC9oND48L3A+PC9hPlwiLFxuICAgIGluZm9fdGVtcGxhdGUgICA6IFwiPHA+TnVtYmVyIG9mIHBvc3RzIGZvdW5kOiB7e2Ftb3VudH19PC9wPlwiLFxuICAgIGRpc3BsYXlTZWFyY2hJbmZvIDogdHJ1ZSxcbiAgICB6ZXJvUmVzdWx0c0luZm8gICA6IHRydWUsXG4gICAgYmVmb3JlICAgICAgICA6IGZhbHNlLFxuICAgIG9uQ29tcGxldGUgICAgICA6IGZhbHNlLFxuICAgIGluY2x1ZGVwYWdlcyAgICA6IGZhbHNlLFxuICAgIGZpbHRlcmZpZWxkcyAgICA6IGZhbHNlLFxuICAgIHN1YnBhdGggICAgICAgOiBcIlwiLFxuICAgIGl0ZW1fcHJlcHJvY2Vzc29yIDogZmFsc2UsXG4gICAgaW5kZXhpbmdfc3RhcnQgICAgOiBmYWxzZSxcbiAgICBpbmRleGluZ19lbmQgICAgOiBmYWxzZVxuICB9O1xuICB2YXIgcHJldHR5RGF0ZSA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIHZhciBtb250aE5hbWVzID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG4gICAgICByZXR1cm4gZC5nZXREYXRlKCkgKyAnICcgKyBtb250aE5hbWVzW2QuZ2V0TW9udGgoKV0gKyAnICcgKyBkLmdldEZ1bGxZZWFyKCk7XG4gIH07XG5cbiAgdmFyIGdldFN1YnBhdGhLZXkgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXC8vLCBcIlwiKS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICB9O1xuXG4gIHZhciBsYXN0VGltZW91dElEID0gbnVsbDtcblxuICAvLyBXZSBhZGQgYSBwcmVmaXggdG8gbmV3IElEcyBhbmQgcmVtb3ZlIGl0IGFmdGVyIGEgc2V0IG9mXG4gIC8vIHVwZGF0ZXMgaXMgY29tcGxldGUsIGp1c3QgaW4gY2FzZSBhIGJyb3dzZXIgZnJlYWtzIG92ZXJcbiAgLy8gZHVwbGljYXRlIElEcyBpbiB0aGUgRE9NLlxuICB2YXIgc2V0dGxlSURzID0gZnVuY3Rpb24oKSB7XG4gICAgJCgnLmdoLXNlYXJjaC1pdGVtJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIG9sZEF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgIHZhciBuZXdBdHRyID0gb2xkQXR0ci5yZXBsYWNlKC9ebmV3LS8sIFwiXCIpO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgbmV3QXR0cik7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIHVwZGF0ZVNlYXJjaExpc3QgPSBmdW5jdGlvbihsaXN0SXRlbXMsIGFwaURhdGEsIHN0ZXBzKSB7XG4gICAgZm9yICh2YXIgaT0wLGlsZW49c3RlcHMubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgIHZhciBzdGVwID0gc3RlcHNbaV07XG4gICAgICBpZiAoc3RlcFswXSA9PSBcImRlbGV0ZVwiKSB7XG4gICAgICAgIGxpc3RJdGVtcy5lcShzdGVwWzFdLTEpLnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGx1bnJyZWYgPSBhcGlEYXRhW3N0ZXBbMl0tMV0ucmVmO1xuICAgICAgICB2YXIgcG9zdERhdGEgPSB0aGlzLmJsb2dEYXRhW2x1bnJyZWZdO1xuICAgICAgICB2YXIgaHRtbCA9IHRoaXMuZm9ybWF0KHRoaXMucmVzdWx0X3RlbXBsYXRlLHBvc3REYXRhKTtcbiAgICAgICAgaWYgKHN0ZXBbMF0gPT09IFwic3Vic3RpdHV0ZVwiKSB7XG4gICAgICAgICAgbGlzdEl0ZW1zLmVxKHN0ZXBbMV0tMSkucmVwbGFjZVdpdGgoaHRtbCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RlcFswXSA9PT0gXCJpbnNlcnRcIikge1xuICAgICAgICAgIHZhciBwb3M7XG4gICAgICAgICAgaWYgKHN0ZXBbMV0gPT09IDApIHtcbiAgICAgICAgICAgIHBvcyA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvcyA9IChzdGVwWzFdLTEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaXN0SXRlbXMuZXEocG9zKS5hZnRlcihodG1sKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXR0bGVJRHMoKTtcbiAgfTtcblxuICB2YXIgZ3JhYkFuZEluZGV4ID0gZnVuY3Rpb24oKXtcbiAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IGdyYWJBbmRJbmRleCcpO1xuICAgIHRoaXMuYmxvZ0RhdGEgPSB7fTtcbiAgICB0aGlzLmxhdGVzdFBvc3QgPSAwO1xuICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICBsaW1pdDogXCJhbGxcIixcbiAgICAgIGluY2x1ZGU6IFwidGFnc1wiLFxuICAgICAgZm9ybWF0czogW1wicGxhaW50ZXh0XCJdXG4gICAgfTtcbiAgICBpZiAgKCB0aGlzLmluY2x1ZGVwYWdlcyApe1xuICAgICAgcGFyYW1zLmZpbHRlcj1cIihwYWdlOnRydWUscGFnZTpmYWxzZSlcIjtcbiAgICB9XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICAkLmdldChnaG9zdC51cmwuYXBpKCdwb3N0cycscGFyYW1zKSkuZG9uZShmdW5jdGlvbihkYXRhKXtcbiAgICAgIHZhciBpZHhTcmMgPSBkYXRhLnBvc3RzO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJnaG9zdEh1bnRlcjogaW5kZXhpbmcgYWxsIHBvc3RzXCIpXG4gICAgICBtZS5pbmRleCA9IGx1bnIoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlZignaWQnKTtcbiAgICAgICAgdGhpcy5maWVsZCgndGl0bGUnKTtcbiAgICAgICAgdGhpcy5maWVsZCgnZGVzY3JpcHRpb24nKTtcbiAgICAgICAgdGhpcy5maWVsZCgncGxhaW50ZXh0Jyk7XG4gICAgICAgIHRoaXMuZmllbGQoJ3B1YkRhdGUnKTtcbiAgICAgICAgdGhpcy5maWVsZCgndGFnJyk7XG4gICAgICAgIGlkeFNyYy5mb3JFYWNoKGZ1bmN0aW9uIChhcnJheUl0ZW0pIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN0YXJ0IGluZGV4aW5nIGFuIGl0ZW06IFwiICsgYXJyYXlJdGVtLmlkKTtcbiAgICAgICAgICAvLyBUcmFjayB0aGUgbGF0ZXN0IHZhbHVlIG9mIHVwZGF0ZWRfYXQsICB0byBzdGFzaCBpbiBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICB2YXIgaXRlbURhdGUgPSBuZXcgRGF0ZShhcnJheUl0ZW0udXBkYXRlZF9hdCkuZ2V0VGltZSgpO1xuICAgICAgICAgIHZhciByZWNvcmRlZERhdGUgPSBuZXcgRGF0ZShtZS5sYXRlc3RQb3N0KS5nZXRUaW1lKCk7XG4gICAgICAgICAgaWYgKGl0ZW1EYXRlID4gcmVjb3JkZWREYXRlKSB7XG4gICAgICAgICAgICBtZS5sYXRlc3RQb3N0ID0gYXJyYXlJdGVtLnVwZGF0ZWRfYXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciB0YWdfYXJyID0gYXJyYXlJdGVtLnRhZ3MubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB2Lm5hbWU7IC8vIGB0YWdgIG9iamVjdCBoYXMgYW4gYG5hbWVgIHByb3BlcnR5IHdoaWNoIGlzIHRoZSB2YWx1ZSBvZiB0YWcuIElmIHlvdSBhbHNvIHdhbnQgb3RoZXIgaW5mbywgY2hlY2sgQVBJIGFuZCBnZXQgdGhhdCBwcm9wZXJ0eVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmKGFycmF5SXRlbS5tZXRhX2Rlc2NyaXB0aW9uID09PSBudWxsKSB7IGFycmF5SXRlbS5tZXRhX2Rlc2NyaXB0aW9uID0gJyc7IH1cbiAgICAgICAgICB2YXIgY2F0ZWdvcnkgPSB0YWdfYXJyLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICBpZiAoY2F0ZWdvcnkubGVuZ3RoIDwgMSl7XG4gICAgICAgICAgICBjYXRlZ29yeSA9IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBwYXJzZWREYXRhICA9IHtcbiAgICAgICAgICAgIGlkICAgICAgOiBTdHJpbmcoYXJyYXlJdGVtLmlkKSxcbiAgICAgICAgICAgIHRpdGxlICAgICA6IFN0cmluZyhhcnJheUl0ZW0udGl0bGUpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24gOiBTdHJpbmcoYXJyYXlJdGVtLmN1c3RvbV9leGNlcnB0KSxcbiAgICAgICAgICAgIHBsYWludGV4dCAgIDogU3RyaW5nKGFycmF5SXRlbS5wbGFpbnRleHQpLFxuICAgICAgICAgICAgcHViRGF0ZSAgIDogU3RyaW5nKGFycmF5SXRlbS5wdWJsaXNoZWRfYXQpLFxuICAgICAgICAgICAgdGFnICAgICA6IGNhdGVnb3J5XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmFkZChwYXJzZWREYXRhKTtcbiAgICAgICAgICB2YXIgbG9jYWxVcmwgPSBtZS5zdWJwYXRoICsgYXJyYXlJdGVtLnVybDtcbiAgICAgICAgICBtZS5ibG9nRGF0YVthcnJheUl0ZW0uaWRdID0ge1xuICAgICAgICAgICAgdGl0bGU6IGFycmF5SXRlbS50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBhcnJheUl0ZW0ubWV0YV9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHB1YkRhdGU6IHByZXR0eURhdGUocGFyc2VkRGF0YS5wdWJEYXRlKSxcbiAgICAgICAgICAgIGxpbms6IGxvY2FsVXJsLFxuICAgICAgICAgICAgdGFnczogdGFnX2FyclxuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtZXRhZGF0YSBcInByZVwiLXByb2Nlc3NvciBmb3IgdGhlIGl0ZW0sIHJ1biBpdCBoZXJlLlxuICAgICAgICAgIGlmIChtZS5pdGVtX3ByZXByb2Nlc3Nvcikge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtZS5ibG9nRGF0YVthcnJheUl0ZW0uaWRdLCBtZS5pdGVtX3ByZXByb2Nlc3NvcihhcnJheUl0ZW0pKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkb25lIGluZGV4aW5nIHRoZSBpdGVtXCIpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHN1YnBhdGhLZXkgPSBnZXRTdWJwYXRoS2V5KG1lLnN1YnBhdGgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sdW5ySW5kZXhcIiksIEpTT04uc3RyaW5naWZ5KG1lLmluZGV4KSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2Jsb2dEYXRhXCIpLCBKU09OLnN0cmluZ2lmeShtZS5ibG9nRGF0YSkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sYXRlc3RQb3N0XCIpLCBtZS5sYXRlc3RQb3N0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiZ2hvc3RIdW50ZXI6IHNhdmUgdG8gbG9jYWxTdG9yYWdlIGZhaWxlZDogXCIgKyBlKTtcbiAgICAgIH1cbiAgICAgIGlmIChtZS5pbmRleGluZ19lbmQpIHtcbiAgICAgICAgbWUuaW5kZXhpbmdfZW5kKCk7XG4gICAgICB9XG4gICAgICBtZS5pc0luaXQgPSB0cnVlO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBwbHVnaW5NZXRob2RzID0ge1xuXG4gICAgaXNJbml0ICAgICAgOiBmYWxzZSxcblxuICAgIGluaXQgICAgICA6IGZ1bmN0aW9uKCB0YXJnZXQgLCBvcHRzICl7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdHMpO1xuICAgICAgY29uc29sZS5sb2coXCJnaG9zdEh1bnRlcjogaW5pdFwiKTtcbiAgICAgIHZhciBtaWFtID0gZnVuY3Rpb24oKXt9O1xuICAgICAgaWYgKCBvcHRzLm9uUGFnZUxvYWQgKSB7XG4gICAgICAgIG1pYW0gPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICB0aGF0LmxvYWRBUEkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQobWlhbSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuZm9jdXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICB0aGF0LmxvYWRBUEkoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRhcmdldC5jbG9zZXN0KFwiZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oZSl7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhhdC5maW5kKHRhcmdldC52YWwoKSk7XG4gICAgICB9KTtcblxuICAgICAgaWYoIG9wdHMub25LZXlVcCApIHtcbiAgICAgICAgLy8gSW4gc2VhcmNoLWFzLXlvdS10eXBlIG1vZGUsIHRoZSBFbnRlciBrZXkgaXMgbWVhbmluZ2xlc3MsXG4gICAgICAgIC8vIHNvIHdlIGRpc2FibGUgaXQgaW4gdGhlIHNlYXJjaCBmaWVsZC4gSWYgZW5hYmxlZCwgc29tZSBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHNhdmUgZGF0YSB0byBoaXN0b3J5IChldmVuIHdoZW4gYXV0b2NvbXBsZXRlPVwiZmFsc2VcIiksIHdoaWNoXG4gICAgICAgIC8vIGlzIGFuIGludHJ1c2l2ZSBoZWFkYWNoZSwgcGFydGljdWxhcmx5IG9uIG1vYmlsZS5cbiAgICAgICAgdGFyZ2V0LmtleWRvd24oZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0YXJnZXQua2V5dXAoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICB0aGF0LmZpbmQodGFyZ2V0LnZhbCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICBsb2FkQVBJICAgICA6IGZ1bmN0aW9uKCl7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IGxvYWRBUEknKTtcbiAgICAgIGlmKCF0aGlzLmlzSW5pdCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2hvc3RIdW50ZXI6IHRoaXMuaXNJbml0IGlzIHRydWUnKTtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXhpbmdfc3RhcnQpIHtcbiAgICAgICAgICB0aGlzLmluZGV4aW5nX3N0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgaXNJbml0IGlzIGZhbHN5LCBjaGVjayBmb3IgZGF0YSBpbiBsb2NhbFN0b3JlLFxuICAgICAgICAvLyBwYXJzZSBpbnRvIG1lbW9yeSwgYW5kIGRlY2xhcmUgaXNJbml0IHRvIGJlIHRydWUuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHN1YnBhdGhLZXkgPSBnZXRTdWJwYXRoS2V5KHRoaXMuc3VicGF0aCk7XG4gICAgICAgICAgdGhpcy5pbmRleCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2x1bnJJbmRleFwiKSk7XG4gICAgICAgICAgdGhpcy5ibG9nRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKChcImdob3N0X1wiICsgc3VicGF0aEtleSArIFwiX2Jsb2dEYXRhXCIpKTtcbiAgICAgICAgICB0aGlzLmxhdGVzdFBvc3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgoXCJnaG9zdF9cIiArIHN1YnBhdGhLZXkgKyBcIl9sYXRlc3RQb3N0XCIpKTtcbiAgICAgICAgICBpZiAodGhpcy5sYXRlc3RQb3N0ICYmIHRoaXMuaW5kZXggJiYgdGhpcy5ibG9nRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sYXRlc3RQb3N0ID0gdGhpcy5sYXRlc3RQb3N0O1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IGx1bnIuSW5kZXgubG9hZChKU09OLnBhcnNlKHRoaXMuaW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMuYmxvZ0RhdGEgPSBKU09OLnBhcnNlKHRoaXMuYmxvZ0RhdGEpO1xuICAgICAgICAgICAgdGhpcy5pc0luaXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiZ2hvc3RIdW50ZXI6IHJldHJpZXZlIGZyb20gbG9jYWxTdG9yYWdlIGZhaWxlZDogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNJbml0KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogdGhpcy5pc0luaXQgcmVjaGVjayBpcyB0cnVlJyk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBuZXcgb3IgZWRpdGVkIHBvc3RzXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgbGltaXQ6IFwiYWxsXCIsXG4gICAgICAgICAgZmlsdGVyOiBcInVwZGF0ZWRfYXQ6PlxcJ1wiICsgdGhpcy5sYXRlc3RQb3N0LnJlcGxhY2UoL1xcLi4qLywgXCJcIikucmVwbGFjZSgvVC8sIFwiIFwiKSArIFwiXFwnXCIsXG4gICAgICAgICAgZmllbGRzOiBcImlkXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgJC5nZXQoZ2hvc3QudXJsLmFwaSgncG9zdHMnLCBwYXJhbXMpKS5kb25lKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgIGlmIChkYXRhLnBvc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGdyYWJBbmRJbmRleC5jYWxsKG1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1lLmluZGV4aW5nX2VuZCkge1xuICAgICAgICAgICAgICBtZS5pbmRleGluZ19lbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lLmlzSW5pdCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnaG9zdEh1bnRlcjogdGhpcy5pc0luaXQgcmVjaGVjayBpcyBmYWxzZScpO1xuICAgICAgICBncmFiQW5kSW5kZXguY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICBmaW5kICAgICAgOiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBjbGVhclRpbWVvdXQobGFzdFRpbWVvdXRJRCk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxhc3RUaW1lb3V0SUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBRdWVyeSBzdHJhdGVneSBpcyBsaWZ0ZWQgZnJvbSBjb21tZW50cyBvbiBhIGx1bnIuanMgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9vbGl2ZXJubi9sdW5yLmpzL2lzc3Vlcy8yNTZcbiAgICAgICAgdmFyIHRoaW5nc0ZvdW5kID0gW107XG4gICAgICAgIC8vIFRoZSBxdWVyeSBpbnRlcmZhY2UgZXhwZWN0cyBzaW5nbGUgdGVybXMsIHNvIHdlIHNwbGl0LlxuICAgICAgICB2YXIgdmFsdWVTcGxpdCA9IHZhbHVlLnNwbGl0KC9cXHMrLyk7XG5cbiAgICAgICAgZm9yICh2YXIgaT0wLGlsZW49dmFsdWVTcGxpdC5sZW5ndGg7aTxpbGVuO2krKykge1xuICAgICAgICAgIC8vIEZldGNoIGEgbGlzdCBvZiBtYXRjaGVzIGZvciBlYWNoIHRlcm0uXG4gICAgICAgICAgdmFyIHYgPSB2YWx1ZVNwbGl0W2ldO1xuICAgICAgICAgIGlmICghdikgY29udGludWU7XG4gICAgICAgICAgdGhpbmdzRm91bmQucHVzaCh0aGlzLmluZGV4LnF1ZXJ5KGZ1bmN0aW9uIChxKSB7XG4gICAgICAgICAgICAvLyBGb3IgYW4gZXhwbGFuYXRpb24gb2YgbHVuciBpbmRleGluZyBvcHRpb25zLCBzZWUgdGhlIGx1bnIuanNcbiAgICAgICAgICAgIC8vIGRvY3VtZW50YXRpb24gYXQgaHR0cHM6Ly9sdW5yanMuY29tL2RvY3MvbHVuci5RdWVyeS5odG1sI35DbGF1c2VcblxuICAgICAgICAgICAgLy8gbG9vayBmb3IgYW4gZXhhY3QgbWF0Y2ggYW5kIGFwcGx5IGEgbGFyZ2UgcG9zaXRpdmUgYm9vc3RcbiAgICAgICAgICAgIHEudGVybSh2LCB7XG4gICAgICAgICAgICAgIHVzZVBpcGVsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICBib29zdDogMTAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBsb29rIGZvciB0ZXJtcyB0aGF0IG1hdGNoIHRoZSBiZWdpbm5pbmcgb2YgdGhpcyBxdWVyeVRlcm0gYW5kIGFwcGx5IGEgbWVkaXVtIGJvb3N0XG4gICAgICAgICAgICBxLnRlcm0odiwge1xuICAgICAgICAgICAgICB1c2VQaXBlbGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIGJvb3N0OiAxMCxcbiAgICAgICAgICAgICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gbG9vayBmb3IgdGVybXMgdGhhdCBtYXRjaCB3aXRoIGFuIGVkaXQgZGlzdGFuY2Ugb2YgMSBhbmQgYXBwbHkgYSBzbWFsbCBib29zdFxuICAgICAgICAgICAgcS50ZXJtKHYsIHtcbiAgICAgICAgICAgICAgdXNlUGlwZWxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICBlZGl0RGlzdGFuY2U6IDEsXG4gICAgICAgICAgICAgIGJvb3N0OiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlYXJjaFJlc3VsdDtcbiAgICAgICAgaWYgKHRoaW5nc0ZvdW5kLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYWQgbXVsdGlwbGUgdGVybXMsIHdlJ2xsIGhhdmUgbXVsdGlwbGUgbGlzdHMuIFdlIGZpbHRlclxuICAgICAgICAgIC8vIHRoZW0gaGVyZSB0byB1c2Ugb25seSBpdGVtcyB0aGF0IHByb2R1Y2UgcmV0dXJucyBmb3IgYWxsXG4gICAgICAgICAgLy8gdGVybXMuIFRoaXMgc3Bvb2ZzIGFuIEFORCBqb2luIGJldHdlZW4gdGVybXMsIHdoaWNoIGx1bnIuanMgY2FuJ3RcbiAgICAgICAgICAvLyB5ZXQgZG8gaW50ZXJuYWxseS5cbiAgICAgICAgICAvLyBCeSB1c2luZyB0aGUgZmlyc3QgbGlzdCBvZiBpdGVtcyBhcyBtYXN0ZXIsIHdlIGdldCB3ZWlnaHRpbmdzXG4gICAgICAgICAgLy8gYmFzZWQgb24gdGhlIGZpcnN0IHRlcm0gZW50ZXJlZCwgd2hpY2ggaXMgbW9yZSBvciBsZXNzXG4gICAgICAgICAgLy8gd2hhdCB3ZSB3b3VsZCBleHBlY3QuXG4gICAgICAgICAgc2VhcmNoUmVzdWx0ID0gdGhpbmdzRm91bmRbMF07XG4gICAgICAgICAgdGhpbmdzRm91bmQgPSB0aGluZ3NGb3VuZC5zbGljZSgxKTtcbiAgICAgICAgICBmb3IgKCBpPXNlYXJjaFJlc3VsdC5sZW5ndGgtMTtpPi0xO2ktLSkge1xuICAgICAgICAgICAgdmFyIHJlZiA9IHNlYXJjaFJlc3VsdFtpXS5yZWY7XG4gICAgICAgICAgICBmb3IgKGo9MCxqbGVuPXRoaW5nc0ZvdW5kLmxlbmd0aDtqPGpsZW47aisrKSB7XG4gICAgICAgICAgICAgIHZhciBvdGhlclJlZnMgPSB7fTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaz0wLGtsZW49dGhpbmdzRm91bmRbal0ubGVuZ3RoO2s8a2xlbjtrKyspIHtcbiAgICAgICAgICAgICAgICBvdGhlclJlZnNbdGhpbmdzRm91bmRbal1ba10ucmVmXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKCFvdGhlclJlZnNbcmVmXSkge1xuICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IHNlYXJjaFJlc3VsdC5zbGljZSgwLCBpKS5jb25jYXQoc2VhcmNoUmVzdWx0LnNsaWNlKGkrMSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaW5nc0ZvdW5kLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIElmIHdlIGhhZCBqdXN0IG9uZSB0ZXJtIGFuZCBvbmUgbGlzdCwgcmV0dXJuIHRoYXQuXG4gICAgICAgICAgc2VhcmNoUmVzdWx0ID0gdGhpbmdzRm91bmRbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgd2FzIG5vIHNlYXJjaCByZXN1bHQsIHJldHVybiBhbiBlbXB0eSBsaXN0LlxuICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdHMgICAgID0gJCh0aGlzLnJlc3VsdHMpO1xuICAgICAgICB2YXIgcmVzdWx0c0RhdGEgICA9IFtdO1xuICAgICAgICBpZiAoc2VhcmNoUmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlc3VsdHMuZW1wdHkoKTtcbiAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5U2VhcmNoSW5mbyAmJiB0aGlzLnplcm9SZXN1bHRzSW5mbykge1xuICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQodGhpcy5mb3JtYXQodGhpcy5pbmZvX3RlbXBsYXRlLHtcImFtb3VudFwiOjB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheVNlYXJjaEluZm8pIHtcbiAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLmNoaWxkcmVuKCkuZXEoMCkucmVwbGFjZVdpdGgodGhpcy5mb3JtYXQodGhpcy5pbmZvX3RlbXBsYXRlLHtcImFtb3VudFwiOnNlYXJjaFJlc3VsdC5sZW5ndGh9KSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRoaXMuZm9ybWF0KHRoaXMuaW5mb190ZW1wbGF0ZSx7XCJhbW91bnRcIjpzZWFyY2hSZXN1bHQubGVuZ3RofSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuYmVmb3JlKSB7XG4gICAgICAgICAgdGhpcy5iZWZvcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgYmxvZ0RhdGEgZm9yIHRoZSBmdWxsIHNldCwgZm9yIG9uQ29tcGxldGVcbiAgICAgICAgZm9yICggaSA9IDA7IGkgPCBzZWFyY2hSZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgbHVucnJlZiAgID0gc2VhcmNoUmVzdWx0W2ldLnJlZjtcbiAgICAgICAgICB2YXIgcG9zdERhdGEgICAgPSB0aGlzLmJsb2dEYXRhW2x1bnJyZWZdO1xuICAgICAgICAgIGlmIChwb3N0RGF0YSkge1xuICAgICAgICAgICAgcG9zdERhdGEucmVmID0gbHVucnJlZjtcbiAgICAgICAgICAgIHJlc3VsdHNEYXRhLnB1c2gocG9zdERhdGEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJnaG9zdEh1bnRlcjogaW5kZXgvZGF0YSBtaXNtYXRjaC4gT3VjaC5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBhbiBhcnJheSBvZiBJRHMgcHJlc2VudCBpbiBjdXJyZW50IHJlc3VsdHNcbiAgICAgICAgdmFyIGxpc3RJdGVtcyA9ICQoJy5naC1zZWFyY2gtaXRlbScpO1xuICAgICAgICB2YXIgY3VycmVudFJlZnMgPSBsaXN0SXRlbXNcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZC5zbGljZSgzKTtcbiAgICAgICAgICB9KS5nZXQoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRSZWZzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGZvciAoIGk9MCxpbGVuPXJlc3VsdHNEYXRhLmxlbmd0aDtpPGlsZW47aSsrKSB7XG4gICAgICAgICAgICByZXN1bHRzLmFwcGVuZCh0aGlzLmZvcm1hdCh0aGlzLnJlc3VsdF90ZW1wbGF0ZSxyZXN1bHRzRGF0YVtpXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXR0bGVJRHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHZXQgYW4gYXJyYXkgb2YgSURzIHByZXNlbnQgaW4gc2VhcmNoUmVzdWx0XG4gICAgICAgICAgdmFyIG5ld1JlZnMgPSBbXTtcbiAgICAgICAgICBmb3IgKCBpPTAsaWxlbj1zZWFyY2hSZXN1bHQubGVuZ3RoO2k8aWxlbjtpKyspIHtcbiAgICAgICAgICAgIG5ld1JlZnMucHVzaChzZWFyY2hSZXN1bHRbaV0ucmVmKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gR2V0IHRoZSBMZXZlbnNodGVpbiBzdGVwcyBuZWVkZWQgdG8gdHJhbnNmb3JtIGN1cnJlbnQgaW50byBzZWFyY2hSZXN1bHRcbiAgICAgICAgICB2YXIgbGV2ZW5zaHRlaW4gPSBuZXcgTGV2ZW5zaHRlaW4oY3VycmVudFJlZnMsIG5ld1JlZnMpO1xuICAgICAgICAgIHZhciBzdGVwcyA9IGxldmVuc2h0ZWluLmdldFN0ZXBzKCk7XG4gICAgICAgICAgLy8gQXBwbHkgdGhlIG9wZXJhdGlvbnNcbiAgICAgICAgICB1cGRhdGVTZWFyY2hMaXN0LmNhbGwodGhpcywgbGlzdEl0ZW1zLCBzZWFyY2hSZXN1bHQsIHN0ZXBzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaWR5IHVwXG4gICAgICAgIGlmKHRoaXMub25Db21wbGV0ZSkge1xuICAgICAgICAgIHRoaXMub25Db21wbGV0ZShyZXN1bHRzRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKSwgMTAwKTtcbiAgICB9LFxuXG4gICAgY2xlYXIgICAgICAgOiBmdW5jdGlvbigpe1xuICAgICAgJCh0aGlzLnJlc3VsdHMpLmVtcHR5KCk7XG4gICAgICAvLyB0aGlzLnRhcmdldC52YWwoXCJcIik7XG4gICAgfSxcblxuICAgIGZvcm1hdCAgICAgIDogZnVuY3Rpb24gKHQsIGQpIHtcbiAgICAgIHJldHVybiB0LnJlcGxhY2UoL3t7KFtee31dKil9fS9nLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2YXIgciA9IGRbYl07XG4gICAgICAgIHJldHVybiB0eXBlb2YgciA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHIgPT09ICdudW1iZXInID8gciA6IGE7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbn0pKCBqUXVlcnkgKTtcbiIsIihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGhlYWRlciBsZXZlbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXI6IGhlYWRlcidzIHRhZyBuYW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICovXG4gICAgdmFyIGdldExldmVsID0gZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICBpZiAodHlwZW9mIGhlYWRlciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlY3MgPSBoZWFkZXIubWF0Y2goL1xcZC9nKTtcbiAgICAgICAgcmV0dXJuIGRlY3MgPyBNYXRoLm1pbi5hcHBseShudWxsLCBkZWNzKSA6IDE7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBvcmRlcmVkIGxpc3RcbiAgICAgKiBAcGFyYW0ge2pRdWVydH0gJHdyYXBwZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0gbGlzdFxuICAgICAqL1xuICAgIHZhciBjcmVhdGVMaXN0ID0gZnVuY3Rpb24gKCR3cmFwcGVyLCBjb3VudCkge1xuICAgICAgICB3aGlsZSAoY291bnQtLSkge1xuICAgICAgICAgICAgJHdyYXBwZXIgPSAkKCc8b2wvPicpLmFwcGVuZFRvKCR3cmFwcGVyKTtcblxuICAgICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgJHdyYXBwZXIgPSAkKCc8bGkvPicpLmFwcGVuZFRvKCR3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkd3JhcHBlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IHBvc2l0aW9uIGp1bXAgYmFja1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkY3VycmVudFdyYXBwZXI6IGN1cnJlbnQgaW5zZXJ0IHBvaW50XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldDogZGlzdGFuY2UgYmV0d2VlbiBjdXJyZW50J3MgYW5kIHRhcmdldCdzIGRlcHRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IGluc2VydCBwb2ludFxuICAgICAqL1xuICAgIHZhciBqdW1wQmFjayA9IGZ1bmN0aW9uICgkY3VycmVudFdyYXBwZXIsIG9mZnNldCkge1xuICAgICAgICB3aGlsZSAob2Zmc2V0LS0pIHtcbiAgICAgICAgICAgICRjdXJyZW50V3JhcHBlciA9ICRjdXJyZW50V3JhcHBlci5wYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkY3VycmVudFdyYXBwZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNldCBlbGVtZW50IGhyZWYvaWQgYW5kIGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG92ZXJ3cml0ZTogd2hldGhlciBvdmVyd3JpdGUgc291cmNlIGVsZW1lbnQgZXhpc3RlZCBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXg6IHByZWZpeCB0byBwcmVwZW5kIHRvIGhyZWYvaWRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHZhciBzZXRBdHRycyA9IGZ1bmN0aW9uIChvdmVyd3JpdGUsIHByZWZpeCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCRzcmMsICR0YXJnZXQsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICRzcmMudGV4dCgpO1xuICAgICAgICAgICAgdmFyIHByZSA9IHByZWZpeCArICctJyArIGluZGV4O1xuICAgICAgICAgICAgJHRhcmdldC50ZXh0KGNvbnRlbnQpO1xuXG4gICAgICAgICAgICB2YXIgc3JjID0gJHNyY1swXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkdGFyZ2V0WzBdO1xuICAgICAgICAgICAgdmFyIGlkID0gb3ZlcndyaXRlID8gcHJlIDogKHNyYy5pZCB8fCBwcmUpO1xuXG4gICAgICAgICAgICBpZCA9IGVuY29kZVVSSUNvbXBvbmVudChpZCk7XG5cbiAgICAgICAgICAgIHNyYy5pZCA9IGlkO1xuICAgICAgICAgICAgdGFyZ2V0LmhyZWYgPSAnIycgKyBpZDtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYnVpbGQgdGFibGUgb2YgY29udGVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSBsaXN0XG4gICAgICovXG4gICAgdmFyIGJ1aWxkVE9DID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gb3B0aW9ucy5zZWxlY3RvcjtcbiAgICAgICAgdmFyIHNjb3BlID0gb3B0aW9ucy5zY29wZTtcblxuICAgICAgICB2YXIgJHJldCA9ICQoJzxvbC8+Jyk7XG4gICAgICAgIHZhciAkd3JhcHBlciA9ICRyZXQ7XG4gICAgICAgIHZhciAkbGFzdExpID0gbnVsbDtcblxuICAgICAgICB2YXIgcHJldkRlcHRoID0gZ2V0TGV2ZWwoc2VsZWN0b3IpO1xuICAgICAgICB2YXIgX3NldEF0dHJzID0gc2V0QXR0cnMob3B0aW9ucy5vdmVyd3JpdGUsIG9wdGlvbnMucHJlZml4KTtcblxuICAgICAgICAkKHNjb3BlKVxuICAgICAgICAgICAgLmZpbmQoc2VsZWN0b3IpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudERlcHRoID0gZ2V0TGV2ZWwoZWxlbS50YWdOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gY3VycmVudERlcHRoIC0gcHJldkRlcHRoO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSBjcmVhdGVMaXN0KCRsYXN0TGksIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIG9uY2UgbW9yZSBsZXZlbCB0byBqdW1wIGJhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gZWc6IGgyICsgaDMgKyBoMiwgb2Zmc2V0ID0gaDIgLSBoMyA9IC0xXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIG9sIDwtLS0tLS0rIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyAgIGxpICAgICAgfFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgb2wgLS0tKyBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGxpXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1bXBiYWNrID0gdGFyZ2V0IC0gY3VycmVudCA9IDJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSBqdW1wQmFjaygkd3JhcHBlciwgLW9mZnNldCAqIDIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghJHdyYXBwZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGVyID0gJHJldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgJGxpID0gJCgnPGxpLz4nKTtcbiAgICAgICAgICAgICAgICB2YXIgJGEgPSAkKCc8YS8+Jyk7XG5cbiAgICAgICAgICAgICAgICBfc2V0QXR0cnMoJChlbGVtKSwgJGEsIGluZGV4KTtcblxuICAgICAgICAgICAgICAgICRsaS5hcHBlbmQoJGEpLmFwcGVuZFRvKCR3cmFwcGVyKTtcblxuICAgICAgICAgICAgICAgICRsYXN0TGkgPSAkbGk7XG4gICAgICAgICAgICAgICAgcHJldkRlcHRoID0gY3VycmVudERlcHRoO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICRyZXQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluaXQgdGFibGUgb2YgY29udGVudHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbl06IFRPQyBvcHRpb25zLCBhdmFpbGFibGUgcHJvcHM6XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7U3RyaW5nfSBbc2VsZWN0b3JdOiBoZWFkZXJzIHNlbGVjdG9yLCBkZWZhdWx0IGlzICdoMSwgaDIsIGgzLCBoNCwgaDUsIGg2J1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1N0cmluZ30gW3Njb3BlXTogc2VsZWN0b3IgdG8gc3BlY2lmeSBlbGVtZW50cyBzZWFyY2ggc2NvcGUsIGRlZmF1bHQgaXMgJ2JvZHknXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Qm9vbGVhbn0gW292ZXJ3cml0ZV06IHdoZXRoZXIgdG8gb3ZlcndyaXRlIGV4aXN0ZWQgaGVhZGVycycgaWQsIGRlZmF1bHQgaXMgZmFsc2VcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtTdHJpbmd9IFtwcmVmaXhdOiBzdHJpbmcgdG8gcHJlcGVuZCB0byBpZC9ocmVmIHByb3AsIGRlZmF1bHQgaXMgJ3RvYydcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0gJHRoaXNcbiAgICAgKi9cbiAgICAkLmZuLmluaXRUT0MgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdE9wdHMgPSB7XG4gICAgICAgICAgICBzZWxlY3RvcjogJ2gxLCBoMiwgaDMsIGg0LCBoNSwgaDYnLFxuICAgICAgICAgICAgc2NvcGU6ICdib2R5JyxcbiAgICAgICAgICAgIG92ZXJ3cml0ZTogZmFsc2UsXG4gICAgICAgICAgICBwcmVmaXg6ICd0b2MnXG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRPcHRzLCBvcHRpb25zKTtcblxuICAgICAgICB2YXIgc2VsZWN0b3IgPSBvcHRpb25zLnNlbGVjdG9yO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWxlY3RvciBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGVjdG9yLm1hdGNoKC9eKD86aFsxLTZdLD9cXHMqKSskL2cpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZWxlY3RvciBtdXN0IGNvbnRhaW5zIG9ubHkgaDEtNicpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzKS5hcHBlbmQoYnVpbGRUT0Mob3B0aW9ucykpO1xuXG4gICAgICAgIHZhciBjdXJyZW50SGFzaCA9IGxvY2F0aW9uLmhhc2g7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRIYXNoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5jaG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY3VycmVudEhhc2guc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgIGlmIChhbmNob3IpIGFuY2hvci5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJCh0aGlzKTtcbiAgICB9O1xufSkpO1xuIl19
